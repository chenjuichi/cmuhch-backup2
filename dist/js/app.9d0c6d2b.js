(function(t){function e(e){for(var a,n,r=e[0],l=e[1],c=e[2],d=0,g=[];d<r.length;d++)n=r[d],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&g.push(o[n][0]),o[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(g.length)g.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],a=!0,n=1;n<s.length;n++){var l=s[n];0!==o[l]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=s[0]))}return t}var a={},o={app:0},i=[];function n(t){return r.p+"js/"+({}[t]||t)+"."+{"chunk-2d22d746":"e661a0b5"}[t]+".js"}function r(e){if(a[e])return a[e].exports;var s=a[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.e=function(t){var e=[],s=o[t];if(0!==s)if(s)e.push(s[2]);else{var a=new Promise((function(e,a){s=o[t]=[e,a]}));e.push(s[2]=a);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=n(t);var c=new Error;i=function(e){l.onerror=l.onload=null,clearTimeout(d);var s=o[t];if(0!==s){if(s){var a=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",c.name="ChunkLoadError",c.type=a,c.request=i,s[1](c)}o[t]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(e)},r.m=t,r.c=a,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(s,a,function(e){return t[e]}.bind(null,a));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/",r.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var d=0;d<l.length;d++)e(l[d]);var u=c;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"00bd":function(t,e,s){},"06d8":function(t,e,s){},"0731":function(t,e,s){},"0ad9":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAEr0lEQVRoge2ZTWxUVRTHf+fNg9JSNZhKO4MmJQYJJhrxI7Z0pqkmRmg7UEMaF2KNSzbGBBJJXDAoK6JIQnSjJoIfiZJUalsKGMOk7bBQQU3cGBWBtjNTkQBCKYWZe1zMIyFFmLlvXhMW81vdN/P+55z/ux/v5j6oUKFChQoVKiBBB0zHY4+LMesQaQUagAe8v8aALKrD6jh9kf6R40HmDcSIgmQ7Y+tBtwPLS5T9piJvhvtHegW03BrKNpKNty5VNV8ATd5PpxHtU+MMasicDF1ZOA6QXzB1v+SdRnFMBypdeD2lcFRc96Xw/uTJcuooy8jE2liLY7QXWAyMq/J2uCb8sezbl7+dThM42R+i60F3INIIchY13eHB1BG/tfg2km5vbRXHfAvMR+iVmZqehsOHp2xi/N3dVmumc58qdAFX1TjPRQ4MD/upx5cRbzh9D9SJ6nv1g6lNfse5JnAmj8XeVdXXgTMiztMN/cN/2cZxrBODeHOiDqG3/qnU5nImqyQw9U+MbBLYD9xn1HymPh6wtZHC6kQTMCYzNT2SwNjGmI0kME61+7LAhMCqTEfLC7YxrIwUnpRu9y632s6J27F4X/ISolsBRGR7sftnY2UkE4+tpPCeON1QHd5rm6wY9QsinwDjwIrx9lWP2WitjEhhdUFhf7El1g9ezD6AkON02Wjt5ohqDADDkJXOBtFBL1nMRmY7R5YAuG7+DxudDUY4UWjJEhud7dAKA1BVlbXR2TCvat6E15w7I8B8gDOcuWqpK5kLl6qvec15NjpbIxcA6mZqF1nqSuYemb4e+7yNztbInwD5vPuQpa5kchgvtpyw0dkZEX4CEJFnrXQ2KcQ0Fxr6s43OcrLLIa/5oo3OCim8q8ToQRuZlZGLudqDwD/Aimy8panY/bak21ueBJpAzl40dx8qKrgBKyPLhoZmENkNoOrs9LNLvRUKIo7sLFyY95cNDc3Y6H1s4y+/A4yBNk92RF+11d+KTDy6AYgJTMi1hTts9dZGIv3HLiO6GUCF3ZNrY4/axphNZl3sYVE+ADDoG3521dZGAML9qa8EPgRqjGpvOt5W5ycOwNjzzfeS116gFtgbGUh97ieOLyMA05fc11B+RHlQNP/NWHdztW2M39esqXLnO18DyxV+UZne6Lce30aWJpNXQurGgVOgze506Evt7g6VqleQu9x/P0KlFUhryIlH+o9d9luPbyMAiw8ks4SkXQrbiXjmSvqtUrXZeGybqmxAuCDGWb2kb3isnFoCWT4zHS3PIHIYQNSsbBg8+uvt7s+2tz6ijjleKEBWNwyMfFduDWX1yHXCg6kjqOwCXMUpOs41ZDYCLiq7gjABAb7QMl1tjeRyVudRakxj5MDRU0HkD/Q0PtMZtTrfCg+MBpbfDSrQjRQr0NZwKQQyR+4E5qRHMp3RkfDAaCzTGR0BonORYzZz1SOBD51iBN0jaSDiqLMFIDwwetPZlPdNZVRg4iZ1GQRqRGGvwBYjJpXpvMWIMoXOMqJ7gswdqJFz1ee2LppehEAPEPm/ewQmjOiecwvObwsyd+Bfda+jbW3u5MJcQoVXAETZUz/lJiSZzM1Vzgp3Ev8BZ2ebUweK0qEAAAAASUVORK5CYII="},"107b":function(t,e,s){"use strict";s("f1f6")},"132f":function(t,e,s){"use strict";s("fb19")},1637:function(t,e){Date.prototype.addDays=function(t){var e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e}},"18e2":function(t,e,s){},"199e":function(t,e,s){},"259b":function(t,e,s){},"291d":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAEnElEQVRoge2ZTWxUVRTHf+dOGQp05s0gJVgxqTGRYGIihkTKDCU1MRIMsYaICxHjko0xwQWJi4KyIookxpWaCH4ksKhggoLGNJZpjcbgR9yYKAL9EK3Y916ZUtrOPS5mxhi+OvfNa8Jifqs7M+9/zvnPufe+N3egQYMGDRo0aIDEHdDv9x4SI08I2qmwAri78tGQwEVF+tXq8UxncCbOvLEYUUWCQW+rKPuAVTXKflHhZW990CuC1ltD3Ub8r7x7JMFHwLrKWxdAjmPsCbF6brK4eBhg8ZLJlWqkHWseB+2m2imVQdvEM9kO/1w9ddRlJOxP5dSYXmC5KMMWXvX+CN6VbZRupVPFBAVvqwj7gXbgkkWeyub9vqi1RDYyMZDptKpfAEmF3qli844Vj/1ZdInxV19rSzI5/b4o3cC0EXk0lfP7o9QTyUhlOn0LLAN9I50Ld0Wd56qYcCD9OsiLwJiWeDizMfjdNY6JkFgqa2KZQm86F75Uz2IVwaZz4S4VjgGtYuQDVfcv2NlIMOhtpbywh6aKzTtEsK4xrkUEOz2dfFZhBNH1/kDmSdcYTkZUkcoWi4j0uK6JW7G8a+yygR4Ao7rPVe9kJDjtraF8n7iQGvEPuyabi9Ro8J4owwirxwcyD7ponYyIkW4AVI7NtcVGQbZRUpHjAMbS7aJ1M4JuKI/sZy46N+wJAJFqrtpwWyPCXQAk+NVF54KgZwGUSq4acdu1lDsBrl5deNFJ58DUTPNIZTiPRiAJ0Lp8bNpRVzOtV8ZmKsMFLjpXIwFAcWJJ1lFXM8VF/8X2XXSuRn4DsLPJ+xx1NaPJBdXYZ110rka+B1ApPeKoq5mS1Y7K8AcXndv2K3IKACtPu+jccpTvH4KcdNE5GUkF/kngb4TVQSG9bk6BI37BW0v5Oe5SKvRPuWjdOrKZq6BvVl4diPKUejNUEUEPVGK/Vc5VO85Pv8XmlteAIaBjopB53lV/M8JCejvIBoWRK8WF+1310X5YFbxtAkeAyZI1HUs7x3+KEqfKRH/L/dYkvgFaQLd7+fBD1xjOHQHI5IOjorwNLE4Y2xv2pZZFiQMQDKaXWpPopWzicBQTENEIQGo2eAH4DrhXF5hPdHDlItcY+ikL1crHwCqBH4vNLTuj1hPZiHQxlZiZ3QKcBzpCGx7RoyRq1asiYTrzjkAn6OhMKbGlbe3oZNR6IhsBaOkqXjS2tBnwQbZMtHmv1KoNBzJ7QbcDQcIkNt2x8Z+hemqJZfscL2S6DPo5gBGzJpUb//lW118ezD5QsvYMgFo2ZTqDL+utoa6OVMnm/T6Fg0CTxc45z0vW7gSaFA7GYQJiPMQe/zrTbkrqdB5lRdqzOf98HPljPY0PCp7T+ZaXD2LL3xRXoP8zV4GuhmshljVyOzAvHQkK6dNePtwQFNKnQfLzkeNa5qsjsU+duYi5IzoK0iZGdwN4+fC6s6nKfyoFhZHr9dGJ1YgghxV2qzUDQcG74TXVVhk4FGfuWI2kskHPxLiHojtA2m50jcKIgUOpbLA3ztyx/6tbRftoCpu8PQLPASgcSs8Ge6SL2fnK2eB24l/0ZZm2lYCmxQAAAABJRU5ErkJggg=="},"2d10":function(t,e,s){"use strict";s("da05")},"300d":function(t,e,s){"use strict";s("d9bd")},"311a":function(t,e,s){"use strict";s("ce0f")},"348b":function(t,e,s){},"374a":function(t,e,s){"use strict";s("199e")},"43a3":function(t,e,s){},"47c7":function(t,e,s){t.exports=s.p+"img/cmuhch_bg3.768b3cac.jpg"},"4a33":function(t,e,s){"use strict";s("6326")},"4ac0":function(t,e,s){},"4f38":function(t,e,s){"use strict";s("66b8")},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},i=[],n={name:"Menu",data:function(){return{}}},r=n,l=(s("107b"),s("2877")),c=Object(l["a"])(r,o,i,!1,null,"0dbf3193",null),d=c.exports,u=(s("d3b7"),s("3ca3"),s("ddb0"),s("b0c0"),s("8c4f")),g=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("b-navbar",{staticClass:"navbar custom-nav fixed-top",attrs:{justified:"",type:"dark",variant:"dark",expand:"lg",light:"",bg:"light"}},[s("b-navbar-brand",[s("img",{staticStyle:{height:"4vw"},attrs:{src:t.home_url,alt:"..."}})]),s("b-navbar-nav",[s("b-nav-item",{attrs:{href:"#"}},[t._v("首頁")]),t._l(t.navbars,(function(e){return s("div",{key:e.id},[s("b-nav-item-dropdown",{attrs:{text:e.text,right:""},on:{click:function(e){e.preventDefault(),t.open=!t.open}}},[s("b-dropdown-item",{attrs:{to:e.router1}},[s("b-avatar",{staticStyle:{width:"1.5rem",height:"1.5rem","margin-bottom":"3pt"},attrs:{variant:"success",icon:e.icon1}}),t._v(" "+t._s(e.name1)+" ")],1),s("b-dropdown-item",{attrs:{to:e.router2}},[s("b-avatar",{staticStyle:{width:"1.5rem",height:"1.5rem","margin-bottom":"3pt"},attrs:{variant:"success",icon:e.icon2}}),t._v(" "+t._s(e.name2)+" ")],1),s("b-dropdown-item",{attrs:{to:e.router3}},[s("b-avatar",{staticStyle:{width:"1.5rem",height:"1.5rem","margin-bottom":"3pt"},attrs:{variant:"success",icon:e.icon3}}),t._v(" "+t._s(e.name3)+" "),s("v-badge",{directives:[{name:"show",rawName:"v-show",value:2==e.id&&0!=t.navBar_in_drafTags,expression:"navbar.id==2 && navBar_in_drafTags!=0"}],attrs:{color:"green",variant:"light",content:t.navBar_in_drafTags}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.id,expression:"navbar.id==1"}]},[s("b-dropdown",{staticClass:"ml-3",staticStyle:{color:"#1976d2"},attrs:{id:"dropdown-1",dropright:"",variant:"#FFFFFF"},scopedSlots:t._u([{key:"button-content",fn:function(){return[s("b-avatar",{staticStyle:{width:"1.5rem",height:"1.5rem","margin-bottom":"3pt",color:"#1976d2"},attrs:{variant:"success",icon:e.icon4}}),t._v(" "+t._s(e.name4)+" ")]},proxy:!0}],null,!0)},[s("b-dropdown-item",{attrs:{to:e.router4}},[t._v(t._s(e.name4))]),s("b-dropdown-item",{attrs:{to:"/gridsForLed"}},[t._v("儲位燈條資料設定")])],1),s("b-dropdown",{staticClass:"ml-3",staticStyle:{color:"#1976d2"},attrs:{id:"dropdown-2",dropright:"",variant:"#FFFFFF"},scopedSlots:t._u([{key:"button-content",fn:function(){return[s("b-avatar",{staticStyle:{width:"1.5rem",height:"1.5rem","margin-bottom":"3pt",color:"#1976d2"},attrs:{variant:"success",icon:e.icon5}}),t._v(" "+t._s(e.name5)+" ")]},proxy:!0}],null,!0)},[s("b-dropdown-item",{attrs:{to:e.router5}},[t._v(t._s(e.name5))]),s("b-dropdown-item",{attrs:{to:"/supAndPrd"}},[t._v("主要產品類別資料")])],1),s("b-dropdown-item",{attrs:{to:e.router6}},[s("b-avatar",{staticStyle:{width:"1.5rem",height:"1.5rem","margin-bottom":"3pt"},attrs:{variant:"success",icon:e.icon6}}),t._v(" "+t._s(e.name6)+" ")],1)],1)],1)],1)}))],2),s("b-navbar-nav",{staticClass:"ml-auto"},[s("em",[t._v(t._s(t.currentUser.name))]),s("b-nav-item-dropdown",{attrs:{right:""}},[s("b-dropdown-item",{attrs:{href:"#"},on:{click:t.logout}},[s("div",[s("b-avatar",{staticStyle:{width:"1.5rem",height:"1.5rem","margin-bottom":"3pt"},attrs:{variant:"danger",icon:"box-arrow-left"}}),t._v(" 登出 ")],1)]),s("b-dropdown-item",{attrs:{href:"#"},on:{click:t.changePassword}},[s("div",[s("b-avatar",{staticStyle:{width:"1.5rem",height:"1.5rem","margin-bottom":"3pt"},attrs:{variant:"primary",icon:"pencil-square"}}),t._v(" 修改密碼 ")],1)])],1)],1)],1),s("ChangePassword",{attrs:{dialog_data:t.openDialog}}),s("div",{style:t.inlineStyle})],1)},m=[],p=s("bc3a"),h=s.n(p),_=(s("fb6a"),{data:function(){return{_host:"",_protocol:"",modalbox_color:!1,temp_css:""}},methods:{initAxios:function(){var t=window.location.host;t=t.slice(0,t.lastIndexOf(":"));var e=window.location.protocol;h.a.defaults.baseURL=e+"//"+t+":6060",h.a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",console.log("from mixin: axios baseURL: ",e+"//"+t+":5050")}}}),v=s("7e0d"),f=s.n(v),b=s("47c7"),k=s.n(b),x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-row",{attrs:{justify:"center"}},[s("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"text-h5"},[t._v("修改密碼")])]),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-text-field",{staticClass:"mb-6 text-teal",attrs:{label:"新密碼*",required:"","prepend-icon":"mdi-lock","append-icon":t.showPassword?"mdi-eye":"mdi-eye-off",type:t.showPassword?"text":"password"},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),s("small",{staticClass:"errormsg",domProps:{textContent:t._s(t.passwordErrMsg)}})],1),s("v-col",{staticStyle:{"margin-top":"35px"},attrs:{cols:"12",md:"6",align:"center"}},[s("v-progress-linear",{attrs:{color:t.score.color,value:t.score.value}})],1),s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"確認密碼*",type:t.showPassword?"text":"password",required:"","prepend-icon":"mdi-account-check",rules:[t.passwordConfirmationRule]},model:{value:t.confirmPpassword,callback:function(e){t.confirmPpassword=e},expression:"confirmPpassword"}})],1)],1)],1),s("small",[t._v("*indicates required field")])],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.checkDataForSaveButton},on:{click:t.save}},[t._v("確定")])],1)],1)],1)],1)],1)},I=[],y=(s("ac1f"),s("841c"),s("9cdd")),T={name:"ChangePassword",mixins:[_],computed:{passwordConfirmationRule:function(){var t=this;return function(){return t.newPassword===t.confirmPpassword||"密碼不相同!"}},score:function(){var t=Object(y["a"])(this.newPassword);switch(t.score){case 4:return{color:"light-blue",value:100};case 3:return{color:"light-green",value:75};case 2:return{color:"yellow",value:50};case 1:return{color:"orange",value:25};default:return{color:"red",value:0}}},checkDataForSaveButton:function(){return!this.newPassword||!this.confirmPpassword||""!=this.passwordErrMsg}},props:["dialog_data"],watch:{dialog_data:function(t){t&&(this.dialog=!0)},newPassword:function(t){var e=/^(?=.*\d)(?=.*[a-z])[0-9a-zA-Z]{8,12}$/;this.passwordErrMsg="";var s=t.search(e);console.log("password regular: ",s),-1!=s?(this.changeOK=!0,this.passwordErrMsg=""):(this.changeOK=!1,this.passwordErrMsg="資料格式或資料長度錯誤!")}},created:function(){},mounted:function(){},data:function(){return{currentUser:{},showPassword:!1,newPassword:"",confirmPpassword:"",changeOK:!1,passwordErrMsg:"",dialog:!1}},methods:{save:function(){this.dialog=!1,this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),console.log("click, save()..., currentUser ID: ",this.currentUser.empID);var t="/updatePassword",e={newPassword:this.newPassword,empID:this.currentUser.empID};h.a.post(t,e).then((function(t){console.log("update password is ok!",t.data.status)})).catch((function(t){console.error(t)}))}}},D=T,O=(s("9f85"),Object(l["a"])(D,x,I,!1,null,"567fca1e",null)),S=O.exports,w=s("6976"),j={name:"Navbar",directives:{"b-visible":w["a"]},mixins:[_],components:{ChangePassword:S},computed:{inlineStyle:function(){return{backgroundImage:"url("+this.main_pic_url+")",position:"fixed",height:"100vh",width:"100vw",top:"16vh"}}},watch:{load_SingleTable_ok:function(t){t&&(this.count=this.temp_count,this.navBar_in_drafTags=this.temp_count,console.log("navbar, totalTags: ",this.navBar_in_drafTags),this.load_SingleTable_ok=!1)}},created:function(){this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),console.log("current user:",this.currentUser),this.load_SingleTable_ok=!1,this.initAxios(),this.listStockInTagPrintCount()},mounted:function(){var t=this;this.$root.$on("bv::dropdown::show",(function(e){"dropdown-1"===e.componentId&&(t.isDropdown1Visible=!0),"dropdown-2"===e.componentId&&(t.isDropdown2Visible=!0)})),this.$root.$on("bv::dropdown::hide",(function(e){"dropdown-1"===e.componentId&&(t.isDropdown1Visible=!1),t.isDropdown1Visible&&e.preventDefault(),"dropdown-2"===e.componentId&&(t.isDropdown2Visible=!1),t.isDropdown2Visible&&e.preventDefault()}))},data:function(){return{openDialog:!1,open:!1,navBar_in_drafTags:0,subMenu:!1,isDropdown1Visible:!1,isDropdown2Visible:!1,home_url:f.a,main_pic_url:k.a,currentUser:{},navbars:[{id:1,text:"基本資料維護",icon1:"person-plus",name1:"人員資料",router1:"/emp",icon2:"person-lines-fill",name2:"人員權限資料",router2:"/perm",icon3:"clipboard-data",name3:"試劑資料",router3:"/reag",icon4:"bookshelf",name4:"儲位設定",router4:"/grid",icon5:"briefcase",name5:"供應商資料",router5:"/sup",icon6:"people",name6:"組別資料",router6:"/dep"},{id:2,text:"入庫管理",icon1:"bookmark-plus",name1:"入庫標籤資料",router1:"/inTag",icon2:"bag-plus",name2:"入庫標籤列印",router2:"/inTagPrint",icon3:"cart-plus",name3:"入庫作業",router3:"/stockIn"},{id:3,text:"出庫管理",icon1:"bookmark-dash",name1:"出庫標籤資料",router1:"/outTag",icon2:"bag-dash",name2:"出庫標籤列印",router2:"/outTagPrint",icon3:"cart-dash",name3:"出庫作業",router3:"/app3"},{id:4,text:"物料盤點",icon1:"book",name1:"領用記錄查詢",router1:"/reqRec",icon2:"calendar2-check",name2:"庫存紀錄查詢",router2:"/stockRec",icon3:"upc-scan",name3:"盤點作業",router3:"/invent"}],count:0,temp_count:0,load_SingleTable_ok:!1}},methods:{listStockInTagPrintCount:function(){var t=this,e="/listStockInTagPrintCount";console.log("listStockInTagPrintCount, Axios get data..."),h.a.get(e).then((function(e){t.temp_count=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},changePassword:function(){this.openDialog=!0},logout:function(){console.log("logout..."),this.updateSetting();var t=!1;this.setAuthenticated(t),this.removeLoginUser(),"/"!=this.$route.path&&this.$router.push("/")},updateSetting:function(){console.log("hello setting...");var t=JSON.parse(localStorage.getItem("loginedUser")),e="/updateSetting",s={setting:t.setting_items_per_page,empID:t.empID};h.a.post(e,s).then((function(t){console.log("update user's setting ok",t.data.status)})).catch((function(t){console.error(t)}))},removeLoginUser:function(){localStorage.removeItem("loginedUser")},setAuthenticated:function(t){localStorage.setItem("Authenticated",t)},handleHover:function(t){console.log("nav-dropdown key press: ",t)}}},E=j,C=(s("c575"),Object(l["a"])(E,g,m,!1,null,"17cf7f42",null)),P=C.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-jumbotron",{attrs:{header:"App1"}})],1)},N=[],U={name:"App1",data:function(){return{}}},F=U,R=Object(l["a"])(F,A,N,!1,null,null,null),M=R.exports,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-jumbotron",{attrs:{header:"App2"}})],1)},L=[],B={name:"App2",data:function(){return{}}},V=B,$=Object(l["a"])(V,K,L,!1,null,null,null),z=$.exports,G=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-jumbotron",{attrs:{header:"App3"}})],1)},J=[],q={name:"App3",data:function(){return{}}},Q=q,Z=Object(l["a"])(Q,G,J,!1,null,null,null),Y=Z.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("b-jumbotron",{attrs:{header:"App4"}})],1)},H=[],X={name:"App4",data:function(){return{}}},tt=X,et=Object(l["a"])(tt,W,H,!1,null,null,null),st=et.exports,at=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("div",{staticClass:"container",class:{"sign-up-active":t.signUp}},[s("div",{staticClass:"overlay-container"},[s("div",{staticClass:"overlay"},[s("div",{staticClass:"overlay-left"},[s("h2",[s("img",{staticStyle:{height:"4vw","margin-bottom":"10px"},attrs:{src:t.home_url,alt:"..."}}),t._v(" "+t._s("冷藏藥倉系統")+" ")]),s("button",{staticClass:"invert",attrs:{id:"signIn"},on:{click:function(e){t.signUp=!t.signUp}}},[t._v("登入")])]),s("div",{staticClass:"overlay-right"},[s("h2",[s("img",{staticStyle:{height:"4vw","margin-bottom":"10px"},attrs:{src:t.home_url,alt:"..."}}),t._v(" "+t._s("冷藏藥倉系統")+" ")]),s("button",{staticClass:"invert",attrs:{id:"signUp"},on:{click:function(e){t.signUp=!t.signUp}}},[t._v("註冊")])])])]),s("div",{staticClass:"sign-up"},[s("h3",[t._v(t._s("註冊"))]),s("v-text-field",{staticClass:"text-teal",attrs:{id:"registerEmpID",label:"員工編號",name:"EmpID","prepend-icon":"mdi-account",type:"text",required:""},model:{value:t.registerUser.empID,callback:function(e){t.$set(t.registerUser,"empID",e)},expression:"registerUser.empID"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.empIDErrMsg)}}),s("v-text-field",{staticClass:"text-teal",attrs:{id:"registerName",label:"員工姓名",name:"Name","prepend-icon":"mdi-account-edit",type:"text",required:""},model:{value:t.registerUser.name,callback:function(e){t.$set(t.registerUser,"name",e)},expression:"registerUser.name"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.nameErrMsg)}}),s("v-select",{staticClass:"text-teal",attrs:{items:t.desserts,label:"組別",name:"Dep","prepend-icon":"mdi-account-group",required:""},model:{value:t.registerUser.dep,callback:function(e){t.$set(t.registerUser,"dep",e)},expression:"registerUser.dep"}}),s("v-text-field",{staticClass:"text-teal",attrs:{id:"registerPassword",label:"密碼",name:"Password","prepend-icon":"mdi-lock",required:"","append-icon":t.eyeShow1?"mdi-eye-off":"mdi-eye",type:t.eyeShow1?"password":"text"},on:{"click:append":function(){return t.eyeShow1=!t.eyeShow1}},model:{value:t.registerUser.password,callback:function(e){t.$set(t.registerUser,"password",e)},expression:"registerUser.password"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.passwordErrMsg)}}),s("v-text-field",{staticClass:"text-teal",attrs:{id:"registerConfirmPassword",label:"確認密碼",name:"Confirm","prepend-icon":"mdi-account-check",required:"",type:t.eyeShow1?"password":"text",rules:[t.passwordConfirmationRule]},model:{value:t.registerUser.confirmPassword,callback:function(e){t.$set(t.registerUser,"confirmPassword",e)},expression:"registerUser.confirmPassword"}}),s("Toaster",{directives:[{name:"show",rawName:"v-show",value:t.tosterRegOK,expression:"tosterRegOK"}],attrs:{Title:t.tosterTitlt,Type:t.tosterType,Body:t.tosterBody,Timeout:t.tosterTimeout},on:{removeToaster:t.onRemoveToaster}}),s("button",{on:{click:t.register}},[t._v("註冊")])],1),s("div",{staticClass:"sign-in"},[s("h3",[t._v(t._s("登入"))]),s("v-text-field",{staticClass:"text-teal",attrs:{id:"loginEmpID",label:"員工編號",name:"EmpID","prepend-icon":"mdi-account",type:"text"},model:{value:t.loginEmpID,callback:function(e){t.loginEmpID=e},expression:"loginEmpID"}}),s("v-text-field",{staticClass:"text-teal",attrs:{id:"loginPassword",label:"密碼",name:"Password","prepend-icon":"mdi-lock","append-icon":t.eyeShow?"mdi-eye-off":"mdi-eye",type:t.eyeShow?"password":"text"},on:{"click:append":function(){return t.eyeShow=!t.eyeShow},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.signin.apply(null,arguments)}},model:{value:t.loginPassword,callback:function(e){t.loginPassword=e},expression:"loginPassword"}}),s("Toaster",{directives:[{name:"show",rawName:"v-show",value:t.tosterOK,expression:"tosterOK"}],attrs:{Title:t.tosterTitlt,Type:t.tosterType,Body:t.tosterBody,Timeout:t.tosterTimeout},on:{removeToaster:t.onRemoveToaster}}),s("button",{on:{click:t.userLogin}},[t._v("登入")])],1)])])},ot=[],it=(s("d81d"),s("07ac"),s("e9c4"),s("b6d6")),nt=s.n(it),rt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{attrs:{id:"toster"}},[s("div",{staticClass:"wrap"},[s("div",{staticClass:"block"},[t._v(" "+t._s(t.content.body)+" "),s("v-btn",{attrs:{icon:"",color:t.icon_color},on:{click:t.remove}},[s("v-icon",{attrs:{dark:""}},[t._v("mdi-close-circle")])],1)],1)])])},lt=[],ct={name:"Toaster",props:["Title","Type","Body","Timeout"],mounted:function(){},data:function(){return{timer:null,icon_color:"primary",content:{title:"",type:"",body:"",timeout:3},defaultContent:{title:"Hello",type:"",body:"",timeout:3}}},watch:{"content.type":function(){console.log("tost type: ",this.content.type,"info"==this.content.type);var t="info"==this.content.type?"#008184":"#f5c0d0",e="info"==this.content.type?"#ffffff":"#000000",s="info"==this.content.type?"#ffffff":"#adadad";document.documentElement.style.setProperty("--bg",t),document.documentElement.style.setProperty("--txt",e),this.icon_color=s}},created:function(){this.content.title=this.Title,this.content.type=this.Type,this.content.body=this.Body,this.content.timeout=parseInt(this.Timeout)},beforeDestroy:function(){clearInterval(this.timer)},methods:{initTimer:function(){this.timer=setInterval(this.countdown,1e3)},countdown:function(){this.content.timeout--,0==this.content.timeout&&(clearInterval(this.timer),this.remove())},remove:function(){this.content=Object.assign({},this.defaultContent),this.$emit("removeToaster",!1)}}},dt=ct,ut=(s("2d10"),Object(l["a"])(dt,rt,lt,!1,null,"03217be4",null)),gt=ut.exports,mt={name:"LoginForm",mixins:[_],components:{Toaster:gt},data:function(){return{home_url:nt.a,signUp:!1,tosterTitlt:"Hello",tosterType:"error",tosterBody:"資料錯誤或空白, 請重新輸入...",tosterTimeout:"3",loginEmpID:null,loginPassword:null,loginOK:!1,registerOK:!1,tosterOK:!1,tosterRegOK:!1,empIDErrMsg:"",nameErrMsg:"",passwordErrMsg:"",clickLoginErrMsg:"",clickRegisterErrMsg:"",password_violate_count:0,eyeShow:!0,eyeShow1:!0,eyeShow2:!0,registerUser:{empID:null,name:null,dep:null,password:null,confirmPassword:null},desserts:[],temp_desserts:[],loginedUser:{emp_id:null,emp_name:null,emp_dep:0,emp_dep_name:null,emp_perm:0,emp_perm_name:null,password:""},rules:{required:function(t){return!!t||"Required."}},load_SingleTable_ok:!1}},created:function(){this.initAxios(),this.initialize()},beforeCreate:function(){},beforeDestroy:function(){},computed:{passwordConfirmationRule:function(){var t=this;return function(){return t.registerUser.password===t.registerUser.confirmPassword||"密碼不相同!"}},checkRegisterUserForSaveButton:function(){return!(this.registerUser.emp_id&&this.registerUser.emp_name&&this.registerUser.dep&&this.registerUser.password&&this.registerUser.confirmPassword&&""==this.empIDErrMsg&&""==this.nameErrMsg&&""==this.passwordErrMsg&&this.registerUser.password===this.registerUser.confirmPassword)}},watch:{loginOK:function(t){this.signin()},load_SingleTable_ok:function(t){t&&(this.desserts=this.temp_desserts.map((function(t){return Object.values(t)[0]})))},"registerUser.empID":function(t){var e=/^[A,D,N,T][0-9]{5}$/;console.log("1. user: ",t),this.empIDErrMsg="";var s=t.search(e);console.log("2. user: ",t),this.empIDErrMsg=-1!=s?"":"員工編號資料格式錯誤!"},"registerUser.name":function(){var t=/^[\u4e00-\u9fa5_a-zA-Z]+$/;this.nameErrMsg="";var e=this.registerUser.name.search(t),s=this.registerUser.name.length;console.log("result, len: ",e,s),this.nameErrMsg="",(-1==e||s>10)&&(this.nameErrMsg="資料格式錯誤或資料長度太長!")},"registerUser.password":function(){var t=/^(?=.*\d)(?=.*[a-z])[0-9a-zA-Z]{8,12}$/;this.passwordErrMsg="";var e=this.registerUser.password.search(t);console.log("password regular: ",e),this.passwordErrMsg=-1!=e?"":"資料格式或資料長度錯誤!"}},methods:{onRemoveToaster:function(t){this.tosterOK=!1,this.tosterRegOK=!1},initialize:function(){var t=this,e="/listDepartments";h.a.get(e).then((function(e){t.temp_desserts=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length,e.data.outputs),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},register:function(){var t=this;console.log("---click_register---"),this.signUp=!0;var e="/register",s={emp_id:this.registerUser.empID,emp_name:this.registerUser.name,password:this.registerUser.password,dep:this.registerUser.dep};h.a.post(e,s).then((function(e){console.log("register status: ",e.data.status),t.registerOK=e.data.status,t.registerOK?(t.tosterRegOK=!1,t.registerUser={empID:"",name:"",dep:"",password:"",confirmPassword:""},t.signUp=!1):(t.tosterRegOK=!0,t.signUp=!0)})).catch((function(e){console.error(e),t.registerOK=!1}))},userLogin:function(){var t=this;console.log("---click_login---");var e="/login",s={password:this.loginPassword,empID:this.loginEmpID};this.clickLoginErrMsg="",h.a.post(e,s).then((function(e){console.log("login, post ok",e.data),t.loginOK=e.data.status,t.loginOK?(t.tosterOK=!1,t.loginedUser=Object.assign({},e.data.user)):t.tosterOK=!0})).catch((function(e){console.error(e),t.loginOK=!1}))},signin:function(){console.log("---click_signin---"),this.removeLoginUser();var t=!0;this.setAuthenticated(t),this.setLoginUser(),this.$router.push("/navbar")},removeLoginUser:function(){localStorage.removeItem("loginedUser")},setLoginUser:function(){localStorage.setItem("loginedUser",JSON.stringify(this.loginedUser)),localStorage.setItem("totalTags",0),console.log("---click_signin---",this.loginedUser)},setAuthenticated:function(t){localStorage.setItem("Authenticated",t)}}},pt=mt,ht=(s("bcaa"),Object(l["a"])(pt,at,ot,!1,null,"e9e9ae5a",null)),_t=ht.exports,vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",{attrs:{fluid:""}},[t.currentUser.perm>=1?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{staticClass:"pa-md-4  mt-5 mx-lg-auto",attrs:{width:"50vw"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts,options:t.pagination,"footer-props":{itemsPerPageText:"每頁的資料筆數"}},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:""}},[s("v-toolbar-title",[t._v("員工資料")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-dialog",{attrs:{"max-width":"500px","content-class":t.temp_css},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[s("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),a),[s("v-icon",{attrs:{left:"",dark:""}},[t._v("mdi-table-plus")]),t._v(" 新增資料 ")],1)]}}],null,!1,1287677061),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"員工編號","prepend-icon":"mdi-account",readonly:"編輯資料"===t.formTitle},on:{focus:t.fieldFocus},model:{value:t.editedItem.emp_id,callback:function(e){t.$set(t.editedItem,"emp_id",e)},expression:"editedItem.emp_id"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.IDErrMsg)}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{label:"姓名","prepend-icon":"mdi-account-edit"},on:{focus:t.fieldFocus},model:{value:t.editedItem.emp_name,callback:function(e){t.$set(t.editedItem,"emp_name",e)},expression:"editedItem.emp_name"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{items:t.departments,label:"組別","prepend-icon":"mdi-account-group"},on:{focus:t.fieldFocus},model:{value:t.editedItem.emp_dep,callback:function(e){t.$set(t.editedItem,"emp_dep",e)},expression:"editedItem.emp_dep"}})],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.checkDataForSaveButton},on:{click:t.save}},[t._v("確定")]),s("v-tooltip",{attrs:{bottom:"","position-x":t.toster_pos_x,"position-y":t.toster_pos_y,color:"error"},model:{value:t.tosterOK,callback:function(e){t.tosterOK=e},expression:"tosterOK"}},[s("span",[t._v("員工編號重複!")])])],1)],1)],1),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[s("v-card",[s("v-card-title",{staticClass:"text-h5"},[t._v("確定刪除這筆資料?")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("刪除")]),s("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var a=e.item;return[s("v-icon",{staticClass:"mr-2",staticStyle:{color:"blue"},attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),s("v-icon",{staticStyle:{color:"red"},attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!0)})],1)],1):s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"500"},model:{value:t.permDialog,callback:function(e){t.permDialog=e},expression:"permDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("錯誤訊息!")]),s("v-card-text",[s("div",{staticClass:"text-h4 pa-12"},[t._v("權限不足...")])]),s("v-card-actions",{staticClass:"justify-end"},[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.permCloseFun}},[t._v(" 取消 ")])],1)],1)],1)],1)],1)],1)},ft=[],bt=(s("a434"),{name:"Employer",mixins:[_],mounted:function(){var t=this;window.onpopstate=function(){console.log("press back button, good bye...");var e=JSON.parse(localStorage.getItem("loginedUser"));e.setting_items_per_page=t.pagination.itemsPerPage,localStorage.setItem("loginedUser",JSON.stringify(e))}},data:function(){return{currentUser:{},permDialog:!1,dialog:!1,dialogDelete:!1,pagination:{},tosterOK:!1,toster_pos_x:1e3,toster_pos_y:400,toster_delay:3,IDErrMsg:"",nameErrMsg:"",headers:[{text:"員工編號",sortable:!0,value:"emp_id",width:"20%",align:"start"},{text:"姓名",sortable:!1,value:"emp_name",width:"30%"},{text:"組別",sortable:!0,value:"emp_dep",width:"30%"},{text:"Actions",sortable:!1,value:"actions",width:"10%"}],desserts:[],temp_desserts:[],departments:[],temp_departments:[],editedIndex:-1,editedItem:{emp_id:"",emp_name:"",emp_dep:""},defaultItem:{emp_id:"",emp_name:"",emp_dep:""},load_SingleTable_ok:!1,load_2thTable_ok:!1}},computed:{formTitle:function(){return-1===this.editedIndex?"新增資料":"編輯資料"},checkDataForSaveButton:function(){return!(this.editedItem.emp_id&&this.editedItem.emp_name&&this.editedItem.emp_dep&&""==this.IDErrMsg&&""==this.nameErrMsg)}},watch:{dialog:function(t){!t||this.fieldFocus(),t||this.close()},dialogDelete:function(t){t||this.closeDelete()},"editedItem.emp_id":function(){var t=/^[A,D,N,T][0-9]{5}$/;this.IDErrMsg="";var e=this.editedItem.emp_id.search(t),s=this.editedItem.emp_id.length;this.IDErrMsg=-1!=e||0==s?"":"員工編號資料格式錯誤!"},"editedItem.emp_name":function(){var t=/^[\u4e00-\u9fa5_a-zA-Z]+$/;this.nameErrMsg="";var e=this.editedItem.emp_name.search(t),s=this.editedItem.emp_name.length;console.log("result, len: ",e,s),this.nameErrMsg="",(-1==e||s>10)&&(this.nameErrMsg="資料格式錯誤或資料長度太長!")},load_2thTable_ok:function(t){t&&(this.departments=Object.assign([],this.temp_departments),this.load_2thTable_ok=!1)},load_SingleTable_ok:function(t){t&&(this.desserts=Object.assign([],this.temp_desserts),this.load_SingleTable_ok=!1,this.listDepartments())}},created:function(){this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),0==this.currentUser.perm&&(this.permDialog=!0),this.pagination.itemsPerPage=this.currentUser.setting_items_per_page,this.load_SingleTable_ok=!1,this.initAxios(),this.listUsers()},methods:{initialize:function(){this.load_SingleTable_ok=!1,this.listUsers()},listUsers:function(){var t=this,e="/listUsers";console.log("listUsers, Axios get data..."),h.a.get(e).then((function(e){t.temp_desserts=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},listDepartments:function(){var t=this,e="/listDepartments";h.a.get(e).then((function(e){t.temp_departments=e.data.outputs.map((function(t){return Object.values(t)[0]})),console.log("GET ok, total records:",e.data.outputs.length),t.load_2thTable_ok=!0})).catch((function(e){console.error(e),t.load_2thTable_ok=!1}))},fieldFocus:function(){this.tosterOK=!1,this.IDErrMsg="",this.nameErrMsg=""},editItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm:function(){this.removeUser(this.editedItem.emp_id),this.tosterOK||(this.desserts.splice(this.editedIndex,1),console.log("deleteItem: ",this.editedItem),this.closeDelete())},close:function(){var t=this;this.dialog=!1,this.IDErrMsg="",this.nameErrMsg="",this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},removeUser:function(t){var e=this,s="/removeUser",a={ID:t};h.a.post(s,a).then((function(t){console.log("remove user status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},save:function(){console.log("click save button, editedIndex: ",this.editedIndex),-1==this.editedIndex?(this.createUser(this.editedItem),this.tosterOK||(this.desserts.push(this.editedItem),this.close())):(this.updateUser(this.editedItem),this.tosterOK||(Object.assign(this.desserts[this.editedIndex],this.editedItem),this.close()))},updateUser:function(t){var e=this;console.log("---click update_user data---",t);var s="/updateUser",a={emp_id:t.emp_id,emp_name:t.emp_name,dep:t.emp_dep};h.a.post(s,a).then((function(t){console.log("update user data status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t)}))},createUser:function(t){var e=this;console.log("---click create_user data---");var s="a12345678",a="/createUser",o={emp_id:t.emp_id,emp_name:t.emp_name,password:s,dep:t.emp_dep};h.a.post(a,o).then((function(t){console.log("save user data status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t)}))},permCloseFun:function(){this.permDialog=!1,console.log("press permission Close Button..."),this.$router.push("/navbar")}}}),kt=bt,xt=(s("de40"),Object(l["a"])(kt,vt,ft,!1,null,"427fba80",null)),It=xt.exports,yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",{attrs:{fluid:""}},[t.currentUser.perm>=1?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{staticClass:"pa-md-4  mt-5 mx-lg-auto",attrs:{width:"100vw"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts,"item-class":t.setRowStyleForRragent,options:t.pagination,"footer-props":{itemsPerPageText:"每頁的資料筆數"}},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:""}},[s("v-toolbar-title",[t._v("試劑資料")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-dialog",{attrs:{"max-width":"800px","content-class":t.temp_css},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[s("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),a),[s("v-icon",{attrs:{left:"",dark:""}},[t._v("mdi-table-plus")]),t._v(" 新增資料 ")],1)]}}],null,!1,1287677061),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-text-field",{attrs:{label:"資材碼",readonly:"編輯資料"===t.formTitle},on:{focus:t.fieldFocus},model:{value:t.editedItem.reag_id,callback:function(e){t.$set(t.editedItem,"reag_id",e)},expression:"editedItem.reag_id"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.IDErrMsg)}})],1),s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-text-field",{attrs:{label:"品名"},on:{focus:t.fieldFocus},model:{value:t.editedItem.reag_name,callback:function(e){t.$set(t.editedItem,"reag_name",e)},expression:"editedItem.reag_name"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.nameErrMsg)}})],1),s("v-col",{staticClass:"d-flex",attrs:{cols:"12",md:"3"}},[s("v-select",{staticStyle:{position:"relative",top:"10px"},attrs:{items:t.products,label:"類別",dense:"",outlined:""},on:{blur:function(e){return t.listSuppliersByProc()}},model:{value:t.product_item,callback:function(e){t.product_item=e},expression:"product_item"}})],1),s("v-col",{attrs:{cols:"12",md:"3"}},["其他"!==t.reag_catalog.selected_item?s("div",[s("v-select",{attrs:{items:t.reagents,attach:"",label:"資材組別",required:""},model:{value:t.reag_catalog.selected_item,callback:function(e){t.$set(t.reag_catalog,"selected_item",e)},expression:"reag_catalog.selected_item"}})],1):s("div",[s("v-text-field",{attrs:{autofocus:"",label:"資材組別"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.resetQueue.apply(null,arguments)}},model:{value:t.newItem,callback:function(e){t.newItem=e},expression:"newItem"}})],1)])],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"2"}},["其他"!==t.editedItem.reag_In_unit?s("div",[s("v-select",{attrs:{items:t.InUnits,label:"入庫單位"},on:{focus:t.fieldFocus},model:{value:t.editedItem.reag_In_unit,callback:function(e){t.$set(t.editedItem,"reag_In_unit",e)},expression:"editedItem.reag_In_unit"}})],1):s("div",[s("v-text-field",{attrs:{autofocus:"",label:"入庫單位"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.resetQueueIn.apply(null,arguments)}},model:{value:t.newItemIn,callback:function(e){t.newItemIn=e},expression:"newItemIn"}})],1)]),s("v-col",{attrs:{cols:"12",md:"2"}},["其他"!==t.editedItem.reag_Out_unit?s("div",[s("v-select",{attrs:{items:t.OutUnits,label:"出庫單位"},on:{focus:t.fieldFocus},model:{value:t.editedItem.reag_Out_unit,callback:function(e){t.$set(t.editedItem,"reag_Out_unit",e)},expression:"editedItem.reag_Out_unit"}})],1):s("div",[s("v-text-field",{attrs:{autofocus:"",label:"出庫單位"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.resetQueueOut.apply(null,arguments)}},model:{value:t.newItemOut,callback:function(e){t.newItemOut=e},expression:"newItemOut"}})],1)]),s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-text-field",{attrs:{label:"比例"},on:{focus:t.fieldFocus},model:{value:t.editedItem.reag_scale,callback:function(e){t.$set(t.editedItem,"reag_scale",e)},expression:"editedItem.reag_scale"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.scaleErrMsg)}})],1),s("v-col",{attrs:{cols:"12",md:"5"}},[s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-text-field",t._g({attrs:{label:"效期","prepend-icon":"event",readonly:"",value:t.fromDateDisp},model:{value:t.editedItem.reag_period,callback:function(e){t.$set(t.editedItem,"reag_period",e)},expression:"editedItem.reag_period"}},a))]}}],null,!1,2800201650),model:{value:t.fromDateMenu,callback:function(e){t.fromDateMenu=e},expression:"fromDateMenu"}},[s("v-date-picker",{attrs:{locale:"zh-TW",min:t.minDate,max:t.maxDate,"no-title":""},on:{input:function(e){t.fromDateMenu=!1}},model:{value:t.fromDateVal,callback:function(e){t.fromDateVal=e},expression:"fromDateVal"}})],1)],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"2"}},[s("v-text-field",{attrs:{label:"安全存量"},on:{focus:t.fieldFocus},model:{value:t.editedItem.reag_stock,callback:function(e){t.$set(t.editedItem,"reag_stock",e)},expression:"editedItem.reag_stock"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.nameErrMsg)}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{staticStyle:{position:"relative",top:"10px"},attrs:{items:["室溫","2~8度C","-20度C"],label:"保存溫度",dense:"",outlined:""},on:{focus:t.fieldFocus},model:{value:t.editedItem.reag_temp,callback:function(e){t.$set(t.editedItem,"reag_temp",e)},expression:"editedItem.reag_temp"}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-select",{staticStyle:{position:"relative",top:"10px"},attrs:{items:t.suppliers,label:"供應商",dense:"",outlined:"",disabled:t.selectProduct},on:{focus:t.fieldFocus},model:{value:t.editedItem.reag_supplier,callback:function(e){t.$set(t.editedItem,"reag_supplier",e)},expression:"editedItem.reag_supplier"}})],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.checkDataForSaveButton},on:{click:t.save}},[t._v("確定")]),s("v-tooltip",{attrs:{bottom:"","position-x":t.toster_pos_x,"position-y":t.toster_pos_y,color:"error"},model:{value:t.tosterOK,callback:function(e){t.tosterOK=e},expression:"tosterOK"}},[s("span",[t._v("資材碼重複!")])])],1)],1)],1),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[s("v-card",[s("v-card-title",{staticClass:"text-h5"},[t._v("確定刪除這筆資料?")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("刪除")]),s("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var a=e.item;return[s("v-icon",{staticClass:"mr-2",staticStyle:{color:"blue"},attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),s("v-icon",{staticStyle:{color:"red"},attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!0)})],1)],1):s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"500"},model:{value:t.permDialog,callback:function(e){t.permDialog=e},expression:"permDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("錯誤訊息!")]),s("v-card-text",[s("div",{staticClass:"text-h4 pa-12"},[t._v("使用這項功能, 請通知管理人員...")])]),s("v-card-actions",{staticClass:"justify-end"},[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.permCloseFun}},[t._v(" 取消 ")])],1)],1)],1)],1)],1)],1)},Tt=[],Dt=s("2909"),Ot=(s("5319"),s("25f0"),s("6062"),{name:"Reagent",mixins:[_],mounted:function(){var t=this;window.onpopstate=function(){console.log("press back button, good bye...");var e=JSON.parse(localStorage.getItem("loginedUser"));e.setting_items_per_page=t.pagination.itemsPerPage,localStorage.setItem("loginedUser",JSON.stringify(e))}},data:function(){return{currentUser:{},permDialog:!1,fromDateMenu:!1,fromDateVal:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),minDate:"2012-07-01",maxDate:"2042-06-30",dialog:!1,dialogDelete:!1,pagination:{},tosterOK:!1,toster_pos_x:1e3,toster_pos_y:400,toster_delay:3,IDErrMsg:"",nameErrMsg:"",scaleErrMsg:"",stockErrMsg:"",headers:[{text:"資材碼",sortable:!0,value:"reag_id",width:"8%"},{text:"品名",sortable:!1,value:"reag_name",width:"12%"},{text:"資材類別",sortable:!0,value:"reag_product",width:"9%"},{text:"資材組別",sortable:!0,value:"reag_catalog",width:"9%"},{text:"入庫單位",sortable:!1,value:"reag_In_unit",width:"8%"},{text:"出庫單位",sortable:!1,value:"reag_Out_unit",width:"8%"},{text:"比例",sortable:!1,value:"reag_scale",width:"5%"},{text:"效期",sortable:!0,value:"reag_period",width:"8%"},{text:"安全存量",sortable:!1,value:"reag_stock",width:"8%"},{text:"保存溫度",sortable:!1,value:"reag_temp",width:"8%"},{text:"供應商",sortable:!0,value:"reag_supplier",width:"10%"},{text:"Actions",sortable:!1,value:"actions",width:"10%"}],desserts:[],temp_desserts:[],suppliers:[],temp_suppliers:[],products:[],temp_products:[],product_item:"",selectProduct:!0,editedIndex:-1,editedItem:{reag_id:"",reag_name:"",reag_product:"",reag_In_unit:"",reag_Out_unit:"",reag_scale:"0",reag_period:"",reag_stock:"0",reag_temp:"",reag_catalog:"",reag_supplier:""},defaultItem:{reag_id:"",reag_name:"",reag_product:"",reag_In_unit:"",reag_Out_unit:"",reag_scale:"0",reag_period:"",reag_stock:"0",reag_temp:"",reag_catalog:"",reag_supplier:""},reag_catalog:{selected_item:""},newItemIn:"",newItemOut:"",InUnits:["盒","包","袋","瓶","個","條","其他"],OutUnits:["盒","包","袋","瓶","個","條","其他"],newItem:"",reagents:[],load_SingleTable_ok:!1,load_2thTable_ok:!1,load_3thTable_ok:!1,load_4thTable_ok:!1}},computed:{formTitle:function(){return-1===this.editedIndex?"新增資料":"編輯資料"},fromDateDisp:function(){if(""!=this.fromDateVal){var t=this.fromDateVal.substring(0,4),e=this.fromDateVal.substring(5,this.fromDateVal.length);e=e.replace("-","/");var s=parseInt(t);s-=1911,t=s.toString(),this.editedItem.reag_period=t+"/"+e}return this.fromDateVal},checkDataForSaveButton:function(){return!(this.editedItem.reag_id&&this.editedItem.reag_name&&this.editedItem.reag_In_unit&&this.editedItem.reag_Out_unit&&this.editedItem.reag_scale&&this.editedItem.reag_period&&this.editedItem.reag_stock&&this.editedItem.reag_temp&&this.editedItem.reag_supplier&&""==this.IDErrMsg&&""==this.nameErrMsg&&""==this.scaleErrMsg)}},watch:{dialog:function(t){!t||this.fieldFocus(),t||this.close()},dialogDelete:function(t){t||this.closeDelete()},"editedItem.reag_id":function(){var t=/^[A-Za-z0-9.]{1,9}$/;this.IDErrMsg="";var e=this.editedItem.reag_id.search(t);console.log("reg: ",e),this.IDErrMsg=-1!=e?"":"資料格式錯誤!"},"editedItem.reag_name":function(){var t=/^\w{1,50}$/;this.nameErrMsg="";var e=this.editedItem.reag_name.search(t),s=this.editedItem.reag_name.length;console.log("reg: ",e,s),this.nameErrMsg=-1!=e?"":"資料格式錯誤!"},"editedItem.reag_scale":function(){var t=/^[0-9]+(.[0-9]{0,2})?$/;this.scaleErrMsg="";var e=this.editedItem.reag_scale.toString().search(t);console.log("reg: ",e),this.scaleErrMsg=-1!=e?"":"資料格式錯誤!"},"editedItem.reag_stock":function(){var t=/^[0-9]+(.[0-9]{0,2})?$/;this.stockErrMsg="";var e=this.editedItem.reag_stock.toString().search(t);console.log("reg: ",e),this.stockErrMsg=-1!=e?"":"資料格式錯誤!"},load_4thTable_ok:function(t){t&&(this.suppliers=Object.assign([],this.temp_suppliers),this.selectProduct=!1,this.load_4thTable_ok=!1)},load_3thTable_ok:function(t){t&&(this.products=Object.assign([],this.temp_products),this.load_3thTable_ok=!1)},load_2thTable_ok:function(t){t&&(this.suppliers=Object.assign([],this.temp_suppliers),this.load_2thTable_ok=!1,this.listProducts())},load_SingleTable_ok:function(t){if(t){this.desserts=Object.assign([],this.temp_desserts);var e=this.temp_desserts.map((function(t){return t.reag_catalog}));this.reagents=Object(Dt["a"])(new Set(e)),this.reagents.push("其他"),this.load_SingleTable_ok=!1,this.listSuppliers()}}},created:function(){this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),this.currentUser.perm<1&&(this.permDialog=!0),this.pagination.itemsPerPage=this.currentUser.setting_items_per_page,this.load_SingleTable_ok=!1,this.initAxios(),this.listReagents()},methods:{initialize:function(){this.load_SingleTable_ok=!1,this.listReagents()},listReagents:function(){var t=this,e="/listReagents";console.log("listReagents, Axios get data..."),h.a.get(e).then((function(e){t.temp_desserts=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length,e.data.outputs),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},listSuppliers:function(){var t=this,e="/listSuppliers";console.log("listSuppliers, Axios get data..."),h.a.get(e).then((function(e){console.log("===GET ok, total records, OBJECTS:",e.data.outputs),t.temp_suppliers=e.data.outputs.map((function(t){return Object.values(t)[3]})),console.log("GET ok, total records:",e.data.outputs.length),t.load_2thTable_ok=!0})).catch((function(e){console.error(e),t.load_2thTable_ok=!1}))},listSuppliersByProc:function(){var t=this;console.log("listSuppliersByProc, Axios get data...");var e="/listSuppliersByProc",s={prd_name:this.product_item};h.a.post(e,s).then((function(e){console.log("===GET ok, total records, OBJECTS:",e.data.outputs.length,e.data.outputs),t.temp_suppliers=e.data.outputs,t.load_4thTable_ok=!0})).catch((function(e){console.error(e),t.load_4thTable_ok=!1}))},listProducts:function(){var t=this,e="/listProducts";console.log("listProducts, Axios get data..."),h.a.get(e).then((function(e){t.temp_products=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_3thTable_ok=!0})).catch((function(e){console.error(e),t.load_3thTable_ok=!1}))},fieldFocus:function(){this.tosterOK=!1,this.IDErrMsg="",this.nameErrMsg="",this.scaleErrMsg="",this.stockErrMsg=""},editItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm:function(){this.removeReagent(this.editedItem.reag_id),this.tosterOK||(this.desserts.splice(this.editedIndex,1),console.log("deleteItem: ",this.editedItem),this.closeDelete())},close:function(){var t=this;this.dialog=!1,this.IDErrMsg="",this.nameErrMsg="",this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},removeReagent:function(t){var e=this,s="/removeReagent",a={ID:t};h.a.post(s,a).then((function(t){console.log("remove reagent status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},save:function(){console.log("click save button, editedIndex: ",this.editedIndex),-1==this.editedIndex?(this.createReagent(this.editedItem),this.tosterOK||(this.desserts.push(this.editedItem),this.close())):(this.updateReagent(this.editedItem),this.tosterOK||(Object.assign(this.desserts[this.editedIndex],this.editedItem),this.close()))},updateReagent:function(t){var e=this;console.log("---click update_reagent data---",t);var s="/updateReagent",a=Object.assign({},t);h.a.post(s,a).then((function(t){console.log("update reagent data status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},createReagent:function(t){var e=this;console.log("---click create_reagent data---");var s="/createReagent",a=Object.assign({},t);h.a.post(s,a).then((function(t){console.log("save reagent data status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},resetQueue:function(){this.reag_catalog.selected_item=this.newItem,this.reagents.unshift(this.reag_catalog.selected_item)},resetQueueIn:function(){this.editedItem.reag_In_unit=this.newItemIn,this.InUnits.unshift(this.editedItem.reag_In_unit)},resetQueueOut:function(){this.editedItem.reag_Out_unit=this.newItemOut,this.OutUnits.unshift(this.editedItem.reag_Out_unit)},setRowStyleForRragent:function(t){return"style-for-data-table"},permCloseFun:function(){this.permDialog=!1,console.log("press permission Close Button..."),this.$router.push("/navbar")}}}),St=Ot,wt=(s("eeb8"),Object(l["a"])(St,yt,Tt,!1,null,"634aec68",null)),jt=wt.exports,Et=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",{attrs:{fluid:""}},[t.currentUser.perm>=1?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{staticClass:"pa-md-4  mt-5 mx-lg-auto",attrs:{width:"72vw"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts,options:t.pagination,"footer-props":{itemsPerPageText:"每頁的資料筆數"}},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:""}},[s("v-toolbar-title",[t._v("儲位資料")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-dialog",{attrs:{"max-width":"800px","content-class":t.temp_css},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[s("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),a),[s("v-icon",{attrs:{left:"",dark:""}},[t._v("mdi-table-plus")]),t._v(" 新增資料 ")],1)]}}],null,!1,1287677061),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-tooltip",{attrs:{top:"",color:"error"},scopedSlots:t._u([{key:"activator",fn:function(e){e.on,e.attrs;return[s("v-select",{staticStyle:{position:"relative",top:"10px"},attrs:{items:t.reagentForSelect,label:"資材碼",dense:"",outlined:""},model:{value:t.editedItem.grid_reagID,callback:function(e){t.$set(t.editedItem,"grid_reagID",e)},expression:"editedItem.grid_reagID"}})]}}],null,!1,2787846901),model:{value:t.errorShow,callback:function(e){t.errorShow=e},expression:"errorShow"}},[s("span",[t._v("資材碼錯誤或放置位置重複!")])])],1),s("v-col",{attrs:{cols:"12",md:"9"}},[s("v-text-field",{attrs:{value:t.fromReagIdDisp,label:"品名",readonly:""},model:{value:t.editedItem.grid_reagName,callback:function(e){t.$set(t.editedItem,"grid_reagName",e)},expression:"editedItem.grid_reagName"}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("div",{staticStyle:{color:"#007bff","font-weight":"800"}},[t._v("站別")]),s("vue-numeric-input",{attrs:{min:1,max:3,step:1},model:{value:t.editedItem.grid_station,callback:function(e){t.$set(t.editedItem,"grid_station",e)},expression:"editedItem.grid_station"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("div",{staticStyle:{color:"#007bff","font-weight":"800"}},[t._v("層別")]),s("vue-numeric-input",{attrs:{min:1,max:5,step:1},model:{value:t.editedItem.grid_layout,callback:function(e){t.$set(t.editedItem,"grid_layout",e)},expression:"editedItem.grid_layout"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("div",{staticStyle:{color:"#007bff","font-weight":"800"}},[t._v("格位編號")]),s("vue-numeric-input",{attrs:{min:1,max:10,step:1},model:{value:t.editedItem.grid_pos,callback:function(e){t.$set(t.editedItem,"grid_pos",e)},expression:"editedItem.grid_pos"}})],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.checkDataForSaveButton},on:{click:t.save}},[t._v("確定")]),s("v-tooltip",{attrs:{bottom:"","position-x":t.toster_pos_x,"position-y":t.toster_pos_y,color:"error"},model:{value:t.tosterOK,callback:function(e){t.tosterOK=e},expression:"tosterOK"}},[s("span",[t._v("資材碼重複或放置位置重複!")])])],1)],1)],1),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[s("v-card",[s("v-card-title",{staticClass:"text-h5"},[t._v("確定刪除這筆資料?")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("刪除")]),s("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var a=e.item;return[s("v-icon",{staticClass:"mr-2",staticStyle:{color:"blue"},attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),s("v-icon",{staticStyle:{color:"red"},attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!0)})],1)],1):s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"500"},model:{value:t.permDialog,callback:function(e){t.permDialog=e},expression:"permDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("錯誤訊息!")]),s("v-card-text",[s("div",{staticClass:"text-h4 pa-12"},[t._v("使用這項功能, 請通知管理人員...")])]),s("v-card-actions",{staticClass:"justify-end"},[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.permCloseFun}},[t._v(" 取消 ")])],1)],1)],1)],1)],1)],1)},Ct=[],Pt=s("53ca"),At=(s("7db0"),s("6476")),Nt=s.n(At),Ut={name:"Grids",mixins:[_],components:{VueNumericInput:Nt.a},mounted:function(){var t=this;window.onpopstate=function(){console.log("press back button, good bye...");var e=JSON.parse(localStorage.getItem("loginedUser"));e.setting_items_per_page=t.pagination.itemsPerPage,localStorage.setItem("loginedUser",JSON.stringify(e))}},data:function(){return{currentUser:{},permDialog:!1,errorShow:!1,dialog:!1,dialogDelete:!1,pagination:{},tosterOK:!1,toster_pos_x:1e3,toster_pos_y:400,toster_delay:3,headers:[{text:"資材碼",sortable:!0,value:"grid_reagID",width:"10%"},{text:"品名",sortable:!1,value:"grid_reagName",width:"10%"},{text:"站別",sortable:!0,value:"grid_station",width:"20%"},{text:"層別",sortable:!1,value:"grid_layout",width:"20%"},{text:"格位編號",sortable:!1,value:"grid_pos",width:"30%"},{text:"Actions",sortable:!1,value:"actions",width:"10%"}],reagent_Desserts:[],temp_reagent_Desserts:[],desserts:[],temp_desserts:[],reagentForSelect:[],editedIndex:-1,editedItem:{grid_reagID:"",grid_reagName:"",grid_station:1,grid_layout:1,grid_pos:1,grid_id:0},defaultItem:{grid_reagID:"",grid_reagName:"",grid_station:1,grid_layout:1,grid_pos:1,grid_id:0},load_SingleTable_ok:!1,load_2thTable_ok:!1}},computed:{formTitle:function(){return-1===this.editedIndex?"新增資料":"編輯資料"},fromReagIdDisp:function(){var t=this;if(""!=this.editedItem.grid_reagID){console.log("result 1...");var e=this.reagent_Desserts.find((function(e){return e.reag_id===t.editedItem.grid_reagID}));if(console.log("result 1-2...",e),"undefined"!=e&&null!=e){console.log("result 2...",e);var s=Object.values(e);return this.editedItem.grid_reagName=s[1],this.errorShow=!1,console.log("result: ",e,Object(Pt["a"])(e),s[1]),s[1]}return this.editedItem.grid_reagName="",this.errorShow=!0,""}},checkDataForSaveButton:function(){return!this.editedItem.grid_reagID||!this.editedItem.grid_reagName}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()},load_2thTable_ok:function(t){t&&(this.reagent_Desserts=Object.assign([],this.temp_reagent_Desserts),this.load_2thTable_ok=!1)},load_SingleTable_ok:function(t){t&&(this.desserts=Object.assign([],this.temp_desserts),this.load_SingleTable_ok=!1,this.listReagents())}},created:function(){this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),this.currentUser.perm<1&&(this.permDialog=!0),this.pagination.itemsPerPage=this.currentUser.setting_items_per_page,this.load_SingleTable_ok=!1,this.initAxios(),this.listGrids()},methods:{initialize:function(){this.load_SingleTable_ok=!1,this.listGrids()},listGrids:function(){var t=this,e="/listGrids";console.log("listGrids, Axios get data..."),h.a.get(e).then((function(e){t.temp_desserts=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},listReagents:function(){var t=this,e="/listReagents";console.log("grids, listReagents(), Axios get data..."),h.a.get(e).then((function(e){for(var s=e.data.outputs.length,a=0;a<s;a++){var o={reag_id:e.data.outputs[a]["reag_id"],reag_name:e.data.outputs[a]["reag_name"]};t.temp_reagent_Desserts.push(o)}t.reagentForSelect=t.temp_reagent_Desserts.map((function(t){return t.reag_id})),t.reagentForSelect=Object(Dt["a"])(new Set(t.reagentForSelect)),t.load_2thTable_ok=!0})).catch((function(e){console.error(e),t.load_2thTable_ok=!1}))},editItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm:function(){this.removeGrid(this.editedItem.grid_reagID,this.editedItem.grid_id),this.tosterOK||(this.desserts.splice(this.editedIndex,1),console.log("deleteItem: ",this.editedItem),this.closeDelete())},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},removeGrid:function(t,e){var s=this,a="/removeGrid",o={ID:t,GRID:e};h.a.post(a,o).then((function(t){console.log("remove grid LINK status: ",t.data.status),t.data.status?(s.tosterOK=!1,s.editedItem=Object.assign({},s.defaultItem)):s.tosterOK=!0})).catch((function(t){console.error(t)}))},save:function(){console.log("click save button, editedIndex: ",this.editedIndex),-1==this.editedIndex?(this.createGrid(this.editedItem),this.tosterOK||this.desserts.push(this.editedItem)):(this.updateGrid(this.editedItem),this.tosterOK||Object.assign(this.desserts[this.editedIndex],this.editedItem)),this.close()},updateGrid:function(t){var e=this;console.log("---click update_grid data---",t);var s="/updateGrid",a=Object.assign({},t);h.a.post(s,a).then((function(t){console.log("update reagent and grid data/LINK status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},createGrid:function(t){var e=this;console.log("---click create_grid data---");var s="/createGrid",a=Object.assign({},t);h.a.post(s,a).then((function(t){console.log("save grid data/LINK status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t)}))},permCloseFun:function(){this.permDialog=!1,console.log("press permission Close Button..."),this.$router.push("/navbar")}}},Ft=Ut,Rt=(s("ee1e"),Object(l["a"])(Ft,Et,Ct,!1,null,"476cb3c4",null)),Mt=Rt.exports,Kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",{attrs:{fluid:""}},[s("v-snackbar",{attrs:{color:t.snackbar_color,right:t.snackbar_right,top:t.snackbar_top},scopedSlots:t._u([{key:"action",fn:function(e){e.attrs;return[s("v-btn",{attrs:{icon:"",color:t.snackbar_icon_color},on:{click:function(e){t.snackbar=!1}}},[s("v-icon",{attrs:{dark:""}},[t._v("mdi-close-circle")])],1)]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.snackbar_info)+" ")]),1==t.currentUser.perm||2==t.currentUser.perm?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{staticClass:"pa-md-4 mx-lg-auto",attrs:{width:"93vw"}},[s("v-toolbar",{attrs:{flat:""}},[s("v-toolbar-title",[t._v("儲位燈條資料設定")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-dialog",{attrs:{"max-width":"600px","content-class":t.temp_css},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"text-h5"},[t._v("儲位燈條編號")])]),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"1"}},[s("div",{staticStyle:{color:"#007bff","font-weight":"800"}},[t._v("第"+t._s(t.tab_index+1)+"站")])]),s("v-col",{attrs:{cols:"12",md:"4"}},[s("div",{staticStyle:{color:"#007bff","font-weight":"800"}},[t._v("層別")]),s("vue-numeric-input",{attrs:{min:1,max:5,step:1},model:{value:t.editedItem.grid_layout,callback:function(e){t.$set(t.editedItem,"grid_layout",e)},expression:"editedItem.grid_layout"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("div",{staticStyle:{color:"#007bff","font-weight":"800"}},[t._v("格位編號")]),s("vue-numeric-input",{attrs:{min:1,max:10,step:1},model:{value:t.editedItem.grid_pos,callback:function(e){t.$set(t.editedItem,"grid_pos",e)},expression:"editedItem.grid_pos"}})],1),s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-switch",{attrs:{inset:""},on:{click:t.confirmCard},scopedSlots:t._u([{key:"label",fn:function(){return[s("span",{staticClass:"input__label"},[t._v(t._s(t.swString))])]},proxy:!0}],null,!1,136687818),model:{value:t.switchOnOff,callback:function(e){t.switchOnOff=e},expression:"switchOnOff"}})],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeCard}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.confirmCard}},[t._v("確定")])],1)],1)],1),s("v-btn",{staticClass:"mt-n1 mr-15 mx-auto",staticStyle:{position:"relative",left:"40px"},attrs:{color:"primary",elevation:"5"},on:{click:t.connectMQTT}},[s("v-icon",[t._v("mdi-lan-connect")]),t._v(" 連線測試 ")],1),s("v-btn",{staticClass:"mt-n1 mr-15 mx-auto",attrs:{color:"primary",elevation:"5"},on:{click:t.saveData}},[s("v-icon",[t._v("mdi-content-save-check")]),t._v(" 儲存資料 ")],1)],1),s("v-tabs",{attrs:{vertical:""}},t._l(t.items,(function(e,a){return s("v-tab",{key:e.tab,staticStyle:{"font-size":"16px","font-weight":"600",width:"140px"},on:{click:function(e){return t.nextTabContent(a)}}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-library-shelves")]),t._v(" "+t._s(e.tab)+" ("+t._s(t.tab_totals[a])+") ")],1)})),1),s("v-card",{staticClass:"mt-1 mx-auto",staticStyle:{width:"75vw",height:"40vw",left:"60px",top:"-150px"},attrs:{outlined:""}},[s("LedStrip",{attrs:{my_object:t.items[t.tab_index].content,my_key:t.tab_index},on:{closeLedStrip:t.getGridData}})],1)],1)],1):s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"500"},model:{value:t.permDialog,callback:function(e){t.permDialog=e},expression:"permDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("錯誤訊息!")]),s("v-card-text",[s("div",{staticClass:"text-h4 pa-12"},[t._v("權限不足...")])]),s("v-card-actions",{staticClass:"justify-end"},[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.permCloseFun}},[t._v(" 取消 ")])],1)],1)],1)],1)],1)],1)},Lt=[],Bt=s("c7eb"),Vt=s("1da1"),$t=(s("b64b"),s("4de4"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-card-text",{staticStyle:{"padding-top":"8px"},attrs:{id:"app_tab_1"}},[s("div",{staticClass:"container_tab1",staticStyle:{width:"885px",padding:"0px 5px 0px 5px","border-radius":"10px",height:"55px"}},[s("div",{staticStyle:{color:"white","font-size":"14px","text-align":"center"}},t._l(t.selectedLeds.led1,(function(e){return s("p",{staticStyle:{width:"25px",height:"25px",margin:"0px 2px 0px 2px",display:"inline",float:"left"},model:{value:e.value,callback:function(s){t.$set(e,"value",s)},expression:"field.value"}},[t._v(" "+t._s(e.value)+" ")])})),0),t._l(30,(function(t,e){return s("div",{staticClass:"dot",staticStyle:{width:"25px",height:"25px",margin:"0px 2px 0px 2px"},attrs:{id:"light_"+e}})}))],2),s("v-row",{staticStyle:{"margin-bottom":"0px",height:"55px","max-height":"55px"}},[s("v-col",{staticClass:"px-1",staticStyle:{"text-align":"right","line-height":"42px","font-size":"14px","font-weight":"600"},attrs:{cols:"12",md:"1"}},[t._v("格位寬度")]),s("v-col",{staticClass:"px-2",attrs:{cols:"12",md:"8"}},[s("v-range-slider",{staticClass:"align-center",attrs:{max:t.max,min:t.min,"hide-details":""},on:{click:function(e){return t.eraseErrMsg(0)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"40px"},attrs:{value:t.ranges.range1[0],max:t.max,min:t.min,"hide-details":"","single-line":"",type:"number"},on:{focus:function(e){return t.eraseErrMsg(0)},change:function(e){return t.$set(t.ranges.range1,0,e)}},model:{value:t.ranges.range1[0],callback:function(e){t.$set(t.ranges.range1,0,e)},expression:"ranges.range1[0]"}})]},proxy:!0},{key:"append",fn:function(){return[s("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"40px"},attrs:{value:t.ranges.range1[1],max:t.max,min:t.min,"hide-details":"","single-line":"",type:"number"},on:{focus:function(e){return t.eraseErrMsg(0)},change:function(e){return t.$set(t.ranges.range1,1,e)}},model:{value:t.ranges.range1[1],callback:function(e){t.$set(t.ranges.range1,1,e)},expression:"ranges.range1[1]"}})]},proxy:!0}]),model:{value:t.ranges.range1,callback:function(e){t.$set(t.ranges,"range1",e)},expression:"ranges.range1"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.errorMessages.message1)}})],1),s("v-col",{staticClass:"px-0",staticStyle:{"text-align":"center","line-height":"42px","font-size":"14px","font-weight":"600"},attrs:{cols:"12",md:"1"}},[t._v("格位編號")]),s("v-col",{staticClass:"mt-1 px-0",attrs:{cols:"12",md:"1"}},[s("v-text-field",{staticClass:"mt-0 pt-0 centered-input",staticStyle:{width:"50px","border-radius":"5px",border:"1px solid #000000"},attrs:{value:t.segment_values[0],max:t.max,min:t.min,"hide-details":"","single-line":"",type:"number"},on:{focus:function(e){return t.eraseErrMsg(0)}},model:{value:t.segment_values[0],callback:function(e){t.$set(t.segment_values,0,e)},expression:"segment_values[0]"}})],1),s("v-col",{staticClass:"mt-1 pr-2 pl-0",attrs:{cols:"12",md:"1"}},[s("v-btn",{staticClass:"ml-0 mr-2 mt-1",attrs:{small:"",color:"primary"},on:{click:function(e){return t.toggleLed(0)}}},[s("v-icon",[t._v("mdi-gesture-tap")]),t._v(" 設定 ")],1)],1)],1),s("div",{staticClass:"container_tab1",staticStyle:{width:"885px",padding:"0px 5px 0px 5px","border-radius":"10px",height:"55px"}},[s("div",{staticStyle:{color:"white","font-size":"14px","text-align":"center"}},t._l(t.selectedLeds.led2,(function(e){return s("p",{staticStyle:{width:"25px",height:"25px",margin:"0px 2px 0px 2px",display:"inline",float:"left"},model:{value:e.value,callback:function(s){t.$set(e,"value",s)},expression:"field.value"}},[t._v(" "+t._s(e.value)+" ")])})),0),t._l(30,(function(t,e){return s("div",{staticClass:"dot",staticStyle:{width:"25px",height:"25px",margin:"0px 2px 0px 2px"},attrs:{id:"light_"+e}})}))],2),s("v-row",{staticStyle:{"margin-bottom":"0px",height:"55px","max-height":"55px"}},[s("v-col",{staticClass:"px-1",staticStyle:{"text-align":"right","line-height":"42px","font-size":"14px","font-weight":"600"},attrs:{cols:"12",md:"1"}},[t._v("格位寬度")]),s("v-col",{staticClass:"px-2",attrs:{cols:"12",md:"8"}},[s("v-range-slider",{staticClass:"align-center",attrs:{max:t.max,min:t.min,"hide-details":""},on:{click:function(e){return t.eraseErrMsg(1)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{value:t.ranges.range2[0],max:t.max,min:t.min,"hide-details":"","single-line":"",type:"number"},on:{focus:function(e){return t.eraseErrMsg(1)},change:function(e){return t.$set(t.ranges.range2,0,e)}},model:{value:t.ranges.range2[0],callback:function(e){t.$set(t.ranges.range2,0,e)},expression:"ranges.range2[0]"}})]},proxy:!0},{key:"append",fn:function(){return[s("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{value:t.ranges.range2[1],max:t.max,min:t.min,"hide-details":"","single-line":"",type:"number"},on:{focus:function(e){return t.eraseErrMsg(1)},change:function(e){return t.$set(t.ranges.range2,1,e)}},model:{value:t.ranges.range2[1],callback:function(e){t.$set(t.ranges.range2,1,e)},expression:"ranges.range2[1]"}})]},proxy:!0}]),model:{value:t.ranges.range2,callback:function(e){t.$set(t.ranges,"range2",e)},expression:"ranges.range2"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.errorMessages.message2)}})],1),s("v-col",{staticClass:"px-0",staticStyle:{"text-align":"center","line-height":"42px","font-size":"14px","font-weight":"600"},attrs:{cols:"12",md:"1"}},[t._v("格位編號")]),s("v-col",{staticClass:"mt-1 px-0",attrs:{cols:"12",md:"1"}},[s("v-text-field",{staticClass:"mt-0 pt-0 centered-input",staticStyle:{width:"50px","border-radius":"5px",border:"1px solid #000000"},attrs:{value:t.segment_values[1],max:t.max,min:t.min,"hide-details":"","single-line":"",type:"number"},on:{focus:function(e){return t.eraseErrMsg(1)}},model:{value:t.segment_values[1],callback:function(e){t.$set(t.segment_values,1,e)},expression:"segment_values[1]"}})],1),s("v-col",{staticClass:"mt-1 pr-2 pl-0",attrs:{cols:"12",md:"1"}},[s("v-btn",{staticClass:"ml-0 mr-2 mt-1",attrs:{small:"",color:"primary"},on:{click:function(e){return t.toggleLed(1)}}},[s("v-icon",[t._v("mdi-gesture-tap")]),t._v(" 設定 ")],1)],1)],1),s("div",{staticClass:"container_tab1",staticStyle:{width:"885px",padding:"0px 5px 0px 5px","border-radius":"10px",height:"55px"}},[s("div",{staticStyle:{color:"white","font-size":"14px","text-align":"center"}},t._l(t.selectedLeds.led3,(function(e){return s("p",{staticStyle:{width:"25px",height:"25px",margin:"0px 2px 0px 2px",display:"inline",float:"left"},model:{value:e.value,callback:function(s){t.$set(e,"value",s)},expression:"field.value"}},[t._v(" "+t._s(e.value)+" ")])})),0),t._l(30,(function(t,e){return s("div",{staticClass:"dot",staticStyle:{width:"25px",height:"25px",margin:"0px 2px 0px 2px"},attrs:{id:"light_"+e}})}))],2),s("v-row",{staticStyle:{"margin-bottom":"0px",height:"55px","max-height":"55px"}},[s("v-col",{staticClass:"px-1",staticStyle:{"text-align":"right","line-height":"42px","font-size":"14px","font-weight":"600"},attrs:{cols:"12",md:"1"}},[t._v("格位寬度")]),s("v-col",{staticClass:"px-2",attrs:{cols:"12",md:"8"}},[s("v-range-slider",{staticClass:"align-center",attrs:{max:t.max,min:t.min,"hide-details":""},on:{click:function(e){return t.eraseErrMsg(2)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{value:t.ranges.range3[0],max:t.max,min:t.min,"hide-details":"","single-line":"",type:"number"},on:{focus:function(e){return t.eraseErrMsg(2)},change:function(e){return t.$set(t.ranges.range3,0,e)}},model:{value:t.ranges.range3[0],callback:function(e){t.$set(t.ranges.range3,0,e)},expression:"ranges.range3[0]"}})]},proxy:!0},{key:"append",fn:function(){return[s("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{value:t.ranges.range3[1],max:t.max,min:t.min,"hide-details":"","single-line":"",type:"number"},on:{focus:function(e){return t.eraseErrMsg(2)},change:function(e){return t.$set(t.ranges.range3,1,e)}},model:{value:t.ranges.range3[1],callback:function(e){t.$set(t.ranges.range3,1,e)},expression:"ranges.range3[1]"}})]},proxy:!0}]),model:{value:t.ranges.range3,callback:function(e){t.$set(t.ranges,"range3",e)},expression:"ranges.range3"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.errorMessages.message3)}})],1),s("v-col",{staticClass:"px-0",staticStyle:{"text-align":"center","line-height":"42px","font-size":"14px","font-weight":"600"},attrs:{cols:"12",md:"1"}},[t._v("格位編號")]),s("v-col",{staticClass:"mt-1 px-0",attrs:{cols:"12",md:"1"}},[s("v-text-field",{staticClass:"mt-0 pt-0 centered-input",staticStyle:{width:"50px","border-radius":"5px",border:"1px solid #000000"},attrs:{value:t.segment_values[2],max:t.max,min:t.min,"hide-details":"","single-line":"",type:"number"},on:{focus:function(e){return t.eraseErrMsg(0)}},model:{value:t.segment_values[2],callback:function(e){t.$set(t.segment_values,2,e)},expression:"segment_values[2]"}})],1),s("v-col",{staticClass:"mt-1 pr-2 pl-0",attrs:{cols:"12",md:"1"}},[s("v-btn",{staticClass:"ml-0 mr-2 mt-1",attrs:{small:"",color:"primary"},on:{click:function(e){return t.toggleLed(2)}}},[s("v-icon",[t._v("mdi-gesture-tap")]),t._v(" 設定 ")],1)],1)],1),s("div",{staticClass:"container_tab1",staticStyle:{width:"885px",padding:"0px 5px 0px 5px","border-radius":"10px",height:"55px"}},[s("div",{staticStyle:{color:"white","font-size":"14px","text-align":"center"}},t._l(t.selectedLeds.led4,(function(e){return s("p",{staticStyle:{width:"25px",height:"25px",margin:"0px 2px 0px 2px",display:"inline",float:"left"},model:{value:e.value,callback:function(s){t.$set(e,"value",s)},expression:"field.value"}},[t._v(" "+t._s(e.value)+" ")])})),0),t._l(30,(function(t,e){return s("div",{staticClass:"dot",staticStyle:{width:"25px",height:"25px",margin:"0px 2px 0px 2px"},attrs:{id:"light_"+e}})}))],2),s("v-row",{staticStyle:{"margin-bottom":"0px",height:"55px","max-height":"55px"}},[s("v-col",{staticClass:"px-1",staticStyle:{"text-align":"right","line-height":"42px","font-size":"14px","font-weight":"600"},attrs:{cols:"12",md:"1"}},[t._v("格位寬度")]),s("v-col",{staticClass:"px-2",attrs:{cols:"12",md:"8"}},[s("v-range-slider",{staticClass:"align-center",attrs:{max:t.max,min:t.min,"hide-details":""},on:{click:function(e){return t.eraseErrMsg(3)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{value:t.ranges.range4[0],max:t.max,min:t.min,"hide-details":"","single-line":"",type:"number"},on:{focus:function(e){return t.eraseErrMsg(3)},change:function(e){return t.$set(t.ranges.range4,0,e)}},model:{value:t.ranges.range4[0],callback:function(e){t.$set(t.ranges.range4,0,e)},expression:"ranges.range4[0]"}})]},proxy:!0},{key:"append",fn:function(){return[s("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{value:t.ranges.range4[1],max:t.max,min:t.min,"hide-details":"","single-line":"",type:"number"},on:{focus:function(e){return t.eraseErrMsg(3)},change:function(e){return t.$set(t.ranges.range4,1,e)}},model:{value:t.ranges.range4[1],callback:function(e){t.$set(t.ranges.range4,1,e)},expression:"ranges.range4[1]"}})]},proxy:!0}]),model:{value:t.ranges.range4,callback:function(e){t.$set(t.ranges,"range4",e)},expression:"ranges.range4"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.errorMessages.message4)}})],1),s("v-col",{staticClass:"px-0",staticStyle:{"text-align":"center","line-height":"42px","font-size":"14px","font-weight":"600"},attrs:{cols:"12",md:"1"}},[t._v("格位編號")]),s("v-col",{staticClass:"mt-1 px-0",attrs:{cols:"12",md:"1"}},[s("v-text-field",{staticClass:"mt-0 pt-0 centered-input",staticStyle:{width:"50px","border-radius":"5px",border:"1px solid #000000"},attrs:{value:t.segment_values[3],max:t.max,min:t.min,"hide-details":"","single-line":"",type:"number"},on:{focus:function(e){return t.eraseErrMsg(0)}},model:{value:t.segment_values[3],callback:function(e){t.$set(t.segment_values,3,e)},expression:"segment_values[3]"}})],1),s("v-col",{staticClass:"mt-1 pr-2 pl-0",attrs:{cols:"12",md:"1"}},[s("v-btn",{staticClass:"ml-0 mr-2 mt-1",attrs:{small:"",color:"primary"},on:{click:function(e){return t.toggleLed(3)}}},[s("v-icon",[t._v("mdi-gesture-tap")]),t._v(" 設定 ")],1)],1)],1),s("div",{staticClass:"container_tab1",staticStyle:{width:"885px",padding:"0px 5px 0px 5px","border-radius":"10px",height:"55px"}},[s("div",{staticStyle:{color:"white","font-size":"14px","text-align":"center"}},t._l(t.selectedLeds.led5,(function(e){return s("p",{staticStyle:{width:"25px",height:"25px",margin:"0px 2px 0px 2px",display:"inline",float:"left"},model:{value:e.value,callback:function(s){t.$set(e,"value",s)},expression:"field.value"}},[t._v(" "+t._s(e.value)+" ")])})),0),t._l(30,(function(t,e){return s("div",{staticClass:"dot",staticStyle:{width:"25px",height:"25px",margin:"0px 2px 0px 2px"},attrs:{id:"light_"+e}})}))],2),s("v-row",{staticStyle:{"margin-bottom":"0px",height:"55px","max-height":"55px"}},[s("v-col",{staticClass:"px-1",staticStyle:{"text-align":"right","line-height":"42px","font-size":"14px","font-weight":"600"},attrs:{cols:"12",md:"1"}},[t._v("格位寬度")]),s("v-col",{staticClass:"px-2",attrs:{cols:"12",md:"8"}},[s("v-range-slider",{staticClass:"align-center",attrs:{max:t.max,min:t.min,"hide-details":""},on:{click:function(e){return t.eraseErrMsg(4)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[s("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{value:t.ranges.range5[0],max:t.max,min:t.min,"hide-details":"","single-line":"",type:"number"},on:{focus:function(e){return t.eraseErrMsg(4)},change:function(e){return t.$set(t.ranges.range5,0,e)}},model:{value:t.ranges.range5[0],callback:function(e){t.$set(t.ranges.range5,0,e)},expression:"ranges.range5[0]"}})]},proxy:!0},{key:"append",fn:function(){return[s("v-text-field",{staticClass:"mt-0 pt-0",staticStyle:{width:"60px"},attrs:{value:t.ranges.range5[1],max:t.max,min:t.min,"hide-details":"","single-line":"",type:"number"},on:{focus:function(e){return t.eraseErrMsg(4)},change:function(e){return t.$set(t.ranges.range5,1,e)}},model:{value:t.ranges.range5[1],callback:function(e){t.$set(t.ranges.range5,1,e)},expression:"ranges.range5[1]"}})]},proxy:!0}]),model:{value:t.ranges.range5,callback:function(e){t.$set(t.ranges,"range5",e)},expression:"ranges.range5"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.errorMessages.message5)}})],1),s("v-col",{staticClass:"px-0",staticStyle:{"text-align":"center","line-height":"42px","font-size":"14px","font-weight":"600"},attrs:{cols:"12",md:"1"}},[t._v("格位編號")]),s("v-col",{staticClass:"mt-1 px-0",attrs:{cols:"12",md:"1"}},[s("v-text-field",{staticClass:"mt-0 pt-0 centered-input",staticStyle:{width:"50px","border-radius":"5px",border:"1px solid #000000"},attrs:{value:t.segment_values[4],max:t.max,min:t.min,"hide-details":"","single-line":"",type:"number"},on:{focus:function(e){return t.eraseErrMsg(0)}},model:{value:t.segment_values[4],callback:function(e){t.$set(t.segment_values,4,e)},expression:"segment_values[4]"}})],1),s("v-col",{staticClass:"mt-1 pr-2 pl-0",attrs:{cols:"12",md:"1"}},[s("v-btn",{staticClass:"ml-0 mr-2 mt-1",attrs:{small:"",color:"primary"},on:{click:function(e){return t.toggleLed(4)}}},[s("v-icon",[t._v("mdi-gesture-tap")]),t._v(" 設定 ")],1)],1)],1)],1)}),zt=[],Gt=(s("a9e3"),{name:"LedStrip",props:{my_object:{type:Object,default:function(){return{segs:{segments1:[],segments2:[],segments3:[],segments4:[],segments5:[]},rans:{range1:[],range2:[],range3:[],range4:[],range5:[]}}},required:!0},my_key:{type:Number}},mounted:function(){},data:function(){return{min:1,max:30,errorMessages:{message1:"",message2:"",message3:"",message4:"",message5:""},ranges:{range1:[],range2:[],range3:[],range4:[],range5:[]},tab1_rans:{},segment_values:[],selectedLeds:{led1:[],led2:[],led3:[],led4:[],led5:[]},selectedLamps:{led1:[],led2:[],led3:[],led4:[],led5:[]},segments:{segment1:[],segment2:[],segment3:[],segment4:[],segment5:[]},tab1_segs:{},temp_segments:{segment1:[],segment2:[],segment3:[],segment4:[],segment5:[]},load_SingleTable_ok:!1,slider_data_ok:!1,slider_led_dig_ok:!1,slider_led_lamp_ok:!1,new_lamp_seg:0}},computed:{},watch:{my_object:{handler:function(t,e){t&&(this.tab1_segs=t.segs,this.tab1_rans=t.rans,console.log("LedStrip, watch(), newVal: ",t,this.tab1_segs),this.slider_data_ok=!0)},deep:!0},slider_data_ok:function(t){if(t){console.log("LedStrip, watch, slider_data_ok() ..."),this.slider_data_ok=!1,this.ranges.range1=Object.assign([],this.tab1_rans.range1),this.ranges.range2=Object.assign([],this.tab1_rans.range2),this.ranges.range3=Object.assign([],this.tab1_rans.range3),this.ranges.range4=Object.assign([],this.tab1_rans.range4),this.ranges.range5=Object.assign([],this.tab1_rans.range5);var e=this.tab1_segs.segments1.length;this.segments.segment1=[];for(var s=0;s<e;s++){var a={grid_station:this.tab1_segs.segments1[s].grid_station,grid_layout:this.tab1_segs.segments1[s].grid_layout,seg_id:parseInt(this.tab1_segs.segments1[s].seg_id),range0:this.tab1_segs.segments1[s].range0,range1:this.tab1_segs.segments1[s].range1};this.segments.segment1.push(a)}e=this.tab1_segs.segments2.length,this.segments.segment2=[];for(var o=0;o<e;o++){var i={grid_station:this.tab1_segs.segments2[o].grid_station,grid_layout:this.tab1_segs.segments2[o].grid_layout,seg_id:parseInt(this.tab1_segs.segments2[o].seg_id),range0:this.tab1_segs.segments2[o].range0,range1:this.tab1_segs.segments2[o].range1};this.segments.segment2.push(i)}e=this.tab1_segs.segments3.length,this.segments.segment3=[];for(var n=0;n<e;n++){var r={grid_station:this.tab1_segs.segments3[n].grid_station,grid_layout:this.tab1_segs.segments3[n].grid_layout,seg_id:parseInt(this.tab1_segs.segments3[n].seg_id),range0:this.tab1_segs.segments3[n].range0,range1:this.tab1_segs.segments3[n].range1};this.segments.segment3.push(r)}e=this.tab1_segs.segments4.length,this.segments.segment4=[];for(var l=0;l<e;l++){var c={grid_station:this.tab1_segs.segments4[l].grid_station,grid_layout:this.tab1_segs.segments4[l].grid_layout,seg_id:parseInt(this.tab1_segs.segments4[l].seg_id),range0:this.tab1_segs.segments4[l].range0,range1:this.tab1_segs.segments4[l].range1};this.segments.segment4.push(c)}e=this.tab1_segs.segments5.length,this.segments.segment5=[];for(var d=0;d<e;d++){var u={grid_station:this.tab1_segs.segments5[d].grid_station,grid_layout:this.tab1_segs.segments5[d].grid_layout,seg_id:parseInt(this.tab1_segs.segments5[d].seg_id),range0:this.tab1_segs.segments5[d].range0,range1:this.tab1_segs.segments5[d].range1};this.segments.segment5.push(u)}this.segment_values[0]=this.segments.segment1.length?this.segments.segment1[0].seg_id:"1",this.segment_values[1]=this.segments.segment2.length?this.segments.segment2[0].seg_id:"1",this.segment_values[2]=this.segments.segment3.length?this.segments.segment3[0].seg_id:"1",this.segment_values[3]=this.segments.segment4.length?this.segments.segment4[0].seg_id:"1",this.segment_values[4]=this.segments.segment5.length?this.segments.segment5[0].seg_id:"1",console.log("LedStrip, watch, slider_data_ok(), ",this.segments),this.slider_led_dig_ok=!0}},slider_led_dig_ok:function(t){if(t){this.slider_led_dig_ok=!1;for(var e=0;e<5;e++){for(var s=this.segments[Object.keys(this.segments)[e]].length,a=0;a<this.max;a++)this.selectedLeds[Object.keys(this.selectedLeds)[e]][a].value=".";if(s)for(var o=0;o<s;o++){var i=this.segments[Object.keys(this.segments)[e]][o].range0-1;this.selectedLeds[Object.keys(this.selectedLeds)[e]][i].value=this.segments[Object.keys(this.segments)[e]][o].seg_id.toString()}}this.slider_led_lamp_ok=!0}},slider_led_lamp_ok:function(t){if(t){this.slider_led_lamp_ok=!1;for(var e=document.getElementsByClassName("container_tab1"),s=0;s<5;s++){for(var a=this.segments[Object.keys(this.segments)[s]].length,o=0;o<this.max;o++){var i=e[s].childNodes[o+1];this.selectedLamps[Object.keys(this.selectedLamps)[s]][o].value=!1;this.selectedLamps[Object.keys(this.selectedLamps)[s]][o].value?i.className+=" on":i.className="dot"}var n=0;if(a)do{for(var r=parseInt(this.segments[Object.keys(this.segments)[s]][n].range0),l=parseInt(this.segments[Object.keys(this.segments)[s]][n].range1),c=r;c<=l;c++){var d=e[s].childNodes[c];this.selectedLamps[Object.keys(this.selectedLamps)[s]][c-1].value=!0;this.selectedLamps[Object.keys(this.selectedLamps)[s]][c-1].value?d.className+=" on":d.className="dot"}n++}while(n<a)}}}},created:function(){for(var t=0;t<this.max;t++){var e={value:"."};this.selectedLeds.led1.push(e)}for(var s=0;s<this.max;s++){var a={value:"."};this.selectedLeds.led2.push(a)}for(var o=0;o<this.max;o++){var i={value:"."};this.selectedLeds.led3.push(i)}for(var n=0;n<this.max;n++){var r={value:"."};this.selectedLeds.led4.push(r)}for(var l=0;l<this.max;l++){var c={value:"."};this.selectedLeds.led5.push(c)}for(var d=0;d<this.max;d++){var u={value:!1};this.selectedLamps.led1.push(u)}for(var g=0;g<this.max;g++){var m={value:!1};this.selectedLamps.led2.push(m)}for(var p=0;p<this.max;p++){var h={value:!1};this.selectedLamps.led3.push(h)}for(var _=0;_<this.max;_++){var v={value:!1};this.selectedLamps.led4.push(v)}for(var f=0;f<this.max;f++){var b={value:!1};this.selectedLamps.led5.push(b)}console.log("LedStrip, created() end...",this.my_key)},methods:{toggleLed:function(t){this.errorMessages[Object.keys(this.errorMessages)[t]]="";var e=this.segments[Object.keys(this.segments)[t]].length,s=this.ranges[Object.keys(this.ranges)[t]][0],a=this.ranges[Object.keys(this.ranges)[t]][1],o=parseInt(this.segment_values[t]);if(s>a)this.errorMessages[Object.keys(this.errorMessages)[t]]="格位資料設定錯誤!";else{for(var i=0;i<e;i++){var n=parseInt(this.segments[Object.keys(this.segments)[t]][i].seg_id);if(o!=n&&(s>this.segments[Object.keys(this.segments)[t]][i].range0&&s<this.segments[Object.keys(this.segments)[t]][i].range1||a>this.segments[Object.keys(this.segments)[t]][i].range0&&a<this.segments[Object.keys(this.segments)[t]][i].range1||s==this.segments[Object.keys(this.segments)[t]][i].range0&&a>this.segments[Object.keys(this.segments)[t]][i].range1||a==this.segments[Object.keys(this.segments)[t]][i].range1&&s<this.segments[Object.keys(this.segments)[t]][i].range0))return void(this.errorMessages[Object.keys(this.errorMessages)[t]]="格位資料設定錯誤!")}var r=this.checkSegmentRange(t),l=this.checkSegmentID(t);if(!r&&l){console.log("hello !ch1 && ch2..., 更改range slider, 但segment value不變");for(var c=this.segments[Object.keys(this.segments)[t]].find((function(t){return parseInt(t.seg_id)==o})),d=document.getElementsByClassName("container_tab1"),u=parseInt(c.range0);u<parseInt(c.range1)+1;u++){var g=d[t].childNodes[u];this.selectedLamps[Object.keys(this.selectedLamps)[t]][u-1].value=!1;this.selectedLamps[Object.keys(this.selectedLamps)[t]][u-1].value?g.className+=" on":g.className="dot";this.selectedLeds[Object.keys(this.selectedLeds)[t]][u-1].value="."}for(var m=document.getElementsByClassName("container_tab1"),p=s;p<a+1;p++){var h=m[t].childNodes[p];this.selectedLamps[Object.keys(this.selectedLamps)[t]][p-1].value=!0;this.selectedLamps[Object.keys(this.selectedLamps)[t]][p-1].value?h.className+=" on":h.className="dot"}for(var _=0;_<this.segments[Object.keys(this.segments)[t]].length;_++){var v=s-1;parseInt(this.segments[Object.keys(this.segments)[t]][_].range0);this.selectedLeds[Object.keys(this.selectedLeds)[t]][v].value=o}return c.range0=s,c.range1=a,this.temp_segments=Object.assign({},this.segments),console.log("$emit object..., ",this.temp_segments),void this.$emit("closeLedStrip",this.my_key,t,this.temp_segments)}if(r&&l)if(console.log("hello ch1 && ch2..., range slider, 及segment value不變"),0==this.segments[Object.keys(this.segments)[t]].length){console.log("step1...");var f={seg_id:parseInt(this.segment_values[t]),range0:s,range1:a};this.segments[Object.keys(this.segments)[t]].push(f),this.temp_segments=Object.assign({},this.segments)}else{console.log("step2...");var b=Object.assign({},this.segments);this.segments[Object.keys(this.segments)[t]]=this.segments[Object.keys(this.segments)[t]].filter((function(t){return t.range0!=s&&t.range1!=a})),this.temp_segments=Object.assign({},this.segments),this.segments[Object.keys(this.segments)[t]]=b[Object.keys(b)[t]].filter((function(t){return t.range0==s&&t.range1==a})),console.log("step2...",s,a,this.temp_segments,this.segments[Object.keys(this.segments)[t]])}if(r&&!l){console.log("hello ch1 && !ch2..., range slider不變, 更改segment value");var k=this.segments[Object.keys(this.segments)[t]].find((function(t){return t.range0==s&&t.range1==a}));k.seg_id=parseInt(this.segment_values[t]),this.temp_segments=Object.assign({},this.segments)}if(!r&&!l){console.log("hello !ch1 && !ch2..., 新增range slider及segment value, 或刪除");var x={seg_id:parseInt(this.segment_values[t]),range0:s,range1:a,grid_layout:t+1,grid_station:this.my_key+1};this.segments[Object.keys(this.segments)[t]].push(x),this.temp_segments=Object.assign({},this.segments),this.segments[Object.keys(this.segments)[t]]=this.segments[Object.keys(this.segments)[t]].filter((function(t){return t.range0==s&&t.range1==a}))}var I=document.getElementsByClassName("container_tab1"),y=parseInt(this.segments[Object.keys(this.segments)[t]][0].range0),T=parseInt(this.segments[Object.keys(this.segments)[t]][0].range1);console.log("begin_p, end_p...",y,T);for(var D=y;D<=T;D++){var O=I[t].childNodes[D];this.selectedLamps[Object.keys(this.selectedLamps)[t]][D-1].value=!this.selectedLamps[Object.keys(this.selectedLamps)[t]][D-1].value;this.selectedLamps[Object.keys(this.selectedLamps)[t]][D-1].value?O.className+=" on":O.className="dot"}var S=s-1;if(isNaN(this.selectedLeds[Object.keys(this.selectedLeds)[t]][S].value)){var w=this.segments[Object.keys(this.segments)[t]].find((function(t){return parseInt(t.range0)==s&&parseInt(t.range1)==a}));this.selectedLeds[Object.keys(this.selectedLeds)[t]][S].value=w.seg_id.toString()}else this.selectedLeds[Object.keys(this.selectedLeds)[t]][S].value=".";console.log("$emit object..., ",this.temp_segments),this.$emit("closeLedStrip",this.my_key,t,this.temp_segments)}},eraseErrMsg:function(t){console.log("range data error..., index",t),this.errorMessages[Object.keys(this.errorMessages)[t]]=""},checkSegmentRange:function(t){if(0==this.segments[Object.keys(this.segments)[t]].length)return!0;var e=this.ranges[Object.keys(this.ranges)[t]][0],s=this.ranges[Object.keys(this.ranges)[t]][1],a=this.segments[Object.keys(this.segments)[t]].find((function(t){return t.range0==e&&t.range1==s}));return"undefined"!==typeof a},checkSegmentID:function(t){var e=this;if(0==this.segments[Object.keys(this.segments)[t]].length)return!0;var s=this.segments[Object.keys(this.segments)[t]].find((function(s){return parseInt(s.seg_id)==parseInt(e.segment_values[t])}));return"undefined"!==typeof s}}}),Jt=Gt,qt=(s("4a33"),Object(l["a"])(Jt,$t,zt,!1,null,"41e298fc",null)),Qt=qt.exports,Zt={name:"GridsForLed",components:{LedStrip:Qt,VueNumericInput:Nt.a},mixins:[_],mounted:function(){window.onpopstate=function(){console.log("press back button, good bye...")}},data:function(){return{currentUser:{},permDialog:!1,snackbar:!1,snackbar_color:"success",snackbar_right:!0,snackbar_top:!0,snackbar_info:"",snackbar_icon_color:"#adadad",dialog:!1,items:[{tab:"第1站料架",content:{}},{tab:"第2站料架",content:{}},{tab:"第3站料架",content:{}}],tab_index:0,rangErrMsg:"",errorMessages:{message1:"",message2:"",message3:"",message4:"",message5:""},min:1,max:30,ranges:{range1:[],range2:[],range3:[],range4:[],range5:[]},tab1_rans:{range1:[],range2:[],range3:[],range4:[],range5:[]},tab2_rans:{range1:[],range2:[],range3:[],range4:[],range5:[]},tab3_rans:{range1:[],range2:[],range3:[],range4:[],range5:[]},segment_values:[],selectedLeds:{led1:[],led2:[],led3:[],led4:[],led5:[]},selectedLamps:{led1:[],led2:[],led3:[],led4:[],led5:[]},segments:{segment1:[],segment2:[],segment3:[],segment4:[],segment5:[]},tab1_segs:{segments1:[],segments2:[],segments3:[],segments4:[],segments5:[]},tab2_segs:{segments1:[],segments2:[],segments3:[],segments4:[],segments5:[]},tab3_segs:{segments1:[],segments2:[],segments3:[],segments4:[],segments5:[]},myObject1:{segs:{},rans:{}},myObject2:{segs:{},rans:{}},myObject3:{segs:{},rans:{}},tab_totals:[],temp_desserts:[],editedItem:{grid_station:1,grid_layout:1,grid_seg_id:1},defaultItem:{grid_station:1,grid_layout:1,grid_seg_id:1},switchOnOff:!1,sw_on_str:"亮燈",sw_off_str:"熄燈",mqtt_topic:["station1","station2","station3"],load_SingleTable_ok:!1}},computed:{swString:function(){return this.switchOnOff?this.sw_on_str:this.sw_off_str}},watch:{load_SingleTable_ok:function(t){t&&(this.load_SingleTable_ok=!1,this.getTabsData())}},created:function(){this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),(0==this.currentUser.perm||this.currentUser.perm>1)&&(this.permDialog=!0);for(var t=0;t<this.max;t++){var e={value:"."};this.selectedLeds.led1.push(e)}for(var s=0;s<this.max;s++){var a={value:"."};this.selectedLeds.led2.push(a)}for(var o=0;o<this.max;o++){var i={value:"."};this.selectedLeds.led3.push(i)}for(var n=0;n<this.max;n++){var r={value:"."};this.selectedLeds.led4.push(r)}for(var l=0;l<this.max;l++){var c={value:"."};this.selectedLeds.led5.push(c)}for(var d=0;d<this.max;d++){var u={value:!1};this.selectedLamps.led1.push(u)}for(var g=0;g<this.max;g++){var m={value:!1};this.selectedLamps.led2.push(m)}for(var p=0;p<this.max;p++){var h={value:!1};this.selectedLamps.led3.push(h)}for(var _=0;_<this.max;_++){var v={value:!1};this.selectedLamps.led4.push(v)}for(var f=0;f<this.max;f++){var b={value:!1};this.selectedLamps.led5.push(b)}this.load_SingleTable_ok=!1,this.initAxios(),this.listGrids()},methods:{listGrids:function(){var t=this,e="/listGridsForLed";console.log("listGridsForLed, Axios get data..."),h.a.get(e).then((function(e){t.temp_desserts=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},getTabsData:function(){for(var t=this,e=5,s=this.temp_desserts.length,a=0;a<s;a++){var o=parseInt(this.temp_desserts[a].grid_station);switch(o){case 1:for(var i=function(e){t.tab1_segs[Object.keys(t.tab1_segs)[e]]=t.temp_desserts.filter((function(t){return 1==parseInt(t.grid_station)&&parseInt(t.grid_layout)==e+1}))},n=0;n<e;n++)i(n);for(var r=0;r<e;r++)this.tab1_segs[Object.keys(this.tab1_segs)[r]].length;break;case 2:for(var l=function(e){t.tab2_segs[Object.keys(t.tab2_segs)[e]]=t.temp_desserts.filter((function(t){return 2==parseInt(t.grid_station)&&parseInt(t.grid_layout)==e+1}))},c=0;c<e;c++)l(c);for(var d=0;d<e;d++)this.tab2_segs[Object.keys(this.tab2_segs)[d]].length;break;default:for(var u=function(e){t.tab3_segs[Object.keys(t.tab3_segs)[e]]=t.temp_desserts.filter((function(t){return 3==parseInt(t.grid_station)&&parseInt(t.grid_layout)==e+1}))},g=0;g<e;g++)u(g);for(var m=0;m<e;m++)this.tab3_segs[Object.keys(this.tab3_segs)[m]].length;break}}this.tab_totals[0]=0;for(var p=0;p<5;p++){var h=Object.keys(this.tab1_segs[Object.keys(this.tab1_segs)[p]]).length;this.tab_totals[0]=this.tab_totals[0]+h}console.log("tab1 :",this.tab_totals[0]),this.tab_totals[1]=0;for(var _=0;_<5;_++){var v=Object.keys(this.tab2_segs[Object.keys(this.tab2_segs)[_]]).length;this.tab_totals[1]=this.tab_totals[1]+v}console.log("tab2 :",this.tab_totals[1]),this.tab_totals[2]=0;for(var f=0;f<5;f++){var b=Object.keys(this.tab3_segs[Object.keys(this.tab3_segs)[f]]).length;this.tab_totals[2]=this.tab_totals[2]+b}console.log("tab3 :",this.tab_totals[2]),this.myObject1.segs=Object.assign({},this.tab1_segs),this.myObject2.segs=Object.assign({},this.tab2_segs),this.myObject3.segs=Object.assign({},this.tab3_segs);for(var k=0;k<e;k++)0!=this.tab1_segs[Object.keys(this.tab1_segs)[k]].length?(this.tab1_rans[Object.keys(this.tab1_rans)[k]][0]=parseInt(this.tab1_segs[Object.keys(this.tab1_segs)[k]][0].range0),this.tab1_rans[Object.keys(this.tab1_rans)[k]][1]=parseInt(this.tab1_segs[Object.keys(this.tab1_segs)[k]][0].range1)):(this.tab1_rans[Object.keys(this.tab1_rans)[k]][0]=1,this.tab1_rans[Object.keys(this.tab1_rans)[k]][1]=3),0!=this.tab2_segs[Object.keys(this.tab2_segs)[k]].length?(this.tab2_rans[Object.keys(this.tab2_rans)[k]][0]=parseInt(this.tab2_segs[Object.keys(this.tab2_segs)[k]][0].range0),this.tab2_rans[Object.keys(this.tab2_rans)[k]][1]=parseInt(this.tab2_segs[Object.keys(this.tab2_segs)[k]][0].range1)):(this.tab2_rans[Object.keys(this.tab2_rans)[k]][0]=1,this.tab2_rans[Object.keys(this.tab2_rans)[k]][1]=3),0!=this.tab3_segs[Object.keys(this.tab3_segs)[k]].length?(this.tab3_rans[Object.keys(this.tab3_rans)[k]][0]=parseInt(this.tab3_segs[Object.keys(this.tab3_segs)[k]][0].range0),this.tab3_rans[Object.keys(this.tab3_rans)[k]][1]=parseInt(this.tab3_segs[Object.keys(this.tab3_segs)[k]][0].range1)):(this.tab3_rans[Object.keys(this.tab3_rans)[k]][0]=1,this.tab3_rans[Object.keys(this.tab3_rans)[k]][1]=3);this.myObject1.rans=Object.assign({},this.tab1_rans),this.myObject2.rans=Object.assign({},this.tab2_rans),this.myObject3.rans=Object.assign({},this.tab3_rans),this.items[0].content=Object.assign({},this.myObject1),this.items[1].content=Object.assign({},this.myObject2),this.items[2].content=Object.assign({},this.myObject3)},getGridData:function(t,e,s){if(console.log("hello return from child component ...",t,e,s),0==t){this.tab1_segs[Object.keys(this.tab1_segs)[e]]=Object.assign([],s[Object.keys(s)[e]]),console.log("station1 new obj: ",this.tab1_segs[Object.keys(this.tab1_segs)[e]]),this.myObject1.segs=Object.assign({},this.tab1_segs),console.log("station1 new myObject1.segs: ",this.myObject1.segs),this.items[0].content=Object.assign({},this.myObject1),this.tab_totals[0]=0;for(var a=0;a<5;a++){var o=Object.keys(this.tab1_segs[Object.keys(this.tab1_segs)[a]]).length;this.tab_totals[0]=this.tab_totals[0]+o}}if(1==t){this.tab2_segs[Object.keys(this.tab2_segs)[e]]=Object.assign([],s[Object.keys(s)[e]]),console.log("station2 new obj: ",this.tab2_segs[Object.keys(this.tab2_segs)[e]]),this.myObject2.segs=Object.assign({},this.tab2_segs),console.log("station2 new myObject1.segs: ",this.myObject2.segs),this.items[1].content=Object.assign({},this.myObject2),this.tab_totals[1]=0;for(var i=0;i<5;i++){var n=Object.keys(this.tab2_segs[Object.keys(this.tab2_segs)[i]]).length;this.tab_totals[1]=this.tab_totals[1]+n}}if(2==t){console.log("return from station3 ...",s[Object.keys(s)[e]],this.tab3_segs[Object.keys(this.tab1_segs)[e]]),this.tab3_segs[Object.keys(this.tab3_segs)[e]]=Object.assign([],s[Object.keys(s)[e]]),console.log("station3 new obj: ",this.tab3_segs[Object.keys(this.tab3_segs)[e]]),this.myObject3.segs=Object.assign({},this.tab3_segs),console.log("station3 new myObject1.segs: ",this.myObject3.segs),this.items[2].content=Object.assign({},this.myObject3),this.tab_totals[2]=0;for(var r=0;r<5;r++){var l=Object.keys(this.tab3_segs[Object.keys(this.tab3_segs)[r]]).length;this.tab_totals[2]=this.tab_totals[2]+l}}},nextTabContent:function(t){console.log("tab index:",t),this.tab_index=t},closeCard:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},confirmCard:function(){var t={};0==this.tab_index&&(t=Object.assign({},this.tab1_segs),console.log("segment compare",t,this.tab1_segs)),1==this.tab_index&&(t=Object.assign({},this.tab2_segs),console.log("segment compare",t,this.tab2_segs)),2==this.tab_index&&(t=Object.assign({},this.tab3_segs),console.log("segment compare",t,this.tab3_segs));var e=t[Object.keys(t)[this.editedItem.grid_layout-1]].length;console.log("tab1_segs",this.editedItem.grid_layout,this.editedItem.grid_pos,t,"temp_len: ",e);for(var s=!0,a=0,o=0,i=0;i<e;i++){var n=parseInt(t[Object.keys(t)[this.editedItem.grid_layout-1]][i].seg_id);if(console.log("tab1_segs, layout",i+1,"  ",t[Object.keys(t)[this.editedItem.grid_layout-1]][i]),console.log("tab1_segs, layout, seg_id: ",n,this.editedItem.grid_pos),n==this.editedItem.grid_pos){a=t[Object.keys(t)[this.editedItem.grid_layout-1]][i].range0,o=t[Object.keys(t)[this.editedItem.grid_layout-1]][i].range1,s=!1;break}}if(console.log("tab1_segs step1",s,"  ",a,"  ",o),s)console.log("格位編號錯誤!"),this.snackbar_color="red accent-2",this.snackbar=!0,this.snackbar_info="格位編號錯誤!",this.snackbar_icon_color="#adadad";else{var r=this.editedItem.grid_layout;this.mqttForStation(r,a,o)}},mqttForStation:function(t,e,s){var a=this;return Object(Vt["a"])(Object(Bt["a"])().mark((function o(){var i,n,r,l,c;return Object(Bt["a"])().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return i="/mqtt/station",n=t.toString(),console.log("station: layout: "+n+" pos: "+e+" , "+s),r=a.switchOnOff?"on":"off",l={topic:a.mqtt_topic[a.tab_index],layout:n,pos_begin:e,pos_end:s,msg:r},o.prev=5,o.next=8,h.a.post(i,l);case 8:c=o.sent,console.log("mqtt ok",c.data.status),o.next=20;break;case 12:o.prev=12,o.t0=o["catch"](5),console.error(o.t0),console.log("通訊錯誤!"),a.snackbar_color="red accent-2",a.snackbar=!0,a.snackbar_info="通訊錯誤!",a.snackbar_icon_color="#adadad";case 20:case"end":return o.stop()}}),o,null,[[5,12]])})))()},connectMQTT:function(){console.log("connectMQTT()"),this.switchOnOff=!1,this.dialog=!0},saveData:function(){var t=this;console.log("---GridsForLed, click saveData---");var e="/updateGridsForLed",s={tab1_segs:this.tab1_segs,tab2_segs:this.tab2_segs,tab3_segs:this.tab3_segs};h.a.post(e,s).then((function(e){console.log("update grid data, return status: ",e.data.status),e.data.status?(t.tosterOK=!1,t.editedItem=Object.assign({},t.defaultItem)):t.tosterOK=!0})).catch((function(e){console.error(e),t.tosterOK=!0}))}}},Yt=Zt,Wt=(s("87b1"),Object(l["a"])(Yt,Kt,Lt,!1,null,"5d69b5d2",null)),Ht=Wt.exports,Xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",{attrs:{fluid:""}},[t.currentUser.perm>=1?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{staticClass:"pa-md-4 mt-5 mx-lg-auto",attrs:{"max-width":"35vw"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts,"item-class":t.setRowStyle,options:t.pagination,"footer-props":{itemsPerPageText:"每頁的資料筆數"}},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:""}},[s("v-toolbar-title",[t._v("組別資料")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-dialog",{attrs:{"max-width":"500px","content-class":"add_modalbox"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[s("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),a),[s("v-icon",{attrs:{left:"",dark:""}},[t._v("mdi-table-plus")]),t._v(" 新增資料 ")],1)]}}],null,!1,1287677061),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"組別",type:"text","prepend-icon":"mdi-account-group"},on:{focus:t.fieldFocus},model:{value:t.editedItem.dep_name,callback:function(e){t.$set(t.editedItem,"dep_name",e)},expression:"editedItem.dep_name"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.depErrMsg)}})],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.checkDataForSaveButton},on:{click:t.save}},[t._v("確定")]),s("v-tooltip",{attrs:{bottom:"","position-x":t.toster_pos_x,"position-y":t.toster_pos_y,color:"error"},model:{value:t.tosterOK,callback:function(e){t.tosterOK=e},expression:"tosterOK"}},[s("span",[t._v("組別資料重複!")])])],1)],1)],1),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[s("v-card",[s("v-card-title",{staticClass:"text-h5"},[t._v("確定刪除這筆資料?")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("刪除")]),s("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var a=e.item;return[s("v-icon",{staticClass:"mr-2",staticStyle:{color:"blue"},attrs:{size:"16"},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),s("v-icon",{staticStyle:{color:"red"},attrs:{size:"16"},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!0)})],1)],1):s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"500"},model:{value:t.permDialog,callback:function(e){t.permDialog=e},expression:"permDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("錯誤訊息!")]),s("v-card-text",[s("div",{staticClass:"text-h4 pa-12"},[t._v("權限不足...")])]),s("v-card-actions",{staticClass:"justify-end"},[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.permCloseFun}},[t._v(" 取消 ")])],1)],1)],1)],1)],1)],1)},te=[],ee={name:"Department",mixins:[_],mounted:function(){var t=this;window.onpopstate=function(){console.log("press back button, good bye...");var e=JSON.parse(localStorage.getItem("loginedUser"));e.setting_items_per_page=t.pagination.itemsPerPage,localStorage.setItem("loginedUser",JSON.stringify(e))}},data:function(){return{currentUser:{},permDialog:!1,dialog:!1,dialogDelete:!1,pagination:{},tosterOK:!1,toster_pos_x:1e3,toster_pos_y:350,toster_delay:3,depErrMsg:"",headers:[{text:"組    別",sortable:!0,value:"dep_name",width:"80%",align:"center"},{text:"Actions",sortable:!1,value:"actions",width:"20%"}],desserts:[],temp_desserts:[],editedIndex:-1,editedItem:{id:"",dep_name:""},defaultItem:{id:"",dep_name:""},load_SingleTable_ok:!1}},computed:{formTitle:function(){return-1===this.editedIndex?"新增資料":"編輯資料"},checkDataForSaveButton:function(){return!this.editedItem.dep_name||""!=this.depErrMsg}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()},load_SingleTable_ok:function(t){t&&(this.desserts=Object.assign([],this.temp_desserts))},"editedItem.dep_name":function(){var t=/^([a-zA-Z\u4e00-\u9fa5_.-]+)$/,e=this.editedItem.dep_name.search(t),s=this.editedItem.dep_name.length;e=0==s?0:e,this.depErrMsg="",this.depErrMsg=-1==e||s>12?"資料格式錯誤!":""}},created:function(){this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),0==this.currentUser.perm&&(this.permDialog=!0),this.pagination.itemsPerPage=this.currentUser.setting_items_per_page,this.load_SingleTable_ok=!1,this.initAxios(),this.listDepartment()},methods:{initialize:function(){this.load_SingleTable_ok=!1,this.listDepartment()},listDepartment:function(){var t=this,e="/listDepartments";console.log("listDepartments, Axios get data..."),h.a.get(e).then((function(e){t.temp_desserts=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},setRowStyle:function(t){return"style-1"},fieldFocus:function(){this.depErrMsg=""},editItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm:function(){this.removeDepartment(this.editedItem.id),this.tosterOK||(this.desserts.splice(this.editedIndex,1),console.log("deleteItem: ",this.editedItem),this.closeDelete())},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},removeDepartment:function(t){var e=this,s="/removeDepartment",a={ID:t};h.a.post(s,a).then((function(t){console.log("remove department status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},save:function(){console.log("click save button, editedIndex: ",this.editedIndex),-1==this.editedIndex?(this.createDepartment(this.editedItem),this.tosterOK||(this.desserts.push(this.editedItem),this.close())):(this.updateDepartment(this.editedItem),this.tosterOK||(Object.assign(this.desserts[this.editedIndex],this.editedItem),this.close()))},updateDepartment:function(t){var e=this;console.log("---click update_department data---",t);var s="/updateDepartment",a=Object.assign({},t);h.a.post(s,a).then((function(t){console.log("update department data status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},createDepartment:function(t){var e=this;console.log("---click create_department data---"),console.log("department object: ",t);var s="/createDepartment",a=Object.assign({},t);h.a.post(s,a).then((function(t){console.log("save department data status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},permCloseFun:function(){this.permDialog=!1,console.log("press permission Close Button..."),this.$router.push("/navbar")}}},se=ee,ae=(s("6717"),Object(l["a"])(se,Xt,te,!1,null,"33868aa0",null)),oe=ae.exports,ie=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",{attrs:{fluid:""}},[t.currentUser.perm>=1?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{staticClass:"pa-md-4  mt-5 mx-lg-auto",attrs:{width:"80vw"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts,"item-class":t.setRowStyle,options:t.pagination,"footer-props":{itemsPerPageText:"每頁的資料筆數"}},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:""}},[s("v-toolbar-title",[t._v("供應商資料")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-dialog",{attrs:{"max-width":"900px","content-class":"add_modalbox"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[s("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),a),[s("v-icon",{attrs:{left:"",dark:""}},[t._v("mdi-table-plus")]),t._v(" 新增資料 ")],1)]}}],null,!1,1287677061),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-text-field",{attrs:{label:"供應商代碼","prepend-icon":"mdi-numeric",readonly:"編輯資料"===t.formTitle},on:{focus:t.fieldFocus},model:{value:t.editedItem.sup_id,callback:function(e){t.$set(t.editedItem,"sup_id",e)},expression:"editedItem.sup_id"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.IDErrMsg)}})],1),s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-text-field",{attrs:{type:"text",label:"供應商名稱","prepend-icon":"mdi-home-city-outline"},on:{focus:t.fieldFocus},model:{value:t.editedItem.sup_name,callback:function(e){t.$set(t.editedItem,"sup_name",e)},expression:"editedItem.sup_name"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.supNameErrMsg)}})],1),s("v-col",{attrs:{cols:"12",md:"3"}})],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"6"}},[s("v-text-field",{attrs:{type:"text",label:"聯絡地址","prepend-icon":"mdi-map-marker-outline"},on:{focus:t.fieldFocus},model:{value:t.editedItem.sup_address,callback:function(e){t.$set(t.editedItem,"sup_address",e)},expression:"editedItem.sup_address"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.supAddressErrMsg)}})],1),s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-text-field",{attrs:{label:"聯絡人",type:"text","prepend-icon":"mdi-card-account-mail-outline"},on:{focus:t.fieldFocus},model:{value:t.editedItem.sup_contact,callback:function(e){t.$set(t.editedItem,"sup_contact",e)},expression:"editedItem.sup_contact"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.supContactErrMsg)}})],1),s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-text-field",{attrs:{label:"電話",type:"text","prepend-icon":"mdi-phone"},on:{focus:t.fieldFocus},model:{value:t.editedItem.sup_phone,callback:function(e){t.$set(t.editedItem,"sup_phone",e)},expression:"editedItem.sup_phone"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.supPhoneErrMsg)}})],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-combobox",{attrs:{items:t.items,chips:"",clearable:"",label:"主要產品",multiple:"",solo:""},scopedSlots:t._u([{key:"selection",fn:function(e){var a=e.attrs,o=e.item,i=e.select,n=e.selected;return[s("v-chip",t._b({attrs:{"input-value":n,close:"",label:"",outlined:"",color:"blue"},on:{click:i,"click:close":function(e){return t.removeChip(o)}}},"v-chip",a,!1),[t._v(" "+t._s(o)+" ")])]}}],null,!1,1622528561),model:{value:t.temp_product,callback:function(e){t.temp_product=e},expression:"temp_product"}})],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.checkDataForSaveButton},on:{click:t.save}},[t._v("確定")]),s("v-tooltip",{attrs:{bottom:"","position-x":t.toster_pos_x,"position-y":t.toster_pos_y,color:"error"},model:{value:t.tosterOK,callback:function(e){t.tosterOK=e},expression:"tosterOK"}},[s("span",[t._v("資材碼重複!")])])],1)],1)],1),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[s("v-card",[s("v-card-title",{staticClass:"text-h5"},[t._v("確定刪除這筆資料?")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("刪除")]),s("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.sup_products",fn:function(e){var a=e.item;return t._l(a.sup_products,(function(e,a){return s("v-chip",{key:a,staticClass:"ma-2",attrs:{small:""}},[t._v(" "+t._s(t.items[e-1])+" ")])}))}},{key:"item.actions",fn:function(e){var a=e.item;return[s("v-icon",{staticClass:"mr-2",staticStyle:{color:"blue"},attrs:{size:"16"},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),s("v-icon",{staticStyle:{color:"red"},attrs:{size:"16"},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!0)})],1)],1):s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"500"},model:{value:t.permDialog,callback:function(e){t.permDialog=e},expression:"permDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("錯誤訊息!")]),s("v-card-text",[s("div",{staticClass:"text-h4 pa-12"},[t._v("使用這項功能, 請通知管理人員...")])]),s("v-card-actions",{staticClass:"justify-end"},[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.permCloseFun}},[t._v(" 取消 ")])],1)],1)],1)],1)],1)],1)},ne=[],re=(s("00b4"),s("c740"),{name:"Supplier",mixins:[_],mounted:function(){var t=this;window.onpopstate=function(){console.log("press back button, good bye...");var e=JSON.parse(localStorage.getItem("loginedUser"));e.setting_items_per_page=t.pagination.itemsPerPage,localStorage.setItem("loginedUser",JSON.stringify(e))}},data:function(){return{currentUser:{},items:[],temp_items:[],temp_product:[],permDialog:!1,dialog:!1,dialogDelete:!1,pagination:{},tosterOK:!1,toster_pos_x:1e3,toster_pos_y:400,toster_delay:3,IDErrMsg:"",supNameErrMsg:"",supContactErrMsg:"",supPhoneErrMsg:"",supAddressErrMsg:"",headers:[{text:"公司名稱",sortable:!0,value:"sup_name",width:"17%",align:"left"},{text:"聯絡地址",sortable:!0,value:"sup_address",width:"220px",align:"left"},{text:"聯絡人",sortable:!1,value:"sup_contact",width:"70px",align:"left"},{text:"電話",sortable:!1,value:"sup_phone",width:"90px",align:"left"},{text:"主要產品",sortable:!1,value:"sup_products",width:"380px",align:"center"},{text:"Actions",sortable:!1,value:"actions",width:"80px"}],desserts:[],temp_desserts:[],editedIndex:-1,editedItem:{sup_id:"",sup_name:"",sup_address:"",sup_contact:"",sup_phone:"",sup_products:[]},defaultItem:{sup_id:"",sup_name:"",sup_address:"",sup_contact:"",sup_phone:"",sup_products:[]},load_SingleTable_ok:!1,load_2thTable_ok:!1}},computed:{formTitle:function(){return-1===this.editedIndex?"新增資料":"編輯資料"},checkDataForSaveButton:function(){return!(this.editedItem.sup_id&&this.editedItem.sup_name&&this.editedItem.sup_contact&&this.editedItem.sup_address&&this.editedItem.sup_phone&&this.temp_product.length>0&&""==this.IDErrMsg&&""==this.supNameErrMsg&&""==this.supContactErrMsg&&""==this.supAddressErrMsg&&""==this.supPhoneErrMsg)}},watch:{dialog:function(t){!t||this.fieldFocus(),t||this.close()},dialogDelete:function(t){t||this.closeDelete()},"editedItem.sup_id":function(){var t=/^\d+$/,e=t.test(this.editedItem.sup_id);this.IDErrMsg="",e&&this.editedItem.sup_id.length<5&&this.editedItem.sup_id.length>0?this.IDErrMsg="":0!=this.editedItem.sup_id.length&&(this.IDErrMsg="資料格式錯誤!")},"editedItem.sup_name":function(){var t=/^([a-zA-Z\u4e00-\u9fa5_.-]+)$/,e=this.editedItem.sup_name.search(t),s=this.editedItem.sup_name.length;e=0==s?0:e,this.supNameErrMsg="",this.supNameErrMsg=-1==e||s>40?"資料格式錯誤!":""},"editedItem.sup_contact":function(){var t=/^([a-zA-Z\u4e00-\u9fa5_.-]+)$/,e=this.editedItem.sup_contact.search(t),s=this.editedItem.sup_contact.length;e=0==s?0:e,this.supContactErrMsg="",this.supContactErrMsg=-1==e||s>10?"資料格式錯誤!":""},"editedItem.sup_phone":function(){var t=/^(0[2-8]{1,2}-?|\(0[2-8]{1,2}\))\d{3,4}-?\d{4}|09\d{2}(\d{6}|-\d{3}-\d{3})$/,e=this.editedItem.sup_phone.search(t),s=this.editedItem.sup_phone.replace(/\D/g,"");this.supPhoneErrMsg="",-1==e||s.length>10?this.supPhoneErrMsg="資料格式錯誤!":this.supPhoneErrMsg=""},"editedItem.sup_address":function(){this.supAddressErrMsg="",this.editedItem.sup_address.length>80?this.supAddressErrMsg="資料格式錯誤!":this.supAddressErrMsg=""},load_SingleTable_ok:function(t){t&&(this.desserts=Object.assign([],this.temp_desserts))},load_2thTable_ok:function(t){t&&(this.items=Object.assign([],this.temp_items),this.load_SingleTable_ok=!1,this.listSuppliers())}},created:function(){this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),0==this.currentUser.perm&&(this.permDialog=!0),this.pagination.itemsPerPage=this.currentUser.setting_items_per_page,this.load_2thTable_ok=!1,this.initAxios(),this.listProducts()},methods:{initialize:function(){this.load_2thTable_ok=!1,this.listProducts()},listProducts:function(){var t=this,e="/listProducts";console.log("listProducts, Axios get data..."),h.a.get(e).then((function(e){t.temp_items=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_2thTable_ok=!0})).catch((function(e){console.error(e),t.load_2thTable_ok=!1}))},listSuppliers:function(){var t=this,e="/listSuppliers";console.log("listSuppliers, Axios get data..."),h.a.get(e).then((function(e){t.temp_desserts=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},setRowStyle:function(t){return"style-1"},fieldFocus:function(){this.IDErrMsg="",this.supNameErrMsg="",this.supContactErrMsg="",this.supPhoneErrMsg="",this.supAddressErrMsg=""},editItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.temp_product=[];for(var e=0;e<this.editedItem.sup_products.length;e++)this.temp_product.push(this.items[this.editedItem.sup_products[e]-1]);this.dialog=!0},deleteItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm:function(){this.removeSupplier(this.editedItem.sup_id),this.tosterOK||(this.desserts.splice(this.editedIndex,1),console.log("deleteItem: ",this.editedItem),this.closeDelete())},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1})),this.temp_product=[]},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1})),this.temp_product=[]},removeSupplier:function(t){var e=this,s="/removeSupplier",a={ID:t};h.a.post(s,a).then((function(t){console.log("remove supplier status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},save:function(){var t=this;console.log("click save button, editedIndex: ",this.editedIndex),this.editedItem.sup_products=[];for(var e=this.temp_product.length,s=0;s<e;s++){var a=this.items.findIndex((function(e){return e===t.temp_product[s]}));this.editedItem.sup_products.push(a+1)}-1==this.editedIndex?(this.createSupplier(this.editedItem),this.tosterOK||(this.desserts.push(this.editedItem),this.close())):(this.updateSupplier(this.editedItem),this.tosterOK||(Object.assign(this.desserts[this.editedIndex],this.editedItem),this.close()))},removeChip:function(t){this.temp_product.splice(this.temp_product.indexOf(t),1),this.temp_product=Object(Dt["a"])(this.temp_product)},updateSupplier:function(t){var e=this;console.log("---click update_supplier data---",t);var s="/updateSupplier",a=Object.assign({},t);h.a.post(s,a).then((function(t){console.log("update supplier data status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},createSupplier:function(t){var e=this;console.log("---click create_reagent data---"),console.log("supplier object: ",t);var s="/createSupplier",a=Object.assign({},t);h.a.post(s,a).then((function(t){console.log("save supplier data status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t)}))},permCloseFun:function(){this.permDialog=!1,console.log("press permission Close Button..."),this.$router.push("/navbar")}}}),le=re,ce=(s("7fe2"),Object(l["a"])(le,ie,ne,!1,null,"0abe02dc",null)),de=ce.exports,ue=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",{attrs:{fluid:""}},[t.currentUser.perm>=1?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{staticClass:"pa-md-4 mt-5 mx-lg-auto",attrs:{"max-width":"35vw"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts,"item-class":t.setRowStyle,options:t.pagination,"footer-props":{itemsPerPageText:"每頁的資料筆數"}},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:""}},[s("v-toolbar-title",[t._v("產品類別資料")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-dialog",{attrs:{"max-width":"500px","content-class":"add_modalbox"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[s("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),a),[s("v-icon",{attrs:{left:"",dark:""}},[t._v("mdi-table-plus")]),t._v(" 新增資料 ")],1)]}}],null,!1,1287677061),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{label:"類別名稱",type:"text","prepend-icon":"mdi-format-list-bulleted-type"},on:{focus:t.fieldFocus},model:{value:t.editedItem.prd_name,callback:function(e){t.$set(t.editedItem,"prd_name",e)},expression:"editedItem.prd_name"}}),s("small",{staticClass:"msgErr",domProps:{textContent:t._s(t.prdErrMsg)}})],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.checkDataForSaveButton},on:{click:t.save}},[t._v("確定")]),s("v-tooltip",{attrs:{bottom:"","position-x":t.toster_pos_x,"position-y":t.toster_pos_y,color:"error"},model:{value:t.tosterOK,callback:function(e){t.tosterOK=e},expression:"tosterOK"}},[s("span",[t._v("資材碼重複!")])])],1)],1)],1),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[s("v-card",[s("v-card-title",{staticClass:"text-h5"},[t._v("確定刪除這筆資料?")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("刪除")]),s("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var a=e.item;return[s("v-icon",{staticClass:"mr-2",staticStyle:{color:"blue"},attrs:{size:"16"},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),s("v-icon",{staticStyle:{color:"red"},attrs:{size:"16"},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!0)})],1)],1):s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"500"},model:{value:t.permDialog,callback:function(e){t.permDialog=e},expression:"permDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("錯誤訊息!")]),s("v-card-text",[s("div",{staticClass:"text-h4 pa-12"},[t._v("使用這項功能, 請通知管理人員...")])]),s("v-card-actions",{staticClass:"justify-end"},[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.permCloseFun}},[t._v(" 取消 ")])],1)],1)],1)],1)],1)],1)},ge=[],me={name:"SupplierForProduct",mixins:[_],mounted:function(){var t=this;window.onpopstate=function(){console.log("press back button, good bye...");var e=JSON.parse(localStorage.getItem("loginedUser"));e.setting_items_per_page=t.pagination.itemsPerPage,localStorage.setItem("loginedUser",JSON.stringify(e))}},data:function(){return{currentUser:{},permDialog:!1,dialog:!1,dialogDelete:!1,pagination:{},tosterOK:!1,toster_pos_x:1e3,toster_pos_y:400,toster_delay:3,prdErrMsg:"",headers:[{text:"產品類別",sortable:!0,value:"prd_name",width:"80%",align:"center"},{text:"Actions",sortable:!1,value:"actions",width:"20%"}],desserts:[],temp_desserts:[],editedIndex:-1,editedItem:{id:"",prd_name:""},defaultItem:{id:"",prd_name:""},load_SingleTable_ok:!1}},computed:{formTitle:function(){return-1===this.editedIndex?"新增資料":"編輯資料"},checkDataForSaveButton:function(){return!this.editedItem.prd_name||""!=this.prdErrMsg}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()},load_SingleTable_ok:function(t){t&&(this.desserts=Object.assign([],this.temp_desserts))},"editedItem.prd_name":function(){var t=/^([a-zA-Z\u4e00-\u9fa5_.-]+)$/,e=this.editedItem.prd_name.search(t),s=this.editedItem.prd_name.length;e=0==s?0:e,this.prdErrMsg="",this.prdErrMsg=-1==e||s>12?"資料格式錯誤!":""}},created:function(){this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),0==this.currentUser.perm&&(this.permDialog=!0),this.pagination.itemsPerPage=this.currentUser.setting_items_per_page,this.load_SingleTable_ok=!1,this.initAxios(),this.listProductsByObj()},methods:{initialize:function(){this.load_SingleTable_ok=!1,this.listProductsByObj()},listProductsByObj:function(){var t=this,e="/listProductsByObj";console.log("listProductsByObj, Axios get data..."),h.a.get(e).then((function(e){t.temp_desserts=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},setRowStyle:function(t){return"style-1"},fieldFocus:function(){this.prdErrMsg=""},editItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm:function(){this.removeProduct(this.editedItem.id),this.tosterOK||(this.desserts.splice(this.editedIndex,1),console.log("deleteItem: ",this.editedItem),this.closeDelete())},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},removeProduct:function(t){var e=this,s="/removeProduct",a={ID:t};h.a.post(s,a).then((function(t){console.log("remove product status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},save:function(){console.log("click save button, editedIndex: ",this.editedIndex),-1==this.editedIndex?(this.createProduct(this.editedItem),this.tosterOK||(this.desserts.push(this.editedItem),this.close())):(this.updateProduct(this.editedItem),this.tosterOK||(Object.assign(this.desserts[this.editedIndex],this.editedItem),this.close()))},updateProduct:function(t){var e=this;console.log("---click update_product data---",t);var s="/updateProduct",a=Object.assign({},t);h.a.post(s,a).then((function(t){console.log("update product data status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},createProduct:function(t){var e=this;console.log("---click create_product data---"),console.log("product object: ",t);var s="/createProduct",a=Object.assign({},t);h.a.post(s,a).then((function(t){console.log("save product data status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},permCloseFun:function(){this.permDialog=!1,console.log("press permission Close Button..."),this.$router.push("/navbar")}}},pe=me,he=(s("ea96"),Object(l["a"])(pe,ue,ge,!1,null,"1c668195",null)),_e=he.exports,ve=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",{attrs:{fluid:""}},[1==t.currentUser.perm?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{staticClass:"pa-md-4  mt-5 mx-lg-auto",attrs:{width:"62vw"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts,"item-key":"name",search:t.search,"custom-filter":t.filterOnlyCapsText,options:t.pagination,"footer-props":{itemsPerPageText:"每頁的資料筆數"}},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:""}},[s("v-toolbar-title",[t._v("人員權限資料")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-text-field",{staticClass:"mx-4",attrs:{label:"搜尋(大寫英文)"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]},proxy:!0},{key:"item.perm_checkboxForSystem",fn:function(e){var a=e.item;return[s("v-simple-checkbox",{attrs:{color:"indigo"},on:{input:function(e){return t.savePermissions(a)}},model:{value:a.perm_checkboxForSystem,callback:function(e){t.$set(a,"perm_checkboxForSystem",e)},expression:"item.perm_checkboxForSystem"}})]}},{key:"item.perm_checkboxForAdmin",fn:function(e){var a=e.item;return[s("v-simple-checkbox",{attrs:{color:"indigo"},on:{input:function(e){return t.savePermissions(a)}},model:{value:a.perm_checkboxForAdmin,callback:function(e){t.$set(a,"perm_checkboxForAdmin",e)},expression:"item.perm_checkboxForAdmin"}})]}},{key:"item.perm_checkboxForMember",fn:function(e){var a=e.item;return[s("v-simple-checkbox",{attrs:{color:"indigo"},on:{input:function(e){return t.savePermissions(a)}},model:{value:a.perm_checkboxForMember,callback:function(e){t.$set(a,"perm_checkboxForMember",e)},expression:"item.perm_checkboxForMember"}})]}},{key:"body.append",fn:function(){return[s("tr",[s("td"),s("td"),s("td"),s("td",{attrs:{colspan:"3"}},[s("v-checkbox",{staticClass:"myLabel",attrs:{color:"primary","hide-details":"",label:"顯示系統"},model:{value:t.filter_system,callback:function(e){t.filter_system=e},expression:"filter_system"}})],1)])]},proxy:!0},{key:"no-data",fn:function(){return[s("v-btn",{attrs:{color:"primary"},on:{click:t.initialize}},[t._v("Reset")])]},proxy:!0}],null,!1,4015294003)})],1)],1):s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"500"},model:{value:t.permDialog,callback:function(e){t.permDialog=e},expression:"permDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("錯誤訊息!")]),s("v-card-text",[s("div",{staticClass:"text-h4 pa-12"},[t._v("權限不足...")])]),s("v-card-actions",{staticClass:"justify-end"},[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.permCloseFun}},[t._v(" 取消 ")])],1)],1)],1)],1)],1)],1)},fe=[],be={name:"Permission",mixins:[_],mounted:function(){var t=this;window.onpopstate=function(){console.log("press back button, good bye...");var e=JSON.parse(localStorage.getItem("loginedUser"));e.setting_items_per_page=t.pagination.itemsPerPage,localStorage.setItem("loginedUser",JSON.stringify(e))}},data:function(){return{currentUser:{},permDialog:!1,filter_system:!1,filter_admin:!1,filter_member:!1,search:"",myIndex:0,desserts:[],temp_desserts:[],pagination:{},tosterOK:!1,editedIndex:-1,editedItem:{},load_SingleTable_ok:!1}},computed:{headers:function(){var t=this;return[{text:"員工編號",sortable:!0,value:"perm_empID",width:"20%",align:"start"},{text:"姓名",sortable:!1,value:"perm_empName",width:"15%"},{text:"組別",sortable:!0,value:"perm_empDep",width:"20%"},{text:"系統",sortable:!0,value:"perm_checkboxForSystem",width:"15%",filter:function(e){return!!t.filter_system||(console.log("hello system...",e),!e||void 0)}},{text:"管理者",sortable:!0,value:"perm_checkboxForAdmin",width:"15%"},{text:"使用者",sortable:!1,value:"perm_checkboxForMember",width:"15%"}]}},watch:{load_SingleTable_ok:function(t){t&&(this.desserts=Object.assign([],this.temp_desserts))}},created:function(){this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),(0==this.currentUser.perm||this.currentUser.perm>1)&&(this.permDialog=!0),this.pagination.itemsPerPage=this.currentUser.setting_items_per_page,this.load_SingleTable_ok=!1,this.initAxios(),this.listPermissions()},methods:{initialize:function(){this.load_SingleTable_ok=!1,this.listPermissions()},listPermissions:function(){var t=this,e="/listPermissions";console.log("Axios get data from permission table..."),h.a.get(e).then((function(e){t.temp_desserts=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},savePermissions:function(t){console.log("item: ",t),this.editedIndex=this.desserts.indexOf(t),this.updatePermissions(t),this.tosterOK||Object.assign(this.desserts[this.editedIndex],this.editedItem)},updatePermissions:function(t){var e=this;console.log("---click checkbox for update_permissions data---",t);var s="/updatePermissions",a=Object.assign({},t);h.a.post(s,a).then((function(t){console.log("update permissions data status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},filterOnlyCapsText:function(t,e,s){return null!=t&&null!=e&&"string"===typeof t&&-1!==t.toString().toLocaleUpperCase().indexOf(e)},permCloseFun:function(){this.permDialog=!1,console.log("press permission Close Button..."),this.$router.push("/navbar")}}},ke=be,xe=(s("8501"),Object(l["a"])(ke,ve,fe,!1,null,"0d7289e4",null)),Ie=xe.exports,ye=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",{attrs:{fluid:""}},[t.currentUser.perm>=1?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{attrs:{width:"86vw"}},[s("v-data-table",{attrs:{headers:t.headers,items:t.desserts,"item-class":t.setRowStyle,options:t.pagination,"footer-props":{itemsPerPageText:"每頁的資料筆數"}},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:""}},[s("v-toolbar-title",[t._v("入庫標籤資料")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-dialog",{attrs:{"max-width":"800px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[s("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),a),[s("v-icon",{attrs:{left:"",dark:""}},[t._v("mdi-table-plus")]),t._v(" 新增資料 ")],1)]}}],null,!1,1287677061),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",[s("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))])]),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-tooltip",{attrs:{top:"",color:"error"},scopedSlots:t._u([{key:"activator",fn:function(e){e.on,e.attrs;return[s("v-text-field",{attrs:{value:t.stockInTag_EmpID,label:"員工編號",readonly:""},model:{value:t.editedItem.stockInTag_EmpID,callback:function(e){t.$set(t.editedItem,"stockInTag_EmpID",e)},expression:"editedItem.stockInTag_EmpID"}})]}}],null,!1,2250279981),model:{value:t.errorShowForEmployer,callback:function(e){t.errorShowForEmployer=e},expression:"errorShowForEmployer"}},[s("span",[t._v("員工編號錯誤!")])])],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{value:t.fromStockInTagEmpIdDisp,label:"入庫人員",readonly:""},model:{value:t.editedItem.stockInTag_Employer,callback:function(e){t.$set(t.editedItem,"stockInTag_Employer",e)},expression:"editedItem.stockInTag_Employer"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-text-field",t._g({attrs:{label:"入庫日期","prepend-icon":"event",readonly:"",value:t.fromDateDisp},model:{value:t.editedItem.stockInTag_Date,callback:function(e){t.$set(t.editedItem,"stockInTag_Date",e)},expression:"editedItem.stockInTag_Date"}},a))]}}],null,!1,2893374564),model:{value:t.fromDateMenu,callback:function(e){t.fromDateMenu=e},expression:"fromDateMenu"}},[s("v-date-picker",{attrs:{locale:"zh-TW",min:t.minDate,max:t.maxDate,"no-title":""},on:{input:function(e){t.fromDateMenu=!1}},model:{value:t.fromDateVal,callback:function(e){t.fromDateVal=e},expression:"fromDateVal"}})],1)],1)],1),s("v-row",[s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-tooltip",{attrs:{top:"",color:"error"},scopedSlots:t._u([{key:"activator",fn:function(e){e.on,e.attrs;return[s("v-text-field",{attrs:{label:"資材碼"},model:{value:t.editedItem.stockInTag_reagID,callback:function(e){t.$set(t.editedItem,"stockInTag_reagID",e)},expression:"editedItem.stockInTag_reagID"}})]}}],null,!1,726565454),model:{value:t.errorShowForReagName,callback:function(e){t.errorShowForReagName=e},expression:"errorShowForReagName"}},[s("span",[t._v("資材碼錯誤!")])])],1),s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-text-field",{attrs:{value:t.fromReagIdDisp,label:"品名",readonly:""},model:{value:t.editedItem.stockInTag_reagName,callback:function(e){t.$set(t.editedItem,"stockInTag_reagName",e)},expression:"editedItem.stockInTag_reagName"}})],1),s("v-col",{attrs:{cols:"12",md:"2"}},[s("v-text-field",{attrs:{value:t.editedItem.stockInTag_reagPeriod,label:"效期",readonly:""},model:{value:t.editedItem.stockInTag_reagPeriod,callback:function(e){t.$set(t.editedItem,"stockInTag_reagPeriod",e)},expression:"editedItem.stockInTag_reagPeriod"}})],1),s("v-col",{attrs:{cols:"12",md:"2"}},[s("v-text-field",{attrs:{value:t.editedItem.stockInTag_reagTemp,label:"保存溫度",readonly:""},model:{value:t.editedItem.stockInTag_reagTemp,callback:function(e){t.$set(t.editedItem,"stockInTag_reagTemp",e)},expression:"editedItem.stockInTag_reagTemp"}})],1),s("v-col",{attrs:{cols:"12",md:"2"}},[s("v-text-field",{attrs:{value:t.editedItem.stockInTag_batch,label:"批號"},model:{value:t.editedItem.stockInTag_batch,callback:function(e){t.$set(t.editedItem,"stockInTag_batch",e)},expression:"editedItem.stockInTag_batch"}})],1)],1)],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.checkDataForSaveButton},on:{click:t.save}},[t._v("確定")]),s("v-tooltip",{attrs:{bottom:"","position-x":t.toster_pos_x,"position-y":t.toster_pos_y,color:"error"},model:{value:t.tosterOK,callback:function(e){t.tosterOK=e},expression:"tosterOK"}},[s("span",[t._v("資材碼重複!")])])],1)],1)],1),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[s("v-card",[s("v-card-title",{staticClass:"text-h5"},[t._v("確定刪除這筆資料?")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("刪除")]),s("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.stockInTag_cnt",fn:function(e){var a=e.item;return[s("v-text-field",{attrs:{type:"number",min:"1",max:"20",oninput:"if(Number(this.value) > Number(this.max)) this.value = this.max;"},on:{input:function(e){return t.getdata(a)}},model:{value:a.stockInTag_cnt,callback:function(e){t.$set(a,"stockInTag_cnt",e)},expression:"item.stockInTag_cnt"}})]}},{key:"item.actions",fn:function(e){var a=e.item;return[s("v-icon",{staticClass:"mr-2",staticStyle:{color:"blue"},attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),s("v-icon",{staticStyle:{color:"red"},attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!0)})],1)],1):s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"500"},model:{value:t.permDialog,callback:function(e){t.permDialog=e},expression:"permDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("錯誤訊息!")]),s("v-card-text",[s("div",{staticClass:"text-h4 pa-12"},[t._v("使用這項功能, 請通知管理人員...")])]),s("v-card-actions",{staticClass:"justify-end"},[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.permCloseFun}},[t._v(" 取消 ")])],1)],1)],1)],1)],1)],1)},Te=[],De={name:"StockInTag",mixins:[_],mounted:function(){var t=this;window.onpopstate=function(){console.log("press back button, good bye...");var e=JSON.parse(localStorage.getItem("loginedUser"));e.setting_items_per_page=t.pagination.itemsPerPage,localStorage.setItem("loginedUser",JSON.stringify(e))}},data:function(){return{currentUser:{},permDialog:!1,stockInTag_EmpID:"",errorShowForEmployer:!1,errorShowForReagName:!1,fromDateMenu:!1,fromDateVal:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),minDate:"2012-07-01",maxDate:"2042-06-30",dialog:!1,dialogDelete:!1,pagination:{},tosterOK:!1,toster_pos_x:1e3,toster_pos_y:400,toster_delay:3,headers:[{text:"資材碼",sortable:!0,value:"stockInTag_reagID",width:"10%"},{text:"品名",sortable:!1,value:"stockInTag_reagName",width:"180px"},{text:"效期",sortable:!0,value:"stockInTag_reagPeriod",width:"90px"},{text:"保存溫度",sortable:!1,value:"stockInTag_reagTemp",width:"10%"},{text:"入庫日期",sortable:!1,value:"stockInTag_Date",width:"90px"},{text:"入庫人員",sortable:!1,value:"stockInTag_Employer",width:"10%"},{text:"批號",sortable:!1,value:"stockInTag_batch",width:"180px"},{text:"數量",sortable:!1,value:"stockInTag_cnt",width:"50px"},{text:"Actions",sortable:!1,value:"actions",width:"10%",align:"center"}],in_newTags:0,in_drafTags:0,desserts:[],temp_desserts:[],editedIndex:-1,editedItem:{stockInTag_reagID:"",stockInTag_reagName:"",stockInTag_reagPeriod:"",stockInTag_reagTemp:"",stockInTag_Date:"",stockInTag_EmpID:"",stockInTag_Employer:"",stockInTag_batch:"",stockInTag_cnt:""},defaultItem:{stockInTag_reagID:"",stockInTag_reagName:"",stockInTag_reagPeriod:"",stockInTag_reagTemp:"",stockInTag_Date:"",stockInTag_EmpID:"",stockInTag_Employer:"",stockInTag_batch:"",stockInTag_cnt:""},load_SingleTable_ok:!1}},computed:{formTitle:function(){return-1===this.editedIndex?"新增資料":"編輯資料"},fromStockInTagEmpIdDisp:function(){return""!=this.stockInTag_EmpID?(""==this.editedItem.stockInTag_EmpID&&(this.editedItem.stockInTag_EmpID=this.currentUser.empID,this.editedItem.stockInTag_Employer=this.currentUser.name),this.errorShowForEmployer=!1,this.editedItem.stockInTag_Employer):(this.this.editedItem.stockInTag_EmpID="",this.editedItem.stockInTag_Employer="",this.errorShowForEmployer=!0,"")},fromReagIdDisp:function(){var t=this;if(""!=this.editedItem.stockInTag_reagID){var e=this.temp_desserts.find((function(e){return e.stockInTag_reagID===t.editedItem.stockInTag_reagID}));return"undefined"!=e&&null!=e?(console.log("result 2...",e),this.editedItem.stockInTag_reagName=e.stockInTag_reagName,this.editedItem.stockInTag_reagPeriod=e.stockInTag_reagPeriod,this.editedItem.stockInTag_reagTemp=e.stockInTag_reagTemp,this.errorShowForReagName=!1,e.stockInTag_reagName):(this.editedItem.stockInTag_reagName="",this.editedItem.stockInTag_reagPeriod="",this.editedItem.stockInTag_reagTemp="",this.errorShowForReagName=!0,"")}},fromDateDisp:function(){if(""!=this.fromDateVal){var t=this.fromDateVal.substring(0,4),e=this.fromDateVal.substring(5,this.fromDateVal.length);e=e.replace("-","/");var s=parseInt(t);s-=1911,t=s.toString(),this.editedItem.stockInTag_Date=t+"/"+e}return this.fromDateVal},checkDataForSaveButton:function(){return!(this.editedItem.stockInTag_reagID&&this.editedItem.stockInTag_EmpID&&!this.errorShowForEmployer&&!this.errorShowForReagName)}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()},load_SingleTable_ok:function(t){console.log("load_SingleTable_ok, desserts: ",t),t&&(this.desserts=Object.assign([],this.temp_desserts),this.load_SingleTable_ok=!1)}},created:function(){this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),this.currentUser.perm<1&&(this.permDialog=!0),this.stockInTag_EmpID=this.currentUser.empID,this.pagination.itemsPerPage=this.currentUser.setting_items_per_page,this.load_SingleTable_ok=!1,this.initAxios(),this.listStockInData()},methods:{initialize:function(){this.load_SingleTable_ok=!1,this.listStockInData()},listStockInData:function(){var t=this,e="/listStockInData";console.log("listStockInData, Axios get data..."),h.a.get(e).then((function(e){t.temp_desserts=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},setRowStyle:function(t){return"style-1"},getdata:function(t){this.editedIndex=this.desserts.indexOf(t),console.log(this.desserts[this.editedIndex].stockInTag_cnt),this.temp_desserts[this.editedIndex].stockInTag_cnt=this.desserts[this.editedIndex].stockInTag_cnt,this.updateStockInByCnt(this.desserts[this.editedIndex])},editItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0,console.log("edit item: ",t,this.editedItem)},deleteItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.editedItem=Object.assign({},t),this.dialogDelete=!0,console.log("delete item: ",t,this.editedItem)},deleteItemConfirm:function(){this.removeStockIn(this.editedItem),this.tosterOK||(this.desserts.splice(this.editedIndex,1),console.log("deleteItem: ",this.editedItem),this.closeDelete())},removeStockIn:function(t){var e=this;console.log("---click remove_stockIn data---",t);var s="/removeStockIn",a=Object.assign({},t);h.a.post(s,a).then((function(t){console.log("remove stockIn status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},save:function(){console.log("click save button, editedIndex: ",this.editedIndex),-1==this.editedIndex?(console.log("click save, add"),this.createStockIn(this.editedItem),this.tosterOK||(this.desserts.push(this.editedItem),this.in_drafTags++,this.close())):(console.log("click save, update"),this.updateStockIn(this.editedItem),this.tosterOK||(Object.assign(this.desserts[this.editedIndex],this.editedItem),this.close()))},updateStockIn:function(t){var e=this;console.log("---click update_stockIn data---",t);var s="/updateStockIn",a=Object.assign({},t);h.a.post(s,a).then((function(t){console.log("update StockIn data, status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},updateStockInByCnt:function(t){var e=this;console.log("---click update_stockIn_by_cnt data---",t);var s="/updateStockInByCnt",a=Object.assign({},t);h.a.post(s,a).then((function(t){console.log("update StockIn data, status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},createStockIn:function(t){var e=this;console.log("---click createStockIn data---, editdata:",t);var s="/createStockIn";t.stockInTag_cnt=1;var a=Object.assign({},t);h.a.post(s,a).then((function(t){console.log("save StockIn data, status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},tags_draftButton:function(){console.log("press draf Button..."),localStorage.setItem("tags_draft",JSON.stringify(this.desserts)),this.$router.push({name:"Navbar",params:{in_drafTags:this.in_drafTags}})},tags_saveButton:function(){console.log("press save Button...")},permCloseFun:function(){this.permDialog=!1,console.log("press permission Close Button..."),this.$router.push("/navbar")}}},Oe=De,Se=(s("d47f"),Object(l["a"])(Oe,ye,Te,!1,null,"36083461",null)),we=Se.exports,je=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-sheet",{staticClass:"overflow-hidden",staticStyle:{position:"relative"}},[s("v-container",{attrs:{fluid:""}},[t.currentUser.perm>=1?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{attrs:{width:"90vw"}},[s("v-data-table",{attrs:{headers:t.headers,items:t.desserts,"item-class":t.setRowStyle,"single-select":t.singleSelect,"item-key":"stockInTag_reagID","show-select":"",options:t.pagination,"footer-props":{itemsPerPageText:"每頁的資料筆數"}},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:""}},[s("v-toolbar-title",{staticStyle:{height:"40px"}},[t._v("入庫標籤列印作業")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-btn",{staticClass:"mb-2",attrs:{color:"primary",depressed:"",disabled:!t.check_selected},on:{click:t.printSection}},[s("v-icon",{attrs:{left:"",dark:""}},[t._v("mdi-printer")]),t._v(" 預覽標籤 ")],1)],1)]},proxy:!0},{key:"item.stockInTag_cnt",fn:function(e){var a=e.item;return[s("v-text-field",{attrs:{type:"number",min:"1",max:"20",oninput:"if(Number(this.value) > Number(this.max)) this.value = this.max;"},on:{input:function(e){return t.getdata(a)}},model:{value:a.stockInTag_cnt,callback:function(e){t.$set(a,"stockInTag_cnt",e)},expression:"item.stockInTag_cnt"}})]}}],null,!0),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1):s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"500"},model:{value:t.permDialog,callback:function(e){t.permDialog=e},expression:"permDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("錯誤訊息!")]),s("v-card-text",[s("div",{staticClass:"text-h4 pa-12"},[t._v("使用這項功能, 請通知管理人員...")])]),s("v-card-actions",{staticClass:"justify-end"},[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.permCloseFun}},[t._v(" 取消 ")])],1)],1)],1)],1)],1),s("v-navigation-drawer",{attrs:{height:"100vh",width:"25vw",temporary:"",right:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[s("SideBar",{attrs:{sidebar:t.selected,drawer:t.drawer},on:{waitTags:t.onWaitTags}})],1)],1)],1)},Ee=[],Ce=(s("caad"),s("2532"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("MyBarcode",{attrs:{barcode_data:t.regFields},on:{pressPrint:t.onPressPrint}})],1)}),Pe=[],Ae=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",{ref:"barcode"},[s("v-container",{staticClass:"scroll-y"},[s("v-layout",{attrs:{"align-center":"","justify-center":"",id:"layout"}},[s("v-flex",{attrs:{xs12:""}},[s("v-col",{staticClass:"text-right"},[s("v-btn",{staticClass:"mb-2",attrs:{color:"primary",dark:""},on:{click:t.printBarcode}},[s("v-icon",{attrs:{left:"",dark:""}},[t._v("mdi-printer")]),t._v("列印 ")],1)],1),s("v-btn",{directives:[{name:"scroll",rawName:"v-scroll",value:t.onScroll,expression:"onScroll"},{name:"show",rawName:"v-show",value:t.fab,expression:"fab"}],attrs:{fab:"",dark:"",fixed:"",bottom:"",right:"",color:"primary"},on:{click:t.toTop}},[s("v-icon",[t._v("keyboard_arrow_up")])],1)],1)],1),s("v-layout",{attrs:{"align-center":"","justify-center":""}},[s("v-flex",{attrs:{xs12:""}},[s("v-card",{attrs:{id:"printMe"}},t._l(t.barcode_data,(function(e,a){return s("div",{key:a,staticClass:"container_barcode"},[s("ul",[s("li",[t._v(t._s(e.stockInTag_reagName))])]),s("barcode",{attrs:{value:e.stockInTag_reagID}}),s("div",{staticStyle:{"font-size":"10px",display:"flex","justify-content":"flex-start","margin-left":"20px"}},[t._v(" LOT: "+t._s(e.stockInTag_batch)+" ")]),s("div",{staticClass:"word"},[s("span",{staticStyle:{"font-size":"12px","margin-left":"20px",position:"relative",top:"-10px"}},[t._v(" 入庫日期: "+t._s(e.stockInTag_Date)+"      ")]),s("span",{staticStyle:{"font-size":"32px",position:"relative",top:"15px"}},[t._v(" "+t._s(e.stockInTag_alpha)+" ")])]),s("div",{staticStyle:{"font-size":"12px","font-weight":"600",display:"flex","justify-content":"flex-start","margin-left":"20px",position:"relative",top:"-15px"}},[t._v(" 入庫人員: "+t._s(e.stockInTag_Employer)+" ")]),s("div",{staticStyle:{"font-size":"12px",display:"flex","justify-content":"flex-start","margin-left":"20px",position:"relative",top:"-15px"}},[t._v(" 保存溫度: "+t._s(e.stockInTag_Employer)+" ")]),s("v-spacer")],1)})),0)],1)],1)],1)],1)},Ne=[],Ue=s("f579"),Fe=s.n(Ue),Re={name:"BarCode",mixins:[_],components:{barcode:Fe.a},props:["barcode_data"],mounted:function(){console.log("BarCode, mounted()..."),this.startTimer()},created:function(){console.log("BarCode, created()..."),this.initAxios()},computed:{},watch:{},data:function(){return{fab:!1,tosterOK:!1,myTimer:"",myTimerId:"",svg_change:!0}},destoyed:function(){clearInterval(this.myTimer)},beforeRouteLeave:function(t,e,s){clearInterval(this.myTimer),s()},methods:{printBarcode:function(){console.log("click, printBarcode()...",this.barcode_data),this.exportToCSV(),this.$emit("pressPrint",!0)},exportToCSV:function(){var t=this,e=Object.assign([],this.barcode_data),s=e.map((function(t){var e=t.stockInTag_reagID,s=t.stockInTag_batch,a=t.stockInTag_Date,o=t.stockInTag_Employer,i=t.stockInTag_reagTemp,n=t.stockInTag_alpha,r=t.stockInTag_cnt,l=t.stockInTag_reagName;return{stockInTag_reagID:e,stockInTag_batch:s,stockInTag_Date:a,stockInTag_Employer:o,stockInTag_reagTemp:i,stockInTag_alpha:n,stockInTag_cnt:r,name1:l.length>25?l.slice(0,25):l,name2:l.length>25?l.slice(25):" "}}));console.log("StockInTagPrint, exportToCSV, Axios post data..., ",e,s);var a="/exportToCSVForStockIn",o={blocks:s,count:s.length};h.a.post(a,o).then((function(e){console.log("export into csv status: ",e.data.status,e.data.outputs),e.data.status?t.tosterOK=!1:t.tosterOK=!0})).catch((function(e){console.error("axios error, code: ",e),t.tosterOK=!0}))},startTimer:function(){var t=this;this.myTimer=setInterval((function(){for(var e=document.getElementsByClassName("container_barcode"),s=0;s<e.length;s++){var a=e[s].childNodes[1].childNodes[0];a.setAttribute("height","90px"),t.svg_change=!1}var o=document.querySelector("#layout");if(o){var i=o.getBoundingClientRect().top;t.fab=i<=10}}),500),this.myTimerId=this.myTimer._id},onScroll:function(t){},toTop:function(){document.getElementById("layout").scrollIntoView()}}},Me=Re,Ke=(s("67ae"),Object(l["a"])(Me,Ae,Ne,!1,null,"2fbcb9e3",null)),Le=Ke.exports,Be={name:"RenderBarCode",components:{MyBarcode:Le},props:{sidebar:{type:Array,required:!0},drawer:{type:Boolean,required:!0}},data:function(){return{fields:[],show_barcode:!1,regFields:[],waiting_in_total_tags:0}},watch:{sidebar:function(t){this.fields.push(t),console.log("sidebar:",t),console.log("fields:",this.fields)},drawer:function(t){t&&(this.show_barcode=t,console.log("drawer ok!"),this.formField()),console.log("drawer:",t)}},created:function(){console.log("RenderBarCode, created()...")},mounted:function(){console.log("RenderBarCode, mounted()...")},computed:{},methods:{formField:function(){this.regFields=[];var t=this.fields.length;console.log("temp_len: ",t);for(var e=0;e<t;e++)if("undefined"!=typeof this.fields[t-1][e])for(var s=this.fields[t-1][e].stockInTag_cnt,a=0;a<s;a++)this.fields[t-1][e]["stockInTag_cnt"]=1,this.regFields.push(this.fields[t-1][e]);this.waiting_in_total_tags=this.regFields.length},onPressPrint:function(t){this.is_print_OK=t,this.is_print_OK&&this.$emit("waitTags",this.waiting_in_total_tags)}}},Ve=Be,$e=Object(l["a"])(Ve,Ce,Pe,!1,null,"63c8221c",null),ze=$e.exports,Ge={name:"StockInTagPrint",mixins:[_],components:{SideBar:ze},mounted:function(){var t=this;console.log("StockInTag, mounted()..."),this.root=document.documentElement,window.onpopstate=function(){console.log("press back button, good bye..."),t.total_tags=0,localStorage.setItem("totalTags",0);var e=JSON.parse(localStorage.getItem("loginedUser"));e.setting_items_per_page=t.pagination.itemsPerPage,localStorage.setItem("loginedUser",JSON.stringify(e))}},data:function(){return{currentUser:{},total_tags:0,permDialog:!1,stockInTag_EmpID:"",errorShowForEmployer:!1,errorShowForReagName:!1,tosterOK:!1,dialog:!1,drawer:!1,root:null,reload:!1,singleSelect:!1,selected:[],temp_selected:[],pagination:{},headers:[{text:"資材碼",sortable:!0,value:"stockInTag_reagID",width:"10%"},{text:"品名",sortable:!1,value:"stockInTag_reagName",width:"20%"},{text:"效期",sortable:!0,value:"stockInTag_reagPeriod",width:"10%"},{text:"保存溫度",sortable:!1,value:"stockInTag_reagTemp",width:"17%"},{text:"入庫日期",sortable:!1,value:"stockInTag_Date",width:"10%"},{text:"入庫人員",sortable:!1,value:"stockInTag_Employer",width:"15%"},{text:"批號",sortable:!1,value:"stockInTag_batch",width:"10%"},{text:"張數",sortable:!1,value:"stockInTag_cnt",width:"8%"}],in_drafTags:0,desserts:[],temp_desserts:[],editedIndex:-1,load_SingleTable_ok:!1}},computed:{check_selected:function(){return!(!Array.isArray(this.selected)||!this.selected.length)}},watch:{dialog:function(t){t||this.close()},load_SingleTable_ok:function(t){t&&(this.desserts=JSON.parse(JSON.stringify(this.temp_desserts)),this.load_SingleTable_ok=!1)},drawer:{handler:function(){var t=this;this.$nextTick((function(){if(t.drawer)console.log("disable scrollbar..."),t.root.style.setProperty("--bar","hidden"),t.reload=!0;else if(console.log("enable scrollbar..."),t.root.style.setProperty("--bar","scroll"),t.reload){var e=[];e=JSON.parse(JSON.stringify(t.temp_desserts)),t.desserts=Object.assign([],e),e=[],e=JSON.parse(JSON.stringify(t.temp_selected)),t.selected=Object.assign([],e),t.reload=!1}}))},immediate:!0},selected:function(t){this.temp_selected=JSON.parse(JSON.stringify(t))}},created:function(){console.log("StockInTag, created()..."),this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),this.currentUser.perm<1&&(this.permDialog=!0),this.stockInTag_EmpID=this.currentUser.empID,this.pagination.itemsPerPage=this.currentUser.setting_items_per_page,this.load_SingleTable_ok=!1,this.initAxios(),this.listStockInTagPrintData()},methods:{initialize:function(){this.load_SingleTable_ok=!1,this.listStockInTagPrintData()},listStockInTagPrintData:function(){var t=this,e="/listStockInTagPrintData";console.log("listStockInTagPrintData, Axios get data..."),h.a.get(e).then((function(e){t.temp_desserts=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},setRowStyle:function(t){return"style-for-data-table"},getdata:function(t){this.editedIndex=this.desserts.indexOf(t),console.log(this.desserts[this.editedIndex].stockInTag_cnt),this.temp_desserts[this.editedIndex].stockInTag_cnt=this.desserts[this.editedIndex].stockInTag_cnt,this.updateStockInByCnt(this.desserts[this.editedIndex])},updateStockInByCnt:function(t){var e=this;console.log("---click update_stockInTagPrint_by_cnt data---",t);var s="/updateStockInByCnt",a=Object.assign({},t);h.a.post(s,a).then((function(t){console.log("update StockInTagPrint data, status: ",t.data.status),t.data.status?(e.tosterOK=!1,e.editedItem=Object.assign({},e.defaultItem)):e.tosterOK=!0})).catch((function(t){console.error(t),e.tosterOK=!0}))},onWaitTags:function(t){var e=this;console.log("total count for tags: ",t),this.total_tags=t,localStorage.setItem("totalTags",this.total_tags),console.log("leave onWaitTags()..."),this.updateStockInByPrintFlag(),this.desserts=this.desserts.filter((function(t){return!e.selected.includes(t)}))},updateStockInByPrintFlag:function(){var t=this;console.log("---click update_stockIn_by_printFlag---");var e="/updateStockInByPrintFlag",s={blocks:this.selected,count:this.selected.length};h.a.post(e,s).then((function(e){console.log("update StockInTagPrint data, status: ",e.data.status),e.data.status?t.tosterOK=!1:t.tosterOK=!0})).catch((function(e){console.error(e),t.tosterOK=!0}))},printSection:function(){console.log("click, printSection()..."),this.drawer=!0},permCloseFun:function(){this.permDialog=!1,console.log("press permission Close Button..."),this.$router.push("/navbar")}}},Je=Ge,qe=(s("311a"),s("6047"),Object(l["a"])(Je,je,Ee,!1,null,"8eb0bb06",null)),Qe=qe.exports,Ze=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",{attrs:{fluid:""}},[s("v-snackbar",{attrs:{color:t.snackbar_color,right:t.snackbar_right,top:t.snackbar_top},scopedSlots:t._u([{key:"action",fn:function(e){e.attrs;return[s("v-btn",{attrs:{icon:"",color:t.snackbar_icon_color},on:{click:function(e){t.snackbar=!1}}},[s("v-icon",{attrs:{dark:""}},[t._v("mdi-close-circle")])],1)]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.snackbar_info)+" ")]),t.currentUser.perm>=1?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{staticClass:"overflow-hidden mx-auto mt-3",attrs:{width:"88vw"}},[s("v-toolbar",{attrs:{flat:"",color:"#7DA79D",height:"80"}},[s("v-row",{staticStyle:{"margin-bottom":"-36px","margin-top":"-12x"},attrs:{dense:""}},[s("v-col",{staticClass:"mr-1",staticStyle:{position:"relative",top:"-15px"},attrs:{cols:"12",md:"2"}},[s("v-select",{staticStyle:{position:"relative",top:"10px"},attrs:{items:t.reagentForSelect,label:"資材碼",dense:"",outlined:""},model:{value:t.stockInTag_reagID,callback:function(e){t.stockInTag_reagID=e},expression:"stockInTag_reagID"}})],1),s("v-col",{staticClass:"mr-2",attrs:{cols:"12",md:"4"}},[s("v-text-field",{staticStyle:{width:"370px !important","max-width":"370px !important"},attrs:{label:"品名",value:t.stockInTag_reagName,readonly:""},model:{value:t.stockInTag_reagName,callback:function(e){t.stockInTag_reagName=e},expression:"stockInTag_reagName"}})],1),s("v-col",{staticClass:"mr-2",staticStyle:{position:"relative",top:"5px",left:"20px","font-weight":"bold",width:"120px !important","max-width":"120px !important"},attrs:{cols:"12",md:"2"}},[t._v(" "+t._s(t.stockInTag_station)+"站/"+t._s(t.stockInTag_layout)+"層/"+t._s(t.stockInTag_pos)+"格 ")]),s("v-col",{staticStyle:{position:"relative",top:"5px"},attrs:{cols:"12",md:"1",align:"right"}},[s("span",{staticClass:"stockinStr",staticStyle:{display:"table-cell","vertical-align":"middle","font-weight":"bold","font-size":"1em"}},[t._v("入庫數量")])]),s("v-col",{staticClass:"pl-0 mx-1",staticStyle:{"max-width":"120px"},attrs:{cols:"12",md:"2",align:"left"}},[s("vue-numeric-input",{attrs:{min:1,max:t.stockInTag_max_cnt,step:1,size:"small",align:"center"},model:{value:t.stockInTag_cnt,callback:function(e){t.stockInTag_cnt=e},expression:"stockInTag_cnt"}})],1),s("v-col",{staticClass:"pl-0 mx-1",staticStyle:{"max-width":"70px","text-align":"center",position:"relative",top:"-10px"},attrs:{cols:"12",md:"1",align:"right"}},[s("img",{directives:[{name:"show",rawName:"v-show",value:""!=t.stockInTag_reagID,expression:"stockInTag_reagID!=''"}],staticStyle:{height:"3vw"},attrs:{src:t.home_url,alt:"Loading"},on:{click:t.redirect_to_mqtt}})]),s("v-col",{staticClass:"pl-0 mx-1",staticStyle:{"text-align":"center",position:"relative",top:"-12px"},attrs:{cols:"12",md:"1",align:"center"}},[s("v-btn",{directives:[{name:"show",rawName:"v-show",value:t.isOK,expression:"isOK"}],staticStyle:{"font-weight":"bold","font-size":"0.9em"},attrs:{color:"success",rounded:""},on:{click:t.redirect_ok}},[t._v("完成 ")])],1)],1)],1),s("v-sheet",{staticClass:"overflow-y-auto",attrs:{"max-height":"600"}},[s("v-container",[s("v-list",{attrs:{"three-line":""}},[s("v-list-item-group",{attrs:{mandatory:"",color:"indigo"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[t._l(t.items,(function(e,a){return[s("v-list-item",{scopedSlots:t._u([{key:"default",fn:function(o){var i=o.active;return[s("v-list-item-content",[s("v-list-item-title",{staticClass:"font-weight-bold"},[s("span",[t._v("資材碼:"+t._s(e.stockInTag_reagID))]),t._v("   "),s("span",[t._v("品名:"+t._s(e.stockInTag_reagName))]),t._v("   "),s("span",{staticClass:"text-decoration-underline"},[t._v("入庫數量: "+t._s(e.stockInTag_cnt))])]),s("v-list-item-subtitle",{staticClass:"mb-3",domProps:{textContent:t._s("效期:"+e.stockInTag_reagPeriod+"  保存溫度: "+e.stockInTag_reagTemp+"  批號: "+e.stockInTag_batch)}}),s("v-list-item-subtitle",{staticClass:"text--primary font-weight-bold",domProps:{textContent:t._s("入庫人員: "+e.stockInTag_Employer+"  入庫日期: "+e.stockInTag_Date)}})],1),s("v-list-item-action",{on:{click:function(e){return t.listActionClick(a,i)}}},[i?s("v-icon",{attrs:{color:"yellow darken-3"}},[t._v(" mdi-star ")]):s("v-icon",{attrs:{color:"grey lighten-1"}},[t._v(" mdi-star-outline ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:i,expression:"active"}]},[t._v(t._s(e.grid_station)+"站/"+t._s(e.grid_layout)+"層/"+t._s(e.grid_pos)+"格")])],1)]}}],null,!0)}),a<t.items.length-1?s("v-divider",{key:a}):t._e()]}))],2)],1)],1)],1)],1)],1):s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"500"},model:{value:t.permDialog,callback:function(e){t.permDialog=e},expression:"permDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("錯誤訊息!")]),s("v-card-text",[s("div",{staticClass:"text-h4 pa-12"},[t._v("使用這項功能, 請通知管理人員...")])]),s("v-card-actions",{staticClass:"justify-end"},[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.permCloseFun}},[t._v(" 取消 ")])],1)],1)],1)],1)],1)],1)},Ye=[],We=s("c198"),He=s.n(We),Xe=s("0ad9"),ts=s.n(Xe),es=s("291d"),ss=s.n(es),as=s("6dd9"),os=s.n(as),is=s("2ef0"),ns=s.n(is),rs={name:"StockIn",mixins:[_],components:{VueNumericInput:Nt.a},mounted:function(){var t=this;window.onpopstate=function(){console.log("press back button, good bye...");var e=JSON.parse(localStorage.getItem("loginedUser"));e.setting_items_per_page=t.pagination.itemsPerPage,localStorage.setItem("loginedUser",JSON.stringify(e))}},data:function(){return{currentUser:{},permDialog:!1,snackbar:!1,snackbar_color:"success",snackbar_right:!0,snackbar_top:!0,snackbar_info:"",snackbar_icon_color:"#adadad",default_home_url:He.a,home_url:He.a,home_url_R:ts.a,home_url_Y:ss.a,home_url_G:os.a,stockInTag_reagID:"",stockInTag_reagName:"",stockInTag_station:"",stockInTag_layout:"",stockInTag_pos:"",stockInTag_cnt:0,stockInTag_min_cnt:0,stockInTag_max_cnt:0,currentIndex:0,currentLedStation:1,currentLedLayout:1,currentLedPos:1,currentLedRange_begin:1,currentLedRange_end:2,pagination:{},grids:[],temp_grids:[],isSort:!0,isOK:!1,model:0,items:[],temp_items:[],reagentForSelect:[],mqtt_topic:["station1","station2","station3"],load_SingleTable_ok:!1,load_2thTable_ok:!1}},computed:{filteredItems:function(){var t=this,e=[];return e=ns.a.orderBy(this.items.filter((function(e){return e.stockInTag_reagID.toLowerCase().includes(t.stockInTag_reagID.toLowerCase())})),"stockInTag_reagID"),e}},watch:{stockInTag_reagID:function(t){this.fromReagIdDisp()},load_2thTable_ok:function(t){console.log("load_2thTable_ok, products: ",t),t&&(this.grids=Object.assign([],this.temp_grids),this.load_2thTable_ok=!1,this.addGrids())},load_SingleTable_ok:function(t){console.log("load_SingleTable_ok, desserts: ",t),t&&(this.items=Object.assign([],this.temp_items),this.load_SingleTable_ok=!1,this.listStockInGrids())}},created:function(){this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),0==this.currentUser.perm&&(this.permDialog=!0),this.pagination.itemsPerPage=this.currentUser.setting_items_per_page,this.load_SingleTable_ok=!1,this.initAxios(),this.listStockInItems()},methods:{initialize:function(){this.load_SingleTable_ok=!1,this.listStockInItems()},listStockInItems:function(){var t=this,e="/listStockInItems";console.log("listStockInItems, Axios get data..."),h.a.get(e).then((function(e){t.temp_items=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.reagentForSelect=t.temp_items.map((function(t){return t.stockInTag_reagID})),t.reagentForSelect=Object(Dt["a"])(new Set(t.reagentForSelect)),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},listStockInGrids:function(){var t=this,e="/listStockInGrids";console.log("listStockInGrids, Axios get data..."),h.a.get(e).then((function(e){t.temp_grids=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_2thTable_ok=!0})).catch((function(e){console.error(e),t.load_2thTable_ok=!1}))},mqttForStation:function(){var t=this;return Object(Vt["a"])(Object(Bt["a"])().mark((function e(){var s,a,o,i,n,r,l;return Object(Bt["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s="/mqtt/station",a=t.currentLedLayout,o=t.currentLedRange_begin,i=t.currentLedRange_end,console.log("station: layout: "+a+" pos: "+o+" , "+i),n="flash",r={topic:t.mqtt_topic[t.currentLedStation.parseInt()-1],layout:a,pos_begin:o,pos_end:i,msg:n},e.prev=7,e.next=10,h.a.post(s,r);case 10:l=e.sent,console.log("mqtt ok",l.data.status),e.next=22;break;case 14:e.prev=14,e.t0=e["catch"](7),console.error(e.t0),console.log("通訊錯誤!"),t.snackbar_color="red accent-2",t.snackbar=!0,t.snackbar_info="通訊錯誤!",t.snackbar_icon_color="#adadad";case 22:case"end":return e.stop()}}),e,null,[[7,14]])})))()},listActionClick:function(t,e){console.log("list action: ",t,e),this.currentIndex=t,this.currentLedStation=this.items[t].grid_station,this.currentLedLayout=this.items[t].grid_layout,this.currentLedPos=this.items[t].grid_pos,this.currentLedRange_begin=this.items[t].range0,this.currentLedRange_end=this.items[t].range1,this.isSort=!1,e?(this.stockInTag_cnt=0,this.stockInTag_max_cnt=0,this.stockInTag_min_cnt=0,this.stockInTag_reagID="",this.stockInTag_reagName="",this.stockInTag_station="",this.stockInTag_layout="",this.stockInTag_pos=""):(this.stockInTag_cnt=this.items[t].stockInTag_cnt,this.stockInTag_max_cnt=this.items[t].stockInTag_cnt,this.stockInTag_min_cnt=1,this.stockInTag_reagID=this.items[t].stockInTag_reagID,this.stockInTag_reagName=this.items[t].stockInTag_reagName,this.stockInTag_station=this.items[t].grid_station,this.stockInTag_layout=this.items[t].grid_layout,this.stockInTag_pos=this.items[t].grid_pos)},fromReagIdDisp:function(){if(""!=this.stockInTag_reagID&&this.isSort){console.log("result 1-1...",this.items);var t=this.items.findIndex((function(t){return 1==t["active"]}));console.log("result 1-1-1...",t),-1!=t&&(this.items[t].active=!1);var e=this.items.map((function(t){return t.stockInTag_reagID})).indexOf(this.stockInTag_reagID),s=0;if(console.log("result 1-2...",e),-1!=e){var a=this.items.splice(e,1)[0];this.items.splice(s,0,a),this.model=0,this.items[0].active=!0,this.stockInTag_cnt=this.items[0].stockInTag_cnt,this.stockInTag_max_cnt=this.items[0].stockInTag_cnt,this.stockInTag_min_cnt=1,this.stockInTag_reagName=this.items[0].stockInTag_reagName,this.stockInTag_station=this.items[0].grid_station,this.stockInTag_layout=this.items[0].grid_layout,this.stockInTag_pos=this.items[0].grid_pos,this.currentIndex=0,this.currentLedStation=this.items[0].grid_station,this.currentLedLayout=this.items[0].grid_layout,this.currentLedPos=this.items[0].grid_pos}}else this.isSort=!0,""==this.stockInTag_reagID&&(this.stockInTag_cnt=0,this.stockInTag_max_cnt=0,this.stockInTag_min_cnt=0,this.stockInTag_reagName="",this.stockInTag_station="",this.stockInTag_layout="",this.stockInTag_pos="")},addGrids:function(){for(var t=this,e=function(e){var s=t.grids.find((function(s){return s.grid_reagID===t.items[e].stockInTag_reagID}));"undefined"!==typeof s&&(t.items[e].grid_station=s.grid_station,t.items[e].grid_layout=s.grid_layout,t.items[e].grid_pos=s.grid_pos)},s=0;s<this.items.length;s++)e(s);this.stockInTag_cnt=this.items[this.model].stockInTag_cnt,this.stockInTag_max_cnt=this.items[this.model].stockInTag_cnt,this.stockInTag_min_cnt=1,this.stockInTag_reagID=this.items[this.model].stockInTag_reagID,this.stockInTag_reagName=this.items[this.model].stockInTag_reagName,this.stockInTag_station=this.items[this.model].grid_station,this.stockInTag_layout=this.items[this.model].grid_layout,this.stockInTag_pos=this.items[this.model].grid_pos,this.items[this.model].active=!0},redirect_to_mqtt:function(){console.log("hello click image button...",this.model),this.isOK=!0;var t=this.items[this.model].grid_station;switch(t){default:return void(this.home_url=this.home_url_R);case 1:return void(this.home_url=this.home_url_R);case 2:return void(this.home_url=this.home_url_Y);case 2:return void(this.home_url=this.home_url_G)}},redirect_ok:function(){if(this.isOK=!1,this.home_url=this.default_home_url,this.stockInTag_cnt=this.items[this.model].stockInTag_cnt){this.items.splice(this.model,1);this.model=this.model-1>=0?this.model-1:0,this.stockInTag_cnt=this.items[this.model].stockInTag_cnt,this.stockInTag_max_cnt=this.items[this.model].stockInTag_cnt,this.stockInTag_min_cnt=1,this.stockInTag_reagID=this.items[this.model].stockInTag_reagID,this.stockInTag_reagName=this.items[this.model].stockInTag_reagName,this.stockInTag_station=this.items[this.model].grid_station,this.stockInTag_layout=this.items[this.model].grid_layout,this.stockInTag_pos=this.items[this.model].grid_pos,this.items[this.model].active=!0}else this.items[this.model].stockInTag_cnt=this.items[this.model].stockInTag_cnt-this.stockInTag_cnt,this.stockInTag_cnt=this.items[this.model].stockInTag_cnt,this.stockInTag_max_cnt=this.items[this.model].stockInTag_cnt;this.mqttForStation()},permCloseFun:function(){this.permDialog=!1,console.log("press permission Close Button..."),this.$router.push("/navbar")}}},ls=rs,cs=(s("e4b1"),s("4f38"),Object(l["a"])(ls,Ze,Ye,!1,null,"07483c5a",null)),ds=cs.exports,us=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",{attrs:{fluid:""}},[t.currentUser.perm>=1?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{attrs:{width:"72vw"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts,"item-class":t.setRowStyle,options:t.pagination,"footer-props":{itemsPerPageText:"每頁的資料筆數"}},on:{"update:options":function(e){t.pagination=e},"current-items":t.currentItems,"click:row":t.booking_clicked},scopedSlots:t._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:""}},[s("v-toolbar-title",[t._v("出庫標籤資料")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-dialog",{attrs:{"max-width":"1000px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[s("v-btn",t._g(t._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),a),[s("v-icon",{attrs:{left:"",dark:""}},[t._v("mdi-table-plus")]),t._v("領料 ")],1)]}}],null,!1,3616999700),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",{attrs:{width:"82vw"}},[s("v-card-title",[s("span",{staticClass:"text-h5"},[t._v(t._s(t.formTitle))]),s("ul",{staticClass:"list-unstyled multi-steps"},[s("li",{class:{"is-active":t.active1},staticStyle:{"font-size":"16px","font-weight":"600"},attrs:{id:"step-1"}},[t._v(" 領料日期 "),s("div",{staticClass:"progress-bar progress-bar--success"},[s("div",{staticClass:"progress-bar__bar",class:{"progress-bar__trans":t.step_trans>0}})])]),s("li",{class:{"is-active":t.active2},staticStyle:{"font-size":"16px","font-weight":"600"},attrs:{id:"step-2"}},[t._v(" 主要產品 "),s("div",{staticClass:"progress-bar progress-bar--success"},[s("div",{staticClass:"progress-bar__bar",class:{"progress-bar__trans":t.step_trans>1}})])]),s("li",{class:{"is-active":t.active3},staticStyle:{"font-size":"16px","font-weight":"600"},attrs:{id:"step-3"}},[t._v(" 供應商 "),s("div",{staticClass:"progress-bar progress-bar--success"},[s("div",{staticClass:"progress-bar__bar",class:{"progress-bar__trans":t.step_trans>2}})])]),s("li",{class:{"is-active":t.active4},staticStyle:{"font-size":"16px","font-weight":"600"},attrs:{id:"step-4"}},[t._v(" 在庫試劑 ")])])]),s("v-card-text",{staticStyle:{position:"relative",top:"-20px",right:"-15px"}},[s("v-container",{attrs:{fluid:""}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-tooltip",{attrs:{top:"",color:"error"},scopedSlots:t._u([{key:"activator",fn:function(e){e.on,e.attrs;return[s("v-text-field",{attrs:{value:t.stockOutTag_EmpID,label:"員工編號",readonly:""},model:{value:t.editedItem.stockOutTag_EmpID,callback:function(e){t.$set(t.editedItem,"stockOutTag_EmpID",e)},expression:"editedItem.stockOutTag_EmpID"}})]}}],null,!1,1662599501),model:{value:t.errorShowForEmployer,callback:function(e){t.errorShowForEmployer=e},expression:"errorShowForEmployer"}},[s("span",[t._v("員工編號錯誤!")])])],1),s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-text-field",{attrs:{value:t.fromstockOutTagEmpIdDisp,label:"領料人員",readonly:""},model:{value:t.editedItem.stockOutTag_Employer,callback:function(e){t.$set(t.editedItem,"stockOutTag_Employer",e)},expression:"editedItem.stockOutTag_Employer"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-text-field",t._g({attrs:{label:"領料日期","prepend-icon":"event",readonly:"",value:t.fromDateDisp},on:{blur:t.setStep1},model:{value:t.editedItem.stockOutTag_Date,callback:function(e){t.$set(t.editedItem,"stockOutTag_Date",e)},expression:"editedItem.stockOutTag_Date"}},a))]}}],null,!1,1719747873),model:{value:t.fromDateMenu,callback:function(e){t.fromDateMenu=e},expression:"fromDateMenu"}},[s("v-date-picker",{attrs:{locale:"zh-TW",min:t.minDate,max:t.maxDate,"no-title":""},on:{input:function(e){t.fromDateMenu=!1}},model:{value:t.fromDateVal,callback:function(e){t.fromDateVal=e},expression:"fromDateVal"}})],1)],1)],1),s("v-row"),s("v-row",{attrs:{"mt-n5":"",align:"center",justify:"center"}},[s("label",{staticClass:"adjLabel",attrs:{for:"main"}},[t._v(" 主要產品 (共"+t._s(t.label_count)+"項) ")]),s("v-col",{staticClass:"adjTopForSlide",attrs:{cols:"12",md:"8",ml:"2"}},[s("v-sheet",[s("v-slide-group",{attrs:{multiple:"","show-arrows":""},model:{value:t.selectedCatalogs,callback:function(e){t.selectedCatalogs=e},expression:"selectedCatalogs"}},t._l(t.products,(function(e,a){return s("v-slide-item",{key:a,scopedSlots:t._u([{key:"default",fn:function(a){var o=a.active,i=a.toggle;return[s("v-btn",{staticClass:"mx-2 product-style",attrs:{"input-value":o,"active-class":"primary",depressed:"",rounded:""},on:{click:i,blur:t.setStep2}},[t._v(" "+t._s(e)+" ")])]}}],null,!0)})})),1)],1)],1),s("v-col",{staticClass:"adjTopForSelect",attrs:{cols:"12",md:"4",ml:"2"}},[s("v-select",{staticClass:"mt-1 ml-3 mx-auto",staticStyle:{width:"100px",height:"20px"},attrs:{items:t.suppliers,label:"供應商",outlined:"",multiple:""},on:{change:t.checkSelect},model:{value:t.selectSuppliers,callback:function(e){t.selectSuppliers=e},expression:"selectSuppliers"}})],1)],1),s("v-row",{attrs:{"mt-10":"",align:"center",justify:"center"}},[[s("v-data-table",{staticClass:"elevation-1",staticStyle:{width:"820px"},attrs:{dense:"",headers:t.stock_headers,items:t.stock_desserts,"item-class":t.setRowStyleForStockOut,"item-key":"stockIn_reagent_id","show-select":"","no-data-text":"","footer-props":{itemsPerPageText:"每頁的資料筆數","items-per-page-options":[5]}},on:{"item-selected":t.booking_selected},scopedSlots:t._u([{key:"item.count",fn:function(e){var a=e.item;return[s("div",{staticClass:"adjNumeric"},[s("vue-numeric-input",{attrs:{min:1,max:a.count,step:1,align:"center",size:"small"},model:{value:a.count,callback:function(e){t.$set(a,"count",e)},expression:"item.count"}})],1)]}}],null,!0),model:{value:t.stock_selected,callback:function(e){t.stock_selected=e},expression:"stock_selected"}})]],2)],1)],1),s("v-card-actions",{staticStyle:{position:"relative",top:"-20px"}},[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:"",disabled:t.check_stock_selected},on:{click:t.save}},[t._v(" 確定 ")])],1)],1)],1),s("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialogDelete,callback:function(e){t.dialogDelete=e},expression:"dialogDelete"}},[s("v-card",[s("v-card-title",{staticClass:"text-h5"},[t._v("確定刪除這筆資料?")]),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.closeDelete}},[t._v("取消")]),s("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.deleteItemConfirm}},[t._v("刪除")]),s("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.stockOutTag_cnt",fn:function(e){var a=e.item,o=e.index;return[s("v-text-field",{attrs:{readonly:t.getStockOut(a,o),type:"number",min:"1",max:a.stockOutTag_max_cnt},on:{input:function(e){return t.getData(a)}},model:{value:a.stockOutTag_cnt,callback:function(e){t.$set(a,"stockOutTag_cnt",e)},expression:"item.stockOutTag_cnt"}})]}},{key:"item.actions",fn:function(e){var a=e.item,o=e.index;return[s("v-icon",{staticStyle:{color:"red"},attrs:{small:"",disabled:t.getActive(o)},on:{click:function(e){return t.deleteItem(a)}}},[t._v(" mdi-delete ")])]}}],null,!0)})],1)],1):s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"500"},model:{value:t.permDialog,callback:function(e){t.permDialog=e},expression:"permDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("錯誤訊息!")]),s("v-card-text",[s("div",{staticClass:"text-h4 pa-12"},[t._v("使用這項功能, 請通知管理人員...")])]),s("v-card-actions",{staticClass:"justify-end"},[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.permCloseFun}},[t._v(" 取消 ")])],1)],1)],1)],1)],1)],1)},gs=[],ms=s("5530"),ps=(s("15f5"),s("7051"),s("46e0")),hs=s.n(ps),_s=(s("c91a"),{name:"stockOutTag",mixins:[_],components:{VueNumericInput:Nt.a,"step-progress":hs.a},mounted:function(){var t=this;window.onpopstate=function(){console.log("press back button, good bye...");var e=JSON.parse(localStorage.getItem("loginedUser"));e.setting_items_per_page=t.pagination.itemsPerPage,localStorage.setItem("loginedUser",JSON.stringify(e))}},data:function(){return{label_count:0,active1:!0,active2:!1,active3:!1,active4:!1,step:"step0",step_trans:0,editedStockIndex:-1,stock_singleSelect:!1,stock_selected:[],stock_headers:[{text:"資材碼",value:"stockIn_reagent_id",align:"start",sortable:!0,width:"120px"},{text:"品名",value:"stockIn_reagent_name",sortable:!1,width:"180px"},{text:"供應商",value:"stockIn_supplier",sortable:!0,width:"120px"},{text:"效期",value:"stockIn_reagent_period",sortable:!0,width:"100px"},{text:"入庫日期",value:"stockIn_date",sortable:!0,width:"100px"},{text:"領料單位",value:"stockIn_reagent_Out_unit",sortable:!1,width:"90px"},{text:"在庫數量",value:"stockIn_reagent_Out_cnt",sortable:!1,width:"16%"}],stock_desserts:[],temp_stock_desserts:[],currentUser:{},permDialog:!1,stockOutTag_EmpID:"",errorShowForEmployer:!1,errorShowForReagName:!1,fromDateMenu:!1,fromDateVal:null,minDate:"2012-07-01",maxDate:"2042-06-30",dialog:!1,dialogDelete:!1,selectedCatalogs:[],pagination:{},headers:[{text:"資材碼",sortable:!0,value:"stockOutTag_reagID",width:"90px"},{text:"品名",sortable:!0,value:"stockOutTag_reagName",width:"180px"},{text:"供應商",sortable:!0,value:"stockOutTag_supplier",width:"120px"},{text:"效期",sortable:!0,value:"stockOutTag_reagPeriod",width:"75px"},{text:"入庫日期",sortable:!0,value:"stockOutTag_InDate",width:"75px"},{text:"領料日期",sortable:!0,value:"stockOutTag_Date",width:"75px"},{text:"領料人員",sortable:!0,value:"stockOutTag_Employer",width:"75px"},{text:"領料單位",sortable:!1,value:"stockOutTag_unit",width:"65px",align:"start"},{text:"領料數量",sortable:!1,value:"stockOutTag_cnt",width:"65px",align:"start",class:"my-header-style"},{text:"Actions",sortable:!1,value:"actions",width:"60px",class:"my-header-style"}],sortBy:["stockOutTag_reagID","stockOutTag_reagName"],currentItems_desserts:[],desserts:[],temp_desserts:[],desserts_max_cnt:[],products:[],temp_products:[],suppliers:[],temp_suppliers:[],items:[],temp_items:[],editedIndex:-1,editedItem:{stockOutTag_reagID:"",stockOutTag_reagName:"",stockOutTag_reagPeriod:"",stockOutTag_InDate:"",stockOutTag_unit:"",stockOutTag_Date:"",stockOutTag_EmpID:"",stockOutTag_Employer:"",stockOutTag_cnt:""},defaultItem:{stockOutTag_reagID:"",stockOutTag_reagName:"",stockOutTag_reagPeriod:"",stockOutTag_InDate:"",stockOutTag_unit:"",stockOutTag_Date:"",stockOutTag_EmpID:"",stockOutTag_Employer:"",stockOutTag_cnt:""},deleteObject:{},isAllSelected:!1,selectSuppliers:[],load_SingleTable_ok:!1,load_2thTable_ok:!1,load_3thTable_ok:!1,load_4thTable_ok:!1,load_5thTable_ok:!1}},computed:{formTitle:function(){return-1===this.editedIndex?"新增資料":"編輯資料"},fromstockOutTagEmpIdDisp:function(){return""!=this.stockOutTag_EmpID?(""==this.editedItem.stockOutTag_EmpID&&(this.editedItem.stockOutTag_EmpID=this.currentUser.empID,this.editedItem.stockOutTag_Employer=this.currentUser.name),this.errorShowForEmployer=!1,this.editedItem.stockOutTag_Employer):(this.this.editedItem.stockOutTag_EmpID="",this.editedItem.stockOutTag_Employer="",this.errorShowForEmployer=!0,"")},fromDateDisp:function(){if(null!=this.fromDateVal){var t=this.fromDateVal.substring(0,4),e=this.fromDateVal.substring(5,this.fromDateVal.length);e=e.replace("-","/");var s=parseInt(t);s-=1911,t=s.toString(),this.editedItem.stockOutTag_Date=t+"/"+e}return this.fromDateVal},check_stock_selected:function(){return 0==this.stock_selected.length}},watch:{dialog:function(t){t||this.close()},dialogDelete:function(t){t||this.closeDelete()},stock_selected:function(t){t.length>0&&"step3"==this.step&&this.next()},selectedCatalogs:function(t,e){console.log("hello....selectedCatalogs: ",t,e,t.length),this.selectSuppliers=[],this.load_4thTable_ok=!1,this.listSuppliersBySelect()},selectSuppliers:function(t,e){console.log("hello....selectSuppliers: ",t,e,t.length),this.load_5thTable_ok=!1,this.listStockInDataBySelect()},load_5thTable_ok:function(t){console.log("load_5thTable_ok, suppliers: ",t),t&&(this.load_5thTable_ok=!1,this.stock_desserts=Object.assign([],this.temp_stock_desserts))},load_4thTable_ok:function(t){console.log("load_4thTable_ok, suppliers: ",t),t&&(this.load_4thTable_ok=!1,this.suppliers=Object.assign([],this.temp_suppliers),this.stock_desserts=Object.assign([],this.temp_stock_desserts))},load_3thTable_ok:function(t){console.log("load_3thTable_ok, suppliers: ",t),t&&(this.load_3thTable_ok=!1,this.suppliers=this.temp_suppliers.map((function(t){return Object.values(t)[2]})))},load_2thTable_ok:function(t){console.log("load_2thTable_ok, products: ",t),t&&(this.label_count=this.temp_products.length,this.products=Object.assign([],this.temp_products),this.load_2thTable_ok=!1,this.listSuppliers())},load_SingleTable_ok:function(t){console.log("load_SingleTable_ok, desserts: ",t),t&&(this.desserts=Object.assign([],this.temp_desserts),this.desserts=this.desserts.map((function(t){return Object(ms["a"])(Object(ms["a"])({},t),{},{isOnTable:!0})})),this.load_SingleTable_ok=!1,this.listProducts())}},created:function(){this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),this.currentUser.perm<1&&(this.permDialog=!0),this.stockOutTag_EmpID=this.currentUser.empID,this.pagination.itemsPerPage=this.currentUser.setting_items_per_page,this.load_SingleTable_ok=!1,this.initAxios(),this.listStockOutData()},methods:{initialize:function(){this.load_SingleTable_ok=!1,this.listStockOutData()},listStockOutData:function(){var t=this,e="/listStockOutData";console.log("listStockOutData, Axios get data..."),h.a.get(e).then((function(e){t.temp_desserts=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},listSuppliers:function(){var t=this,e="/listSuppliers";console.log("listSuppliers, Axios get data..."),h.a.get(e).then((function(e){t.temp_suppliers=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_3thTable_ok=!0})).catch((function(e){console.error(e),t.load_3thTable_ok=!1}))},listSuppliersBySelect:function(){var t=this;console.log("listSuppliersBySelect, Axios post data...");for(var e="/listSuppliersBySelect",s=[],a=0;a<this.selectedCatalogs.length;a++)s.push(this.products[this.selectedCatalogs[a]]);var o={catalogs:s};h.a.post(e,o).then((function(e){t.temp_stock_desserts=e.data.outputs_for_stockOut,t.temp_suppliers=e.data.outputs_for_supplier.filter((function(t,e,s){return s.indexOf(t)==e})),t.temp_suppliers.unshift("全部"),console.log("POST ok, and return total records: (supplier)",e.data.outputs_for_supplier.length," (stock)",e.data.outputs_for_stockOut.length),t.load_4thTable_ok=!0})).catch((function(e){console.error(e),t.load_4thTable_ok=!1}))},listStockInDataBySelect:function(){var t=this;console.log("listStockInDataBySelect, Axios post data...");for(var e="/listStockInDataBySelect",s=[],a=0;a<this.selectSuppliers.length;a++)s.push(this.selectSuppliers[a]);for(var o=[],i=0;i<this.selectedCatalogs.length;i++)o.push(this.products[this.selectedCatalogs[i]]);console.log("payload: ",o,s);var n={catalogs:o,suppliers:s};h.a.post(e,n).then((function(e){t.temp_stock_desserts=e.data.outputs_for_stockOut.filter((function(t,e,s){return e===s.findIndex((function(e){return e.stockIn_id===t.stockIn_id}))})),console.log("POST ok, and return total records: ","(temp)",e.data.outputs_for_stockOut.length,"(real)",t.temp_stock_desserts.length),t.load_5thTable_ok=!0})).catch((function(e){console.error(e),t.load_5thTable_ok=!1}))},listProducts:function(){var t=this,e="/listProducts";console.log("listProducts, Axios get data..."),h.a.get(e).then((function(e){t.temp_products=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_2thTable_ok=!0})).catch((function(e){console.error(e),t.load_2thTable_ok=!1}))},booking_clicked:function(t,e){console.log("booking_clicked: ",t,e)},booking_selected:function(t,e){console.log("booking_selected: ",t,e)},currentItems:function(t){console.log("currentItems: ",t),this.currentItems_desserts=[],this.currentItems_desserts=Object.assign([],t)},setRowStyle:function(t){return"isOnTable"in t?"":"style-1"},setRowStyleForStockOut:function(t){return"style-for-data-table"},getActive:function(t){var e=this.currentUser.name!=this.currentItems_desserts[t].stockOutTag_Employer;return e},getData:function(t){var e=this.desserts.indexOf(t);if(""!=this.desserts[e].stockOutTag_cnt){var s="/updateStockOutAndStockInData",a={stockOut_array:this.desserts[e],stockOut_count:1};h.a.post(s,a).then((function(t){console.log("update outTag data status: ",t.data.status)})).catch((function(t){console.error(t)}))}},getStockOut:function(t){return"isOnTable"in t},checkSelect:function(t){var e=t.includes("全部");if(console.log("checkSelect..., ",t,e,this.isAllSelected),e)if(this.isAllSelected){console.log("hello begin..."),this.isAllSelected=!1,this.selectSuppliers=[];for(var s=1;s<t.length;s++)this.selectSuppliers.push(t[s])}else{console.log("Select all..."),this.selectSuppliers=[];for(var a=0;a<this.suppliers.length;a++)this.selectSuppliers.push(this.suppliers[a]);this.isAllSelected=!0}else if(this.isAllSelected)console.log("Remove all..."),this.selectSuppliers=[],this.isAllSelected=!1;else{console.log("Click some item..."),this.selectSuppliers=[];for(var o=0;o<t.length;o++){var i=this.suppliers.includes(t[o]);console.log("item1...",i),i&&(this.selectSuppliers.push(t[o]),console.log("item2...",t[o]))}console.log("length...",t.length,this.suppliers.length),t.length==this.suppliers.length-1&&(console.log("Hello end..."),this.selectSuppliers.unshift("全部"),this.isAllSelected=!0)}console.log("setStep3, set step is..."),"step2"==this.step&&this.next()},deleteItem:function(t){this.editedIndex=this.desserts.indexOf(t),this.deleteObject=Object.assign({},t),this.dialogDelete=!0},deleteItemConfirm:function(){this.desserts.splice(this.editedIndex,1),this.closeDelete();var t="/deleteStockOutAndStockInData",e={stockOut_array:this.deleteObject,stockOut_count:1};h.a.post(t,e).then((function(t){console.log("delete outTag data status: ",t.data.status)})).catch((function(t){console.error(t)}))},close:function(){var t=this;this.stock_selected=[],this.selectSuppliers=[],this.selectedCatalogs=[],this.dialog=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},closeDelete:function(){var t=this;this.stock_selected=[],this.selectSuppliers=[],this.selectedCatalogs=[],this.dialogDelete=!1,this.$nextTick((function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1}))},save:function(){var t=this;console.log("save..."),this.desserts=this.desserts.map((function(t){return Object(ms["a"])(Object(ms["a"])({},t),{},{isOnTable:!0})}));for(var e=this.stock_selected.length,s=[],a=0;a<e;a++){var o={stockOutTag_reagID:this.stock_selected[a].stockIn_reagent_id,stockOutTag_reagName:this.stock_selected[a].stockIn_reagent_name,stockOutTag_supplier:this.stock_selected[a].stockIn_supplier,stockOutTag_reagPeriod:this.stock_selected[a].stockIn_reagent_period,stockOutTag_InDate:this.stock_selected[a].stockIn_date,stockOutTag_Date:this.editedItem.stockOutTag_Date,stockOutTag_Employer:this.editedItem.stockOutTag_Employer,stockOutTag_cnt:this.stock_selected[a].stockIn_reagent_Out_cnt,stockOutTag_unit:this.stock_selected[a].stockIn_reagent_Out_unit,stockOutTag_InID:this.stock_selected[a].stockIn_id,stockOutTag_max_cnt:this.stock_selected[a].stockIn_reagent_Out_cnt};this.desserts.push(o);var i={stockOutTag_Date:this.editedItem.stockOutTag_Date,stockOutTag_Employer:this.editedItem.stockOutTag_Employer,stockOutTag_cnt:this.stock_selected[a].stockIn_reagent_Out_cnt,stockOutTag_unit:this.stock_selected[a].stockIn_reagent_Out_unit,stockOutTag_InID:this.stock_selected[a].stockIn_id};s.push(i)}this.close();var n="/createStockOut",r={stockOut_array:s,stockOut_count:e};h.a.post(n,r).then((function(s){console.log("create outTag data status: ",s.data.status);for(var a=t.desserts.length-1,o=s.data.return_outTag_ID.length-1,i=0;i<e;i++)t.desserts[a-i].stockOutTag_ID=s.data.return_outTag_ID[o-i]})).catch((function(t){console.error(t)}))},setStep1:function(){console.log("setStep1, set step is..."),"step0"==this.step&&this.next()},setStep2:function(){console.log("setStep2, set step is..."),"step1"==this.step&&this.next()},next:function(){return"step0"===this.step?(this.step="step1",this.step_trans++,this.active1=!1,void(this.active2=!0)):"step1"===this.step?(this.step="step2",this.step_trans++,this.active2=!1,void(this.active3=!0)):"step2"===this.step?(this.step="step3",this.step_trans++,this.active3=!1,void(this.active4=!0)):"step3"===this.step?(this.step="step4",this.step_trans++,void(this.active4=!1)):"step4"===this.step?(this.step="complete",void(this.active4=!1)):void 0},permCloseFun:function(){this.permDialog=!1,console.log("press permission Close Button..."),this.$router.push("/navbar")}}}),vs=_s,fs=(s("66f2"),Object(l["a"])(vs,us,gs,!1,null,"2623a992",null)),bs=fs.exports,ks=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-sheet",{staticClass:"overflow-hidden",staticStyle:{position:"relative"}},[s("v-container",{attrs:{fluid:""}},[t.currentUser.perm>=1?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{attrs:{width:"85vw"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts,"single-select":t.singleSelect,"item-key":"stockInTag_reagID","show-select":"","footer-props":{itemsPerPageText:"每頁的資料筆數"}},scopedSlots:t._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:""}},[s("v-toolbar-title",{staticStyle:{height:"40px"}},[t._v("出庫標籤列印作業")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-btn",{staticClass:"mb-2",attrs:{color:"primary",depressed:"",disabled:!t.check_selected},on:{click:t.printSection}},[s("v-icon",{attrs:{left:"",dark:""}},[t._v("mdi-printer")]),t._v(" 預覽標籤 ")],1)],1),s("v-switch",{staticStyle:{height:"40px","margin-top":"0px","padding-top":"0px"},attrs:{label:"個別選項"},model:{value:t.singleSelect,callback:function(e){t.singleSelect=e},expression:"singleSelect"}})]},proxy:!0},{key:"item.stockInTag_cnt",fn:function(e){var a=e.item;return[s("v-text-field",{attrs:{name:"count"},on:{input:function(e){return t.getdata(a)}},model:{value:a.stockInTag_cnt,callback:function(e){t.$set(a,"stockInTag_cnt",e)},expression:"item.stockInTag_cnt"}})]}}],null,!0),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1):s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"500"},model:{value:t.permDialog,callback:function(e){t.permDialog=e},expression:"permDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("錯誤訊息!")]),s("v-card-text",[s("div",{staticClass:"text-h4 pa-12"},[t._v("使用這項功能, 請通知管理人員...")])]),s("v-card-actions",{staticClass:"justify-end"},[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.permCloseFun}},[t._v(" 取消 ")])],1)],1)],1)],1)],1),s("v-navigation-drawer",{attrs:{height:"100vh",width:"25vw",temporary:"",right:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[s("SideBar",{attrs:{sidebar:t.selected,drawer:t.drawer},on:{waitTags:t.onWaitTags}})],1)],1)],1)},xs=[],Is={name:"StockOutTagPrint",components:{SideBar:ze},mounted:function(){console.log("stockOutTag, mounted()..."),this.root=document.documentElement,window.onpopstate=function(t){console.log("hello, good bye..."),this.total_tags=0,localStorage.setItem("totalTags",0)}},data:function(){return{currentUser:{},total_tags:0,permDialog:!1,stockOutTag_EmpID:"",errorShowForEmployer:!1,errorShowForReagName:!1,dialog:!1,drawer:!1,root:null,singleSelect:!1,selected:[],headers:[{text:"資材碼",sortable:!0,value:"stockInTag_reagID",width:"9%"},{text:"品名",sortable:!1,value:"stockOutTag_reagName",width:"13%"},{text:"效期",sortable:!0,value:"stockOutTag_reagPeriod",width:"9%"},{text:"保存溫度",sortable:!1,value:"stockOutTag_reagTemp",width:"10%"},{text:"入庫日期",sortable:!0,value:"stockOutTag_InDate",width:"10%"},{text:"領用日期",sortable:!1,value:"stockOutTag_Date",width:"9%"},{text:"領用人員",sortable:!1,value:"stockInTag_Employer",width:"10%"},{text:"批號",sortable:!1,value:"stockOutTag_batch",width:"13%",align:"center"},{text:"領用單位",sortable:!1,value:"stockOutTag_unit",width:"10%",align:"center"},{text:"張數",sortable:!1,value:"stockInTag_cnt",width:"7%"}],in_drafTags:0,desserts:[],editedIndex:-1,load_SingleTable_ok:!1,load_2thTable_ok:!1}},computed:{check_selected:function(){return!(!Array.isArray(this.selected)||!this.selected.length)}},watch:{dialog:function(t){t||this.close()},load_SingleTable_ok:function(t){t&&this.getSingleTableData()},drawer:{handler:function(){var t=this;this.$nextTick((function(){t.drawer?(console.log("disable scrollbar..."),t.root.style.setProperty("--bar","hidden")):(console.log("enable scrollbar..."),t.root.style.setProperty("--bar","scroll"))}))},immediate:!0}},created:function(){console.log("StockOutTag, created()..."),this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),this.currentUser.perm<1&&(this.permDialog=!0),this.stockOutTag_EmpID=this.currentUser.empID,console.log("empID: ",this.currentUser.empID,this.stockOutTag_EmpID),this.initialize()},methods:{initialize:function(){this.load_SingleTable_ok=!1,this.desserts=[{stockInTag_reagID:"123456789",stockOutTag_reagName:"ABC",stockOutTag_reagPeriod:"111/10/31",stockOutTag_reagTemp:"2~8度C",stockOutTag_InDate:"111/01/01",stockOutTag_Date:"111/06/01",stockOutTag_EmpID:"N12345",stockInTag_Employer:"陳健南",stockOutTag_batch:"1110012345B123400066",stockOutTag_unit:"盒",stockInTag_cnt:4},{stockInTag_reagID:"234567891",stockOutTag_reagName:"ABCD",stockOutTag_reagPeriod:"111/12/31",stockOutTag_reagTemp:"2~8度C",stockOutTag_InDate:"110/10/01",stockOutTag_Date:"111/06/01",stockOutTag_EmpID:"N12345",stockInTag_Employer:"陳健南",stockOutTag_batch:"1110012345C123400055",stockOutTag_unit:"盒",stockInTag_cnt:2},{stockInTag_reagID:"234567892",stockOutTag_reagName:"A11",stockOutTag_reagPeriod:"111/12/31",stockOutTag_reagTemp:"2~8度C",stockOutTag_InDate:"111/01/01",stockOutTag_Date:"111/06/01",stockOutTag_EmpID:"N12345",stockInTag_Employer:"陳健南",stockOutTag_batch:"1110012345B123400033",stockOutTag_unit:"盒",stockInTag_cnt:10},{stockInTag_reagID:"234567893",stockOutTag_reagName:"A12",stockOutTag_reagPeriod:"112/6/30",stockOutTag_reagTemp:"2~8度C",stockOutTag_InDate:"111/01/01",stockOutTag_Date:"111/06/01",stockOutTag_EmpID:"N12345",stockInTag_Employer:"陳健南",stockOutTag_batch:"1110012345B123400033",stockOutTag_unit:"盒",stockInTag_cnt:1},{stockInTag_reagID:"234567894",stockOutTag_reagName:"B2233",stockOutTag_reagPeriod:"111/8/31",stockOutTag_reagTemp:"2~8度C",stockOutTag_InDate:"111/03/01",stockOutTag_Date:"111/06/01",stockOutTag_EmpID:"N12345",stockInTag_Employer:"陳健南",stockOutTag_batch:"1110012345B123400022",stockOutTag_unit:"盒",stockInTag_cnt:10},{stockInTag_reagID:"234567897",stockOutTag_reagName:"B3344",stockOutTag_reagPeriod:"111/8/31",stockOutTag_reagTemp:"常溫",stockOutTag_InDate:"110/08/01",stockOutTag_Date:"111/03/10",stockOutTag_EmpID:"T12345",stockInTag_Employer:"林成興",stockOutTag_batch:"1110012345A123400001",stockOutTag_unit:"盒",stockInTag_cnt:1},{stockInTag_reagID:"234567898",stockOutTag_reagName:"B3344",stockOutTag_reagPeriod:"111/8/31",stockOutTag_reagTemp:"常溫",stockOutTag_InDate:"110/12/01",stockOutTag_Date:"111/03/10",stockOutTag_EmpID:"T12345",stockInTag_Employer:"林成興",stockOutTag_batch:"1110012345A123400001",stockOutTag_unit:"盒",stockInTag_cnt:10},{stockInTag_reagID:"234567899",stockOutTag_reagName:"B3344",stockOutTag_reagPeriod:"111/8/31",stockOutTag_reagTemp:"常溫",stockOutTag_InDate:"110/11/01",stockOutTag_Date:"111/03/10",stockOutTag_EmpID:"T12345",stockInTag_Employer:"林成興",stockOutTag_batch:"1110012345A123400001",stockOutTag_unit:"盒",stockInTag_cnt:5},{stockInTag_reagID:"214567897",stockOutTag_reagName:"B3344",stockOutTag_reagPeriod:"111/8/31",stockOutTag_reagTemp:"常溫",stockOutTag_InDate:"110/05/01",stockOutTag_Date:"111/03/10",stockOutTag_EmpID:"T12345",stockInTag_Employer:"林成興",stockOutTag_batch:"1110012345A123400001",stockOutTag_unit:"盒",stockInTag_cnt:10},{stockInTag_reagID:"214567898",stockOutTag_reagName:"B3344",stockOutTag_reagPeriod:"111/8/31",stockOutTag_reagTemp:"常溫",stockOutTag_InDate:"110/09/01",stockOutTag_Date:"111/03/10",stockOutTag_EmpID:"T12345",stockInTag_Employer:"林成興",stockOutTag_batch:"1110012345A123400001",stockOutTag_unit:"盒",stockInTag_cnt:2},{stockInTag_reagID:"214567899",stockOutTag_reagName:"B3344",stockOutTag_reagPeriod:"111/8/31",stockOutTag_reagTemp:"常溫",stockOutTag_InDate:"111/01/01",stockOutTag_Date:"111/06/25",stockOutTag_EmpID:"T87654",stockInTag_Employer:"吳仲偉",stockOutTag_batch:"1110012345A123400001",stockOutTag_unit:"盒",stockInTag_cnt:10},{stockInTag_reagID:"224567897",stockOutTag_reagName:"B3344",stockOutTag_reagPeriod:"111/8/31",stockOutTag_reagTemp:"常溫",stockOutTag_InDate:"111/01/01",stockOutTag_Date:"111/06/25",stockOutTag_EmpID:"T87654",stockInTag_Employer:"吳仲偉",stockOutTag_batch:"1110012345A123400001",stockOutTag_unit:"盒",stockInTag_cnt:20},{stockInTag_reagID:"224567898",stockOutTag_reagName:"B3344",stockOutTag_reagPeriod:"111/8/31",stockOutTag_reagTemp:"常溫",stockOutTag_InDate:"111/01/01",stockOutTag_Date:"111/06/25",stockOutTag_EmpID:"T87654",stockInTag_Employer:"吳仲偉",stockOutTag_batch:"1110012345A123400001",stockOutTag_unit:"盒",stockInTag_cnt:10},{stockInTag_reagID:"224567899",stockOutTag_reagName:"B3344",stockOutTag_reagPeriod:"111/8/31",stockOutTag_reagTemp:"常溫",stockOutTag_InDate:"111/03/01",stockOutTag_Date:"111/06/25",stockOutTag_EmpID:"T87654",stockInTag_Employer:"吳仲偉",stockOutTag_batch:"1110012345A123400001",stockOutTag_unit:"盒",stockInTag_cnt:10}]},getdata:function(t){this.editedIndex=this.desserts.indexOf(t),console.log(this.desserts[this.editedIndex].stockInTag_cnt)},onWaitTags:function(t){console.log("total count for tags: ",t),this.total_tags=t,localStorage.setItem("totalTags",this.total_tags),console.log("leave onWaitTags()...")},printSection:function(){console.log("click, printSection()..."),this.drawer=!0},permCloseFun:function(){this.permDialog=!1,console.log("press permission Close Button..."),this.$router.push("/navbar")}}},ys=Is,Ts=(s("374a"),s("6d10"),Object(l["a"])(ys,ks,xs,!1,null,"650defd2",null)),Ds=Ts.exports,Os=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",{attrs:{fluid:""}},[s("v-row",{directives:[{name:"show",rawName:"v-show",value:t.tosterOK,expression:"tosterOK"}]},[s("v-col",{staticClass:"d-flex justify-end"},[s("Toaster",{attrs:{Title:t.tosterTitlt,Type:t.tosterType,Body:t.tosterBody,Timeout:t.tosterTimeout},on:{removeToaster:function(e){t.tosterOK=!1}}})],1)],1),t.currentUser.perm>=1?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{staticClass:"pa-md-4 mt-5 mx-lg-auto",attrs:{width:"74vw"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.desserts,"item-class":t.setRowStyleForReqRecord,"item-key":"name",options:t.pagination,search:t.search,"custom-filter":t.filterOnlyCapsText,"footer-props":{itemsPerPageText:"每頁的資料筆數"}},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:""}},[s("v-toolbar-title",[t._v("領用記錄查詢")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-text-field",{staticClass:"style-1",attrs:{placeholder:"關鍵字查詢"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),s("v-btn",{staticClass:"mt-n1 mr-15 mx-auto",attrs:{color:"primary"},on:{click:t.exportToExcel}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-microsoft-excel")]),t._v(" Excel ")],1)],1)]},proxy:!0},{key:"body.append",fn:function(){return[s("tr",{staticStyle:{}},[s("td"),s("td",{attrs:{colspan:"8"}},[s("v-row",[s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","max-width":"280px","min-width":"280px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-text-field",t._g({attrs:{placeholder:"領用開始日期查詢","prepend-icon":"event",readonly:"",value:t.fromDateDisp},model:{value:t.compareDate,callback:function(e){t.compareDate=e},expression:"compareDate"}},a))]}}],null,!1,2395283335),model:{value:t.fromDateMenu,callback:function(e){t.fromDateMenu=e},expression:"fromDateMenu"}},[s("v-date-picker",{attrs:{locale:"zh-TW",min:t.minDate,max:t.maxDate,"no-title":""},on:{input:function(e){t.fromDateMenu=!1}},model:{value:t.fromDateVal,callback:function(e){t.fromDateVal=e},expression:"fromDateVal"}})],1),s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","max-width":"280px","min-width":"280px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-text-field",t._g({attrs:{placeholder:"領用截止日期查詢","prepend-icon":"event",readonly:"",value:t.fromDateDispEnd},model:{value:t.compareDateEnd,callback:function(e){t.compareDateEnd=e},expression:"compareDateEnd"}},a))]}}],null,!1,791694383),model:{value:t.fromDateMenuEnd,callback:function(e){t.fromDateMenuEnd=e},expression:"fromDateMenuEnd"}},[s("v-date-picker",{attrs:{locale:"zh-TW",min:t.minDate,max:t.maxDate,"no-title":""},on:{input:function(e){t.fromDateMenuEnd=!1}},model:{value:t.fromDateValEnd,callback:function(e){t.fromDateValEnd=e},expression:"fromDateValEnd"}})],1)],1)],1)])]},proxy:!0}],null,!1,2192045458)})],1)],1):s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"500"},model:{value:t.permDialog,callback:function(e){t.permDialog=e},expression:"permDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("錯誤訊息!")]),s("v-card-text",[s("div",{staticClass:"text-h4 pa-12"},[t._v("使用這項功能, 請通知管理人員...")])]),s("v-card-actions",{staticClass:"justify-end"},[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.permCloseFun}},[t._v(" 取消 ")])],1)],1)],1)],1)],1)],1)},Ss=[],ws=(s("1276"),{name:"ReqRecord",mixins:[_],components:{Toaster:gt},mounted:function(){var t=this;window.onpopstate=function(){console.log("press back button, good bye...");var e=JSON.parse(localStorage.getItem("loginedUser"));e.setting_items_per_page=t.pagination.itemsPerPage,localStorage.setItem("loginedUser",JSON.stringify(e))}},data:function(){return{currentUser:{},permDialog:!1,tosterTitlt:"Hello",tosterType:"info",tosterBody:"領用記錄excel轉檔完成!",tosterTimeout:"3",tosterOK:!1,myIndex:0,myIndexEnd:0,fromDateMenu:!1,fromDateVal:"",compareDate:"",fromDateMenuEnd:!1,fromDateValEnd:"",compareDateEnd:"",minDate:"2012-07-01",maxDate:"2042-06-30",search:"",pagination:{},desserts:[],load_SingleTable_ok:!1,load_2thTable_ok:!1}},computed:{headers:function(){var t=this;return[{text:"資材碼",sortable:!0,value:"reqRecord_reagID",width:"10%"},{text:"品名",sortable:!1,value:"reqRecord_reagName",width:"20%"},{text:"資材組別",sortable:!0,value:"reqRecord_catalog",width:"10%"},{text:"類別",sortable:!1,value:"reqRecord_prdName",width:"11%"},{text:"供應商",sortable:!0,value:"reqRecord_supplier",width:"11%"},{text:"入庫日期",sortable:!1,value:"reqRecord_stockInDate",width:"8%"},{text:"領用日期",sortable:!1,value:"reqRecord_Date",width:"8%",filter:function(e){if(t.myIndexEnd=t.desserts.length,""==t.compareDate||""==t.compareDateEnd)return t.myIndex=0,!0;var s=t.desserts[t.myIndex].reqRecord_Date,a=t.strDateToNum(s),o=t.strDateToNum(t.compareDate),i=t.strDateToNum(t.compareDateEnd);return console.log("date: ",a,o,i),t.myIndex++,t.myIndex>=t.myIndexEnd&&(t.myIndex=0),a>=o&&a<=i}},{text:"領用人員",sortable:!1,value:"reqRecord_Employer",width:"10%"},{text:"領用數量",sortable:!1,value:"reqRecord_cnt",width:"12%"}]},fromDateDisp:function(){if(""!=this.fromDateVal){var t=this.fromDateVal.substring(0,4),e=this.fromDateVal.substring(5,this.fromDateVal.length);e=e.replace("-","/");var s=parseInt(t);s-=1911,t=s.toString(),this.compareDate=t+"/"+e}return this.fromDateVal},fromDateDispEnd:function(){if(""!=this.fromDateValEnd){var t=this.fromDateValEnd.substring(0,4),e=this.fromDateValEnd.substring(5,this.fromDateValEnd.length);e=e.replace("-","/");var s=parseInt(t);s-=1911,t=s.toString(),this.compareDateEnd=t+"/"+e}return this.fromDateValEnd}},watch:{load_SingleTable_ok:function(t){console.log("load_SingleTable_ok, desserts: ",t),t&&(this.desserts=Object.assign([],this.temp_desserts),this.load_SingleTable_ok=!1)},load_2thTable_ok:function(t){console.log("load_2thTable_ok: ",t)}},created:function(){this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),this.currentUser.perm<1&&(this.permDialog=!0),this.stockOutTag_EmpID=this.currentUser.empID,this.pagination.itemsPerPage=this.currentUser.setting_items_per_page,this.load_SingleTable_ok=!1,this.initAxios(),this.listRequirements()},methods:{initialize:function(){this.load_SingleTable_ok=!1,this.listRequirements()},listRequirements:function(){var t=this,e="/listRequirements";console.log("listRequirements, Axios get data..."),h.a.get(e).then((function(e){t.temp_desserts=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},exportToExcel:function(){var t=this;console.log("ReqRecord, exportToExcel, Axios post data...");var e={reqRecord_reagID:"資材碼",reqRecord_reagName:"品名",reqRecord_supplier:"供應商",reqRecord_stockInDate:"入庫日期",reqRecord_Date:"領用日期",reqRecord_Employer:"領用人員",reqRecord_cnt:"領用數量"},s=Object.assign([],this.desserts);s.unshift(e),console.log("object_Desserts: ",s);var a="/exportToExcelForReq",o={blocks:s,count:this.desserts.length+1,name:this.currentUser.name};h.a.post(a,o).then((function(e){console.log("export into excel status: ",e.data.status,e.data.outputs),e.data.status?(t.tosterBody=e.data.outputs,t.tosterOK=!0):t.tosterOK=!1,t.load_2thTable_ok=!0})).catch((function(e){console.error(e),t.load_2thTable_ok=!1,t.tosterOK=!1}))},filterOnlyCapsText:function(t,e,s){return null!=t&&null!=e&&"string"===typeof t&&-1!==t.toString().toLocaleUpperCase().indexOf(e)},strDateToNum:function(t){var e=t.split("/"),s=e.map((function(t){return Number(t)})),a=1e4*s[0]+100*s[1]+s[2];return a},setRowStyleForReqRecord:function(t){return"style-for-data-table"},permCloseFun:function(){this.permDialog=!1,console.log("press permission Close Button..."),this.$router.push("/navbar")}}}),js=ws,Es=(s("c7404"),Object(l["a"])(js,Os,Ss,!1,null,"605f55c0",null)),Cs=Es.exports,Ps=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",{attrs:{fluid:""}},[s("v-snackbar",{attrs:{color:t.snackbar_color,right:t.snackbar_right,top:t.snackbar_top},scopedSlots:t._u([{key:"action",fn:function(e){e.attrs;return[s("v-btn",{attrs:{icon:"",color:t.snackbar_icon_color},on:{click:function(e){t.snackbar=!1}}},[s("v-icon",{attrs:{dark:""}},[t._v("mdi-close-circle")])],1)]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.snackbar_info)+" ")]),t.currentUser.perm>=1?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{staticClass:"pa-md-4 mt-5 mx-lg-auto",attrs:{width:"86vw"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{dense:"",headers:t.headers,items:t.dessertsDisplay,options:t.pagination,search:t.search,"custom-filter":t.filterOnlyCapsText,"footer-props":{itemsPerPageText:"每頁的資料筆數"}},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:""}},[s("v-toolbar-title",{staticStyle:{height:"40px"}},[t._v("庫存記錄查詢")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-text-field",{staticClass:"style-0",attrs:{placeholder:"關鍵字查詢"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),s("v-spacer"),s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","max-width":"280px","min-width":"280px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-text-field",t._g({staticClass:"shrink style-3",attrs:{placeholder:"入庫開始日期查詢","prepend-icon":"event",readonly:"",value:t.fromDateDispStart},model:{value:t.compareDateStart,callback:function(e){t.compareDateStart=e},expression:"compareDateStart"}},a))]}}],null,!1,3446163349),model:{value:t.fromDateMenuStart,callback:function(e){t.fromDateMenuStart=e},expression:"fromDateMenuStart"}},[s("v-date-picker",{attrs:{locale:"zh-TW",min:t.minDate,max:t.maxDate,"no-title":""},on:{input:function(e){t.fromDateMenuStart=!1}},model:{value:t.fromDateValStart,callback:function(e){t.fromDateValStart=e},expression:"fromDateValStart"}})],1),s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","max-width":"280px","min-width":"280px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-text-field",t._g({staticClass:"shrink style-3",attrs:{placeholder:"入庫截止日期查詢","prepend-icon":"event",readonly:"",value:t.fromDateDispEnd},model:{value:t.compareDateEnd,callback:function(e){t.compareDateEnd=e},expression:"compareDateEnd"}},a))]}}],null,!1,2879141181),model:{value:t.fromDateMenuEnd,callback:function(e){t.fromDateMenuEnd=e},expression:"fromDateMenuEnd"}},[s("v-date-picker",{attrs:{locale:"zh-TW",min:t.minDate,max:t.maxDate,"no-title":""},on:{input:function(e){t.fromDateMenuEnd=!1}},model:{value:t.fromDateValEnd,callback:function(e){t.fromDateValEnd=e},expression:"fromDateValEnd"}})],1),s("v-spacer"),s("v-select",{staticClass:"style-4",attrs:{items:t.itemsForSelect,label:"供應商查詢",outlined:"",multiple:"",dense:""},on:{change:t.checkSelect},model:{value:t.selectedItems,callback:function(e){t.selectedItems=e},expression:"selectedItems"}}),s("v-spacer"),s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","max-width":"280px","min-width":"280px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-text-field",t._g({staticClass:"shrink style-2",attrs:{placeholder:"效期查詢","prepend-icon":"event",readonly:"",value:t.displayPeriodDate},model:{value:t.compareDatePeriod,callback:function(e){t.compareDatePeriod=e},expression:"compareDatePeriod"}},a))]}}],null,!1,1967815061),model:{value:t.fromDateMenuPeriod,callback:function(e){t.fromDateMenuPeriod=e},expression:"fromDateMenuPeriod"}},[s("v-date-picker",{attrs:{locale:"zh-TW",min:t.minDate,max:t.maxDate,"no-title":""},on:{input:function(e){t.fromDateMenuPeriod=!1}},model:{value:t.fromDateValP,callback:function(e){t.fromDateValP=e},expression:"fromDateValP"}})],1),s("v-checkbox",{staticClass:"myCheckbox",attrs:{color:"primary","hide-details":"",label:"安全存量查詢"},model:{value:t.compareSafeStock,callback:function(e){t.compareSafeStock=e},expression:"compareSafeStock"}}),s("v-btn",{staticClass:"mt-n1 mr-15 mx-auto excel_wrapper",attrs:{color:"primary"},on:{click:t.exportToExcel}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-microsoft-excel")]),t._v(" Excel ")],1)],1)]},proxy:!0},{key:"item.stkRecord_sum",fn:function(e){return[s("v-edit-dialog",{attrs:{"return-value":e.item.stkRecord_sum,persistent:""},on:{"update:returnValue":function(s){return t.$set(e.item,"stkRecord_sum",s)},"update:return-value":function(s){return t.$set(e.item,"stkRecord_sum",s)},save:t.save,cancel:t.cancel,open:t.open,close:t.close},scopedSlots:t._u([{key:"input",fn:function(){return[s("v-text-field",{attrs:{label:"Edit",readonly:"","single-line":""},model:{value:e.item.stkRecord_sum,callback:function(s){t.$set(e.item,"stkRecord_sum",s)},expression:"props.item.stkRecord_sum"}})]},proxy:!0}],null,!0)},[t._v(" "+t._s(e.item.stkRecord_sum)+" "+t._s(e.item.stkRecord_unit)+" ")])]}}],null,!1,3249916738)})],1)],1):s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"500"},model:{value:t.permDialog,callback:function(e){t.permDialog=e},expression:"permDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v("錯誤訊息!")]),s("v-card-text",[s("div",{staticClass:"text-h4 pa-12"},[t._v("使用這項功能, 請通知管理人員...")])]),s("v-card-actions",{staticClass:"justify-end"},[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.permCloseFun}},[t._v(" 取消 ")])],1)],1)],1)],1)],1)],1)},As=[],Ns=(s("1637"),{name:"StockRecord",mixins:[_],mounted:function(){var t=this;window.onpopstate=function(){console.log("press back button, good bye...");var e=JSON.parse(localStorage.getItem("loginedUser"));e.setting_items_per_page=t.pagination.itemsPerPage,localStorage.setItem("loginedUser",JSON.stringify(e))}},data:function(){return{currentUser:{},permDialog:!1,snackbar:!1,snackbar_color:"success",snackbar_right:!0,snackbar_top:!0,snackbar_info:"",snackbar_icon_color:"#adadad",fromDateMenuStart:!1,fromDateValStart:null,compareDateStart:"",fromDateMenuEnd:!1,fromDateValEnd:null,compareDateEnd:"",fromDateMenuPeriod:!1,fromDateValP:null,compareDatePeriod:"",comparePeriods:"",compareSafeStock:!1,minDate:"2012-07-01",maxDate:"2042-06-30",search:"",periodMessage:"效期天數",pagination:{},itemsForSelect:[],selectedItems:[],isAllSelected:!1,singleExpand:!1,expanded:[],dessertsDisplayForCheckbox:[],dessertsDisplayForSelect:[],dessertsDisplay:[],desserts:[],temp_desserts:[],load_SingleTable_ok:!1}},computed:{headers:function(){var t=[{text:"ID",sortable:!1,value:"id",width:"4%",align:"start"},{text:"資材碼",sortable:!0,value:"stkRecord_reagID",width:"8%"},{text:"品名",sortable:!0,value:"stkRecord_reagName",width:"14%"},{text:"供應商",sortable:!0,value:"stkRecord_supplier",width:"12%"},{text:"入庫日期",sortable:!0,value:"stkRecord_Date",width:"8%"},{text:"效期",sortable:!0,value:"stkRecord_period",width:"8%"},{text:"安全存量",sortable:!1,value:"stkRecord_saftStockUnit",width:"12%",align:"center"},{text:"數量",sortable:!1,value:"stkRecord_cntUnit",width:"8%",align:"center"},{text:"儲位",sortable:!1,value:"stkRecord_grid",width:"15%",align:"center"}];return this.compareSafeStock&&t.push({text:"在庫總數",sortable:!1,value:"stkRecord_sum",width:"12%",class:"sum_class"}),t},displayPeriodDate:function(){if(null!=this.fromDateValP){var t=this.fromDateValP.substring(0,4),e=this.fromDateValP.substring(5,this.fromDateValP.length);e=e.replace("-","/");var s=parseInt(t);s-=1911,t=s.toString(),this.compareDatePeriod=t+"/"+e}return this.fromDateValP},fromDateDispStart:function(){if(null!=this.fromDateValStart){var t=this.fromDateValStart.substring(0,4),e=this.fromDateValStart.substring(5,this.fromDateValStart.length);e=e.replace("-","/");var s=parseInt(t);s-=1911,t=s.toString(),this.compareDateStart=t+"/"+e}return this.fromDateValStart},fromDateDispEnd:function(){if(null!=this.fromDateValEnd){var t=this.fromDateValEnd.substring(0,4),e=this.fromDateValEnd.substring(5,this.fromDateValEnd.length);e=e.replace("-","/");var s=parseInt(t);s-=1911,t=s.toString(),this.compareDateEnd=t+"/"+e}return this.fromDateValEnd}},watch:{compareSafeStock:function(t){if(t){var e=[];this.dessertsDisplayForCheckbox=JSON.parse(JSON.stringify(this.dessertsDisplay));for(var s=0;s<this.dessertsDisplay.length;s++){var a=parseInt(this.dessertsDisplay[s].stkRecord_saftStock),o=this.dessertsDisplay[s].stkRecord_sum;console.log("start, end",a,o),o<a&&e.push(this.dessertsDisplay[s])}this.dessertsDisplay=Object.assign([],e),this.dessertsDisplayForSelect=Object.assign([],this.dessertsDisplay);for(var i=["全部"],n=0;n<this.dessertsDisplay.length;n++)i.push(this.dessertsDisplay[n].stkRecord_supplier);this.itemsForSelect=Object(Dt["a"])(new Set(i)),this.selectedItems=Object.assign([],this.itemsForSelect),this.isAllSelected=!0,this.getSumForDisplay()}else this.dessertsDisplay=Object.assign([],this.dessertsDisplayForCheckbox),this.dessertsDisplayForCheckbox=[]},compareDatePeriod:function(t){if(""!=t){for(var e=this.desserts.length,s=0;s<e;s++)this.dessertsDisplay=this.dessertsDisplay.filter((function(e){var s=e.stkRecord_period.split("/"),a=s.map((function(t){return Number(t)})),o=t.split("/"),i=o.map((function(t){return Number(t)}));return console.log("效期, date: ",i,a),i[0]>a[0]||i[0]==a[0]&&i[1]>a[1]||i[0]==a[0]&&i[1]==a[1]&&i[2]>=a[2]?e:void 0}));this.dessertsDisplayForSelect=Object.assign([],this.dessertsDisplay);for(var a=["全部"],o=0;o<this.dessertsDisplay.length;o++)a.push(this.dessertsDisplay[o].stkRecord_supplier);this.itemsForSelect=Object(Dt["a"])(new Set(a)),this.selectedItems=Object.assign([],this.itemsForSelect),this.isAllSelected=!0,this.getSumForDisplay()}},compareDateStart:function(t){if(""!=t){for(var e=this.desserts.length,s=0;s<e;s++)this.dessertsDisplay=this.dessertsDisplay.filter((function(e){var s=e.stkRecord_Date.split("/"),a=s.map((function(t){return Number(t)})),o=t.split("/"),i=o.map((function(t){return Number(t)}));return a[0]>i[0]||a[0]==i[0]&&a[1]>i[1]||a[0]==i[0]&&a[1]==i[1]&&a[2]>=i[2]?e:void 0}));this.dessertsDisplayForSelect=Object.assign([],this.dessertsDisplay);for(var a=["全部"],o=0;o<this.dessertsDisplay.length;o++)a.push(this.dessertsDisplay[o].stkRecord_supplier);this.itemsForSelect=Object(Dt["a"])(new Set(a)),this.selectedItems=Object.assign([],this.itemsForSelect),this.isAllSelected=!0,this.getSumForDisplay()}},compareDateEnd:function(t){if(""!=t){for(var e=this.desserts.length,s=0;s<e;s++)this.dessertsDisplay=this.dessertsDisplay.filter((function(e){var s=e.stkRecord_Date.split("/"),a=s.map((function(t){return Number(t)})),o=t.split("/"),i=o.map((function(t){return Number(t)}));return i[0]>a[0]||i[0]==a[0]&&i[1]>a[1]||i[0]==a[0]&&i[1]==a[1]&&i[2]>=a[2]?e:void 0}));this.dessertsDisplayForSelect=Object.assign([],this.dessertsDisplay);for(var a=["全部"],o=0;o<this.dessertsDisplay.length;o++)a.push(this.dessertsDisplay[o].stkRecord_supplier);this.itemsForSelect=Object(Dt["a"])(new Set(a)),this.selectedItems=Object.assign([],this.itemsForSelect),this.isAllSelected=!0,this.getSumForDisplay()}},load_SingleTable_ok:function(t){var e=this;if(console.log("load_SingleTable_ok, desserts: ",t),t){this.desserts=JSON.parse(JSON.stringify(this.temp_desserts)),this.desserts=this.desserts.map((function(t){return Object(ms["a"])(Object(ms["a"])({},t),{},{stkRecord_sum:"--"})})),this.desserts=this.desserts.map((function(t){return Object(ms["a"])(Object(ms["a"])({},t),{},{stkRecord_sumDisp:0})}));for(var s=[this.desserts.reduce((function(t,e){return t[e.stkRecord_reagID]=(t[e.stkRecord_reagID]||0)+parseInt(e.stkRecord_inStock_count),t}),{})],a=Object.keys(s[0]).length,o=function(t){var a=e.desserts.find((function(e){var a=s.map((function(e){return Object.keys(e)[t]}));return e.stkRecord_reagID==a[0]})),o=e.desserts.indexOf(a),i=s.map((function(e){return Object.values(e)[t]}));e.desserts[o].stkRecord_sum=i[0],e.desserts[o].stkRecord_sumDisp=i[0]},i=0;i<a;i++)o(i);this.dessertsDisplay=Object.assign([],this.desserts),this.dessertsDisplay=Object.assign([],this.desserts),this.dessertsDisplayForSelect=Object.assign([],this.dessertsDisplay);for(var n=["全部"],r=0;r<this.dessertsDisplay.length;r++)n.push(this.dessertsDisplay[r].stkRecord_supplier);this.itemsForSelect=Object(Dt["a"])(new Set(n)),this.selectedItems=Object.assign([],this.itemsForSelect),this.isAllSelected=!0,this.load_SingleTable_ok=!1}}},created:function(){this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),this.currentUser.perm<1&&(this.permDialog=!0),this.stockOutTag_EmpID=this.currentUser.empID,this.pagination.itemsPerPage=this.currentUser.setting_items_per_page,this.load_SingleTable_ok=!1,this.initAxios(),this.listStockRecords()},methods:{initialize:function(){this.load_SingleTable_ok=!1,this.listStockRecords()},listStockRecords:function(){var t=this,e="/listStockRecords";console.log("listStockRecords, Axios get data..."),h.a.get(e).then((function(e){t.temp_desserts=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},exportToExcel:function(){var t=this;console.log("StockRecord, exportToExcel, Axios post data...");var e={stkRecord_reagID:"資材碼",stkRecord_reagName:"品名",stkRecord_supplier:"供應商",stkRecord_Date:"入庫日期",stkRecord_period:"效期",stkRecord_saftStockUnit:"安全存量",stkRecord_cntUnit:"數量",stkRecord_grid:"儲位"},s=Object.assign([],this.dessertsDisplay);s.unshift(e);var a="/exportToExcelForStock",o={blocks:s,count:s.length,name:this.currentUser.name};h.a.post(a,o).then((function(e){console.log("export into excel status: ",e.data.status,e.data.outputs),e.data.status?(t.snackbar_color="#008184",t.snackbar=!0,t.snackbar_info="庫存記錄("+e.data.outputs+")轉檔完成!",t.snackbar_icon_color="#ffffff"):(t.snackbar_color="red accent-2",t.snackbar=!0,t.snackbar_info="存檔錯誤!",t.snackbar_icon_color="#adadad")})).catch((function(e){console.error("axios error, code: ",e),t.snackbar_color="red accent-2",t.snackbar=!0,t.snackbar_info="存檔錯誤!",t.snackbar_icon_color="#adadad"}))},checkSelect:function(t){var e=this,s=t.includes("全部");if(console.log("Select... ",t,s,this.isAllSelected),s)if(this.isAllSelected){this.isAllSelected=!1,this.selectedItems=[];for(var a=1;a<t.length;a++)this.selectedItems.push(t[a])}else{console.log("Select all..."),this.selectedItems=[];for(var o=0;o<this.itemsForSelect.length;o++)this.selectedItems.push(this.itemsForSelect[o]);this.isAllSelected=!0}else if(this.isAllSelected)console.log("Remove all..."),this.selectedItems=[],this.isAllSelected=!1;else{console.log("Click some item..."),this.selectedItems=[];for(var i=0;i<t.length;i++){var n=this.itemsForSelect.includes(t[i]);console.log("item1...",n),n&&(this.selectedItems.push(t[i]),console.log("item2...",t[i]))}console.log("length...",t.length,this.itemsForSelect.length),t.length==this.itemsForSelect.length-1&&(this.selectedItems.unshift("全部"),this.isAllSelected=!0)}console.log("item3..."),this.selectedItems!=[]&&(console.log("item4..."),this.dessertsDisplay=this.dessertsDisplayForSelect.filter((function(t){return e.selectedItems.includes(t.stkRecord_supplier)})))},getExpand:function(t){console.log("expand: ",t)},filterOnlyCapsText:function(t,e,s){return null!=t&&null!=e&&"string"===typeof t&&-1!==t.toString().toLocaleUpperCase().indexOf(e)},getSumForDisplay:function(){for(var t=this,e=[this.dessertsDisplay.reduce((function(t,e){return t[e.stkRecord_reagID]=(t[e.stkRecord_reagID]||0)+parseInt(e.stkRecord_inStock_count),t}),{})],s=Object.keys(e[0]).length,a=function(s){var a=t.dessertsDisplay.find((function(t){var a=e.map((function(t){return Object.keys(t)[s]}));return t.stkRecord_reagID==a[0]})),o=t.dessertsDisplay.indexOf(a),i=e.map((function(t){return Object.values(t)[s]}));t.dessertsDisplay[o].stkRecord_sum=i[0]},o=0;o<s;o++)a(o)},save:function(){console.log("Dialog click save")},cancel:function(){console.log("Dialog click cancel")},open:function(){console.log("Dialog open")},close:function(){console.log("Dialog closed")},myFilter:function(){this.checkSafeStock()},checkSafeStock:function(){for(var t=[],e=Object.assign([],this.dessertsDisplay),s=this.compareSafeStock,a=0;a<e.length&&s;a++){var o=e[a].stkRecord_s_unit,i=e[a].stkRecord_c_unit,n=e[a].stkRecord_saftStock,r=e[a].stkRecord_cnt,l=r/e[a].stkRecord_scale,c=o.localeCompare(i),d=0==c&&r<n,u=0!=c&&r<l;(d||u)&&t.push(e[a])}0!=t.length&&s?this.initialize(t):this.initialize(e)},permCloseFun:function(){this.permDialog=!1,console.log("press permission Close Button..."),this.$router.push("/navbar")}}}),Us=Ns,Fs=(s("aae3"),Object(l["a"])(Us,Ps,As,!1,null,"0086f82b",null)),Rs=Fs.exports,Ms=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-app",[s("v-container",{attrs:{fluid:""}},[s("v-snackbar",{attrs:{color:t.snackbar_color,right:t.snackbar_right,top:t.snackbar_top},scopedSlots:t._u([{key:"action",fn:function(e){e.attrs;return[s("v-btn",{attrs:{icon:"",color:t.snackbar_icon_color},on:{click:function(e){t.snackbar=!1}}},[s("v-icon",{attrs:{dark:""}},[t._v("mdi-close-circle")])],1)]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.snackbar_info)+" ")]),t.currentUser.perm>=1?s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-card",{staticClass:"pa-md-4 mt-5 mx-lg-auto",attrs:{width:"100vw"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{dense:"",headers:t.headers,items:t.dessertsDisplay,search:t.search,"custom-filter":t.filterOnlyCapsText,options:t.pagination,"item-class":t.setRowBackground,"footer-props":{itemsPerPageText:"每頁的資料筆數"}},on:{"update:options":function(e){t.pagination=e}},scopedSlots:t._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:""}},[s("v-toolbar-title",{staticStyle:{height:"40px"}},[t._v("盤點作業")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-text-field",{staticClass:"style-0",attrs:{placeholder:"關鍵字查詢"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),s("v-spacer"),s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","max-width":"280px","min-width":"280px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-text-field",t._g({staticClass:"shrink style-2",attrs:{placeholder:"效期查詢","prepend-icon":"event",readonly:"",value:t.displayPeriodDate},model:{value:t.compareDatePeriod,callback:function(e){t.compareDatePeriod=e},expression:"compareDatePeriod"}},a))]}}],null,!1,1967815061),model:{value:t.fromDateMenuPeriod,callback:function(e){t.fromDateMenuPeriod=e},expression:"fromDateMenuPeriod"}},[s("v-date-picker",{attrs:{locale:"zh-TW",min:t.minDate,max:t.maxDate,"no-title":""},on:{input:function(e){t.fromDateMenuPeriod=!1}},model:{value:t.fromDateValP,callback:function(e){t.fromDateValP=e},expression:"fromDateValP"}})],1),s("v-spacer"),s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","max-width":"280px","min-width":"280px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-text-field",t._g({staticClass:"shrink style-3",attrs:{placeholder:"入庫開始日期查詢","prepend-icon":"event",readonly:"",value:t.fromDateDisp},model:{value:t.compareDate,callback:function(e){t.compareDate=e},expression:"compareDate"}},a))]}}],null,!1,1581225045),model:{value:t.fromDateMenu,callback:function(e){t.fromDateMenu=e},expression:"fromDateMenu"}},[s("v-date-picker",{attrs:{locale:"zh-TW",min:t.minDate,max:t.maxDate,"no-title":""},on:{input:function(e){t.fromDateMenu=!1}},model:{value:t.fromDateVal,callback:function(e){t.fromDateVal=e},expression:"fromDateVal"}})],1),s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","max-width":"280px","min-width":"280px"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on;return[s("v-text-field",t._g({staticClass:"shrink style-3",attrs:{placeholder:"入庫截止日期查詢","prepend-icon":"event",readonly:"",value:t.fromDateDispEnd},model:{value:t.compareDateEnd,callback:function(e){t.compareDateEnd=e},expression:"compareDateEnd"}},a))]}}],null,!1,2879141181),model:{value:t.fromDateMenuEnd,callback:function(e){t.fromDateMenuEnd=e},expression:"fromDateMenuEnd"}},[s("v-date-picker",{attrs:{locale:"zh-TW",min:t.minDate,max:t.maxDate,"no-title":""},on:{input:function(e){t.fromDateMenuEnd=!1}},model:{value:t.fromDateValEnd,callback:function(e){t.fromDateValEnd=e},expression:"fromDateValEnd"}})],1),s("v-spacer"),s("v-select",{staticClass:"style-4",attrs:{items:t.itemsForEmployer,label:"入庫人員查詢","prepend-icon":"mdi-account-group",dense:"",outlined:"",multiple:""},on:{change:t.checkSelect},model:{value:t.selectedEmployers,callback:function(e){t.selectedEmployers=e},expression:"selectedEmployers"}}),s("v-btn",{staticClass:"mt-n1 mr-15 mx-auto excel_wrapper",attrs:{color:"primary"},on:{click:t.exportToExcel}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-microsoft-excel")]),t._v(" Excel ")],1),s("div",{staticClass:"flip_wrapper"},[s("div",{staticClass:"flip_btn"},[s("v-btn",{staticClass:"side default-side mt-n1 mr-15 mx-auto",attrs:{color:"primary"}},[s("v-icon",{attrs:{left:""}},[t._v("mdi-content-save-edit-outline")]),t._v(" 在庫資料更新 ")],1),s("v-btn",{staticClass:"side hover-side mt-n1 mr-15 mx-auto",attrs:{color:"primary"},on:{click:t.updateStockInDataByInv}},[s("v-icon",{attrs:{left:"",size:"24px"}},[t._v("mdi-check-circle-outline")]),t._v(" 確定? ")],1)],1)])],1)]},proxy:!0},{key:"item.stockInTag_grid",fn:function(e){return[s("v-edit-dialog",{attrs:{"return-value":e.item.stockInTag_grid,"save-text":"確定","cancel-text":"取消",large:""},on:{save:function(s){return t.saveName(e.item)},open:function(s){return t.openName(e.item.stockInTag_grid)},close:function(s){e.item.stockInTag_grid=t.editName},"update:returnValue":function(s){return t.$set(e.item,"stockInTag_grid",s)},"update:return-value":function(s){return t.$set(e.item,"stockInTag_grid",s)}},scopedSlots:t._u([{key:"input",fn:function(){return[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("div",{staticStyle:{color:"#007bff","font-weight":"400","font-size":"14px"}},[t._v("站別")]),s("vue-numeric-input",{attrs:{min:1,max:3,step:1,align:"center",size:"small"},model:{value:t.num1,callback:function(e){t.num1=e},expression:"num1"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("div",{staticStyle:{color:"#007bff","font-weight":"400","font-size":"14px"}},[t._v("層別")]),s("vue-numeric-input",{attrs:{min:1,max:5,step:1,align:"center",size:"small"},model:{value:t.num2,callback:function(e){t.num2=e},expression:"num2"}})],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("div",{staticStyle:{color:"#007bff","font-weight":"400","font-size":"14px"}},[t._v("格位別")]),s("vue-numeric-input",{attrs:{min:1,max:10,step:1,align:"center",size:"small"},model:{value:t.num3,callback:function(e){t.num3=e},expression:"num3"}})],1)],1)]},proxy:!0}],null,!0)},[t._v(" "+t._s(e.item.stockInTag_grid)+" ")])]}},{key:"item.stockInTag_cnt",fn:function(e){var a=e.item,o=e.index;return[s("div",{staticClass:"row_myText_inv"},[s("v-text-field",{staticClass:"centered-input pe-0 me-2 py-1 my-0 block_myText_inv_cnt",staticStyle:{width:"20px","max-width":"20px"},attrs:{dense:"",readonly:""},on:{input:function(e){return t.getData(a)}},model:{value:t.temp_desserts[o].stockInTag_cnt,callback:function(e){t.$set(t.temp_desserts[o],"stockInTag_cnt",e)},expression:"temp_desserts[index].stockInTag_cnt"}}),t._v(" "),s("v-tooltip",{staticClass:"tooltip2",attrs:{bottom:"",color:"#434343"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,i=e.attrs;return[s("v-text-field",t._g(t._b({staticClass:"centered-input pe-0 me-2 py-1 my-0 block_myText_inv_id",class:{block_myText_inv_cnt_mdf_color:a.isEnter},staticStyle:{width:"20px","max-width":"20px"},attrs:{dense:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.modifyIDForPressRet(a)},blur:function(e){return t.modifyIDForBlur(a)},focus:function(e){return t.modifyIDForFocus(a)}},model:{value:a.editReagentID,callback:function(e){t.$set(a,"editReagentID",e)},expression:"item.editReagentID"}},"v-text-field",i,!1),o))]}}],null,!0)},[t._v(" "),s("span",[t._v("選取")])]),s("v-text-field",{staticClass:"centered-input pe-0 me-2 py-1 my-0 block_myText_inv_cnt_mdf",class:{block_myText_inv_cnt_mdf_color:a.isEnter},staticStyle:{width:"20px","max-width":"20px"},attrs:{dense:""},on:{input:function(e){return t.getData(a)},blur:function(e){return t.modifyInvCntForBlur(a)},focus:function(e){return t.modifyInvCntForFocus(a)}},model:{value:a.stockInTag_cnt_inv_mdf,callback:function(e){t.$set(a,"stockInTag_cnt_inv_mdf",e)},expression:"item.stockInTag_cnt_inv_mdf"}})],1)]}},{key:"item.stockInTag_comment",fn:function(e){var a=e.item;return["其他"!==a.stockInTag_comment?s("div",[s("v-select",{staticClass:"pe-0 me-2 py-1 my-0 myText",attrs:{items:t.comment_items,required:""},model:{value:a.stockInTag_comment,callback:function(e){t.$set(a,"stockInTag_comment",e)},expression:"item.stockInTag_comment"}})],1):s("div",[s("v-text-field",{staticStyle:{position:"relative",top:"-10px"},attrs:{autofocus:""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getComment(a)}},model:{value:t.commentForInventory,callback:function(e){t.commentForInventory=e},expression:"commentForInventory"}})],1)]}}],null,!0)})],1)],1):s("v-row",{attrs:{align:"center",justify:"space-around"}},[s("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"500"},model:{value:t.permDialog,callback:function(e){t.permDialog=e},expression:"permDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"red",dark:""}},[t._v("錯誤訊息!")]),s("v-card-text",[s("div",{staticClass:"text-h4 pa-12"},[t._v("使用這項功能, 請通知管理人員...")])]),s("v-card-actions",{staticClass:"justify-end"},[s("v-spacer"),s("v-btn",{attrs:{text:""},on:{click:t.permCloseFun}},[t._v(" 取消 ")])],1)],1)],1)],1)],1)],1)},Ks=[],Ls=(s("498a"),{name:"Inventory",mixins:[_],components:{VueNumericInput:Nt.a},mounted:function(){var t=this;window.onpopstate=function(){console.log("press back button, good bye...");var e=JSON.parse(localStorage.getItem("loginedUser"));e.setting_items_per_page=t.pagination.itemsPerPage,localStorage.setItem("loginedUser",JSON.stringify(e))}},data:function(){return{currentUser:{},permDialog:!1,snackbar:!1,snackbar_color:"success",snackbar_right:!0,snackbar_top:!0,snackbar_info:"",snackbar_icon_color:"#adadad",fromDateMenu:!1,fromDateVal:null,compareDate:"",fromDateMenuEnd:!1,fromDateValEnd:null,compareDateEnd:"",fromDateMenuPeriod:!1,fromDateValP:null,compareDatePeriod:"",minDate:"2012-07-01",maxDate:"2042-06-30",search:"",headers:[{text:"ID",sortable:!1,value:"id",width:"40px",align:"start"},{text:"資材碼",sortable:!0,value:"stockInTag_reagID",width:"90px"},{text:"品名",sortable:!0,value:"stockInTag_reagName",width:"406px"},{text:"效期",sortable:!0,value:"stockInTag_reagPeriod",width:"88px"},{text:"保存溫度",sortable:!1,value:"stockInTag_reagTemp",width:"88px"},{text:"入庫日期",sortable:!0,value:"stockInTag_Date",width:"88px"},{text:"入庫人員",sortable:!0,value:"stockInTag_Employer",width:"96px"},{text:"格位",sortable:!1,value:"stockInTag_grid",width:"88px"},{text:"在庫數 _ 盤點數",sortable:!1,value:"stockInTag_cnt",width:"118px"},{text:"說明",sortable:!1,value:"stockInTag_comment",width:"136px"}],pagination:{},itemsForEmployer:[],selectedEmployers:[],isAllSelected:!1,dessertsDisplayForSelect:[],dessertsDisplay:[],desserts:[],temp_desserts:[],editedIndex:-1,clickTimes:0,editName:"",num1:0,num2:0,num3:0,comment_items:["人員忘記出入庫","試劑毀損","試劑過期","試劑允收異常","其他"],commentForInventory:"",load_SingleTable_ok:!1}},computed:{displayPeriodDate:function(){if(null!=this.fromDateValP){var t=this.fromDateValP.substring(0,4),e=this.fromDateValP.substring(5,this.fromDateValP.length);e=e.replace("-","/");var s=parseInt(t);s-=1911,t=s.toString(),this.compareDatePeriod=t+"/"+e}return this.fromDateValP},fromDateDisp:function(){if(null!=this.fromDateVal){var t=this.fromDateVal.substring(0,4),e=this.fromDateVal.substring(5,this.fromDateVal.length);e=e.replace("-","/");var s=parseInt(t);s-=1911,t=s.toString(),this.compareDate=t+"/"+e}return this.fromDateVal},fromDateDispEnd:function(){if(null!=this.fromDateValEnd){var t=this.fromDateValEnd.substring(0,4),e=this.fromDateValEnd.substring(5,this.fromDateValEnd.length);e=e.replace("-","/");var s=parseInt(t);s-=1911,t=s.toString(),this.compareDateEnd=t+"/"+e}return this.fromDateValEnd}},watch:{compareDatePeriod:function(t){if(""!=t){for(var e=this.desserts.length,s=0;s<e;s++)this.dessertsDisplay=this.dessertsDisplay.filter((function(e){var s=e.stockInTag_reagPeriod.split("/"),a=s.map((function(t){return Number(t)})),o=t.split("/"),i=o.map((function(t){return Number(t)}));return console.log("效期, date: ",i,a),i[0]>a[0]||i[0]==a[0]&&i[1]>a[1]||i[0]==a[0]&&i[1]==a[1]&&i[2]>=a[2]?e:void 0}));this.dessertsDisplayForSelect=Object.assign([],this.dessertsDisplay);for(var a=["全部"],o=0;o<this.dessertsDisplay.length;o++)a.push(this.dessertsDisplay[o].stockInTag_Employer);this.itemsForEmployer=Object(Dt["a"])(new Set(a)),this.selectedEmployers=Object.assign([],this.itemsForEmployer),this.isAllSelected=!0,this.load_SingleTable_ok=!1}},compareDate:function(t){if(""!=t){for(var e=this.desserts.length,s=0;s<e;s++)this.dessertsDisplay=this.dessertsDisplay.filter((function(e){var s=e.stockInTag_Date.split("/"),a=s.map((function(t){return Number(t)})),o=t.split("/"),i=o.map((function(t){return Number(t)}));return a[0]>i[0]||a[0]==i[0]&&a[1]>i[1]||a[0]==i[0]&&a[1]==i[1]&&a[2]>=i[2]?e:void 0}));this.dessertsDisplayForSelect=Object.assign([],this.dessertsDisplay);for(var a=["全部"],o=0;o<this.dessertsDisplay.length;o++)a.push(this.dessertsDisplay[o].stockInTag_Employer);this.itemsForEmployer=Object(Dt["a"])(new Set(a)),this.selectedEmployers=Object.assign([],this.itemsForEmployer),this.isAllSelected=!0}},compareDateEnd:function(t){if(""!=t){for(var e=this.desserts.length,s=0;s<e;s++)this.dessertsDisplay=this.dessertsDisplay.filter((function(e){var s=e.stockInTag_Date.split("/"),a=s.map((function(t){return Number(t)})),o=t.split("/"),i=o.map((function(t){return Number(t)}));return i[0]>a[0]||i[0]==a[0]&&i[1]>a[1]||i[0]==a[0]&&i[1]==a[1]&&i[2]>=a[2]?e:void 0}));this.dessertsDisplayForSelect=Object.assign([],this.dessertsDisplay);for(var a=["全部"],o=0;o<this.dessertsDisplay.length;o++)a.push(this.dessertsDisplay[o].stockInTag_Employer);this.itemsForEmployer=Object(Dt["a"])(new Set(a)),this.selectedEmployers=Object.assign([],this.itemsForEmployer),this.isAllSelected=!0}},load_SingleTable_ok:function(t){if(console.log("load_SingleTable_ok, desserts: ",t),t){this.desserts=JSON.parse(JSON.stringify(this.temp_desserts)),this.desserts=this.desserts.map((function(t){return Object(ms["a"])(Object(ms["a"])({},t),{},{isGridChange:!1})})),this.desserts=this.desserts.map((function(t){return Object(ms["a"])(Object(ms["a"])({},t),{},{editReagentID:""})})),this.desserts=this.desserts.map((function(t){return Object(ms["a"])(Object(ms["a"])({},t),{},{isEnter:!1})})),this.dessertsDisplay=Object.assign([],this.desserts),this.dessertsDisplayForSelect=Object.assign([],this.dessertsDisplay);for(var e=["全部"],s=0;s<this.dessertsDisplay.length;s++)e.push(this.dessertsDisplay[s].stockInTag_Employer);this.itemsForEmployer=Object(Dt["a"])(new Set(e)),this.selectedEmployers=Object.assign([],this.itemsForEmployer),this.isAllSelected=!0,this.load_SingleTable_ok=!1}}},created:function(){this.currentUser=JSON.parse(localStorage.getItem("loginedUser")),this.currentUser.perm<1&&(this.permDialog=!0),this.stockOutTag_EmpID=this.currentUser.empID,this.pagination.itemsPerPage=this.currentUser.setting_items_per_page,this.load_SingleTable_ok=!1,this.initAxios(),this.listInventorys()},methods:{initialize:function(){this.load_SingleTable_ok=!1,this.listInventorys()},listInventorys:function(){var t=this,e="/listInventorys";console.log("listInventorys, Axios get data..."),h.a.get(e).then((function(e){t.temp_desserts=e.data.outputs,console.log("GET ok, total records:",e.data.outputs.length),t.load_SingleTable_ok=!0})).catch((function(e){console.error(e),t.load_SingleTable_ok=!1}))},exportToExcel:function(){var t=this;console.log("Inventory, exportToExcel, Axios post data...");var e={id:"ID",stockInTag_reagID:"資材碼",stockInTag_reagName:"品名",stockInTag_reagPeriod:"效期",stockInTag_reagTemp:"保存溫度",stockInTag_Date:"入庫日期",stockInTag_Employer:"入庫人員",stockInTag_grid:"儲位",stockInTag_cnt:"在庫數",stockInTag_cnt_inv_mdf:"盤點數",stockInTag_comment:"說明"},s=Object.assign([],this.dessertsDisplay);s.unshift(e);var a="/exportToExcelForInv",o={blocks:s,count:s.length,name:this.currentUser.name};h.a.post(a,o).then((function(e){console.log("export into excel status: ",e.data.status,e.data.outputs),e.data.status?(t.snackbar_color="#008184",t.snackbar=!0,t.snackbar_info="盤點記錄("+e.data.outputs+")轉檔完成!",t.snackbar_icon_color="#ffffff"):(t.snackbar_color="red accent-2",t.snackbar=!0,t.snackbar_info="存檔錯誤!",t.snackbar_icon_color="#adadad")})).catch((function(e){console.error("axios error, code: ",e),t.snackbar_color="red accent-2",t.snackbar=!0,t.snackbar_info="存檔錯誤!",t.snackbar_icon_color="#adadad"}))},updateStockInDataByInv:function(){var t=this;console.log("Inventory, updateStockInDataByInv, Axios post data...");var e="/updateStockInDataByInv",s={blocks:this.desserts,count:this.desserts.length};h.a.post(e,s).then((function(e){console.log("update inTag data status: ",e.data.status),e.data.status?(t.snackbar_color="#008184",t.snackbar=!0,t.snackbar_info="在庫資料更新完成!",t.snackbar_icon_color="#ffffff"):(t.snackbar_color="red accent-2",t.snackbar=!0,t.snackbar_info="存檔錯誤! "+e.data.message,t.snackbar_icon_color="#adadad")})).catch((function(e){console.error("axios error, code: ",e),t.snackbar_color="red accent-2",t.snackbar=!0,t.snackbar_info="存檔錯誤!",t.snackbar_icon_color="#adadad"}))},checkSelect:function(t){var e=this,s=t.includes("全部");if(console.log("Select... ",t,s,this.isAllSelected),s)if(this.isAllSelected){this.isAllSelected=!1,this.selectedEmployers=[];for(var a=1;a<t.length;a++)this.selectedEmployers.push(t[a])}else{console.log("Select all..."),this.selectedEmployers=[],this.isAllSelected=!0;for(var o=0;o<this.itemsForEmployer.length;o++)this.selectedEmployers.push(this.itemsForEmployer[o])}else if(this.isAllSelected)console.log("Remove all..."),this.selectedEmployers=[],this.isAllSelected=!1;else{console.log("Click some item..."),this.selectedEmployers=[];for(var i=0;i<t.length;i++){var n=this.itemsForEmployer.includes(t[i]);console.log("item1...",n),n&&(this.selectedEmployers.push(t[i]),console.log("item2...",t[i]))}t.length==this.itemsForEmployer.length-1&&(console.log("Hello end..."),this.selectedEmployers.unshift("全部"),this.isAllSelected=!0)}console.log("item3..."),this.selectedEmployers!=[]&&(console.log("item4..."),this.dessertsDisplay=this.dessertsDisplayForSelect.filter((function(t){return e.selectedEmployers.includes(t.stockInTag_Employer)})))},filterOnlyCapsText:function(t,e,s){return null!=t&&null!=e&&"string"===typeof t&&-1!==t.toString().toLocaleUpperCase().indexOf(e)},saveName:function(t){this.editName=this.num1+"站"+this.num2+"層"+this.num3+"格",this.editedIndex=this.desserts.map((function(t){return t.id})).indexOf(t.id),console.log("saveName, index: ",this.editedIndex),this.temp_desserts[this.editedIndex].stockInTag_grid!=this.editName&&(this.desserts[this.editedIndex].isGridChange=!0),this.desserts[this.editedIndex].stockInTag_grid=this.editName,this.desserts[this.editedIndex].stockInTag_grid_station=this.num1,this.desserts[this.editedIndex].stockInTag_grid_layout=this.num2,this.desserts[this.editedIndex].stockInTag_grid_pos=this.num3,t.stockInTag_grid=this.editName},openName:function(t){this.editName=t,this.num1=parseInt(this.editName[0]),this.num2=parseInt(this.editName[2]),this.num3=parseInt(this.editName[4])},setRowBackground:function(t){},modifyInvCntForBlur:function(t){t.isEnter=!1;var e=parseInt(t.stockInTag_cnt_inv_mdf),s=parseInt(t.stockInTag_cnt),a=t.editReagentID.trim();return e!=s&&0!=e&&a==t.stockInTag_reagID?(t.stockInTag_comment="異常! ",void(t.editReagentID=t.stockInTag_reagID)):e==s&&0!=e&&a==t.stockInTag_reagID?(t.stockInTag_comment="盤點OK! ",void(t.editReagentID=t.stockInTag_reagID)):(t.stockInTag_cnt_inv_mdf="0",void(t.editReagentID=""))},modifyInvCntForFocus:function(t){t.isEnter=!0,this.clickTimes=0},modifyIDForBlur:function(t){t.isEnter=!1;var e=parseInt(t.stockInTag_cnt_inv_mdf),s=parseInt(t.stockInTag_cnt);return e!=s&&0!=e&&0!=this.clickTimes?(t.stockInTag_comment="異常! ",void(t.editReagentID=t.stockInTag_reagID)):e==s&&0!=e&&0!=this.clickTimes?(t.stockInTag_comment="盤點OK! ",void(t.editReagentID=t.stockInTag_reagID)):void(t.editReagentID="")},modifyIDForFocus:function(t){t.stockInTag_cnt_inv_mdf="0",t.stockInTag_comment="",t.editReagentID="",this.clickTimes=0,t.isEnter=!0},modifyIDForPressRet:function(t){this.clickTimes=this.clickTimes+1;var e=parseInt(t.stockInTag_cnt_inv_mdf),s=t.editReagentID.trim();s==t.stockInTag_reagID&&(e+=1,t.stockInTag_cnt_inv_mdf=e.toString()),t.editReagentID=""},getData:function(t){this.editedIndex=this.desserts.map((function(t){return t.id})).indexOf(t.id),console.log("getData, index: ",this.editedIndex),this.temp_desserts[this.editedIndex].stockInTag_cnt!=t.stockInTag_cnt&&(this.desserts[this.editedIndex].isGridChange=!0)},getComment:function(t){this.editedIndex=this.desserts.map((function(t){return t.id})).indexOf(t.id),this.temp_desserts[this.editedIndex].stockInTag_comment!=t.stockInTag_comment&&(this.desserts[this.editedIndex].isGridChange=!0),t.stockInTag_comment=this.commentForInventory,this.comment_items.unshift(t.stockInTag_comment)},permCloseFun:function(){this.permDialog=!1,console.log("press permission Close Button..."),this.$router.push("/navbar")}}}),Bs=Ls,Vs=(s("132f"),s("300d"),Object(l["a"])(Bs,Ms,Ks,!1,null,"3c5e53c4",null)),$s=Vs.exports;a["default"].use(u["a"]);var zs=[{path:"/",name:"Login",component:_t},{path:"/about",name:"About",component:function(){return s.e("chunk-2d22d746").then(s.bind(null,"f820"))}},{path:"/emp",name:"Employer",component:It},{path:"/reag",name:"Reagent",component:jt},{path:"/grid",name:"Grids",component:Mt},{path:"/gridsForLed",name:"GridsForLed",component:Ht},{path:"/dep",name:"Department",component:oe},{path:"/sup",name:"Supplier",component:de},{path:"/supAndPrd",name:"SupplierForProduct",component:_e},{path:"/perm",name:"Permission",component:Ie},{path:"/stockIn",name:"StockIn",component:ds},{path:"/inTag",name:"StockInTag",component:we},{path:"/inTagPrint",name:"StockInTagPrint",component:Qe},{path:"/outTag",name:"StockOutTag",component:bs},{path:"/outTagPrint",name:"StockOutTagPrint",component:Ds},{path:"/app1",name:"App1",component:M},{path:"/app2",name:"App2",component:z},{path:"/app3",name:"App3",component:Y},{path:"/app4",name:"App4",component:st},{path:"/navbar",name:"Navbar",component:P},{path:"/reqRec",name:"ReqRecord",component:Cs},{path:"/stockRec",name:"StockRecord",component:Rs},{path:"/invent",name:"Inventory",component:$s}],Gs=new u["a"]({mode:"history",base:"/",routes:zs});Gs.beforeEach((function(t,e,s){var a=localStorage.getItem("Authenticated");null==a&&(a=!1,localStorage.setItem("Authenticated",a)),console.log("routing is:",t.name,a),"Login"===t.name||a?s():s({name:"Login"})}));var Js=Gs,qs=s("2f62");a["default"].use(qs["a"]);var Qs=new qs["a"].Store({state:{},mutations:{},actions:{},modules:{}}),Zs=s("5f5b"),Ys=s("b1e0"),Ws=(s("f9e3"),s("2dd8"),s("ce5b")),Hs=s.n(Ws);s("bf40"),s("41e6"),s("d1e78");a["default"].use(Zs["a"]),a["default"].use(Ys["a"]),a["default"].use(Hs.a,{icons:{iconfont:"mdi"}}),a["default"].config.productionTip=!1,a["default"].config.devtools=!0,new a["default"]({vuetify:new Hs.a,router:Js,store:Qs,render:function(t){return t(d)}}).$mount("#app")},6047:function(t,e,s){"use strict";s("794b")},6326:function(t,e,s){},"66b8":function(t,e,s){},"66f2":function(t,e,s){"use strict";s("ac9d")},6717:function(t,e,s){"use strict";s("a2de")},"67ae":function(t,e,s){"use strict";s("00bd")},"6d10":function(t,e,s){"use strict";s("eddb")},"6dd9":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABmJLR0QA/wD/AP+gvaeTAAAEr0lEQVRoge2ZXWwUVRTHf2dmt1BCbCVIFDApUQSEbj9YgaoQMTEhGiKGgA8ixkdMlC0lkcQHFvUJoV1t5AE1EfxIpEkFEwJoDAaURJwtdIEHIt9tCYkiBaTQlpnjwwx+gLB7Z6cJD/t72Zvd+z/n/PfOvXPnDpQoUaJEiRIlkKgDJpxUvSLPA3ME7gceDH7qUjgH7BF0Wy6Z6YgybzRGFEk4qYWIvAtMKlB1FJW3csnmdgQttoSijSR+XjkB2/0SmBV8dUaRbZa429XjFGXxbgAGBseLRZWn9nOCLiAYKRH2iaUvHazLnCqmjqKM1P6SesITaQfGAN0qvDP5ePcnbYvb3DsKNW1VZy8tFHQtUAWcF2RRZ7J5d9haQhup7lg+RzzrO6AMpZ0ye2muZt0VkxhTj7w2MnZ1+Gfqj9CAWt4zh+rf3xOmnlBGgstpPzBahJbO+pam0Ne5pq2E07sekRTwG649Mzdz3UnTMJZ5YiSYE6NR2jvrK1YWNVkl7eWSlU2CbAXuk5j7OWr+BxsbSTiphfgTu4syeymS9kxj3IKkvevl114GelR5vKYj9YJpCDMjigRLLCqsNp0Td+LI1A1/oqwGUPVzmGBkJJFN1eHfJ85MPt692TRZPiad7P4U6Aam1O5P1ZpojYwo1oKguTXvEhuCtsVtrqhsA/Dk71wFYThHdDYAwg4zXeF4eNv9HEGuAjEyIjAOwIVjJjqzHHoiaI4z0ZmuWg8AMLz/nKGuYNwRgz1Bc0iNlPkfYwYMdQXTX2YPBs24ic7UyEUAuXzhXkNdwQy7MPxG7F4TnamR4wBW3HrEUFcwVmzAj62cyNP1vzqzNHog+HzaTGeAZzcAIHrQRGZ2H1HZ5TfkRROdCcGzCqi100RnZORq5fWdwO/AlER2xax8/U2Z1tGYxN/Hne+rHNxlojUycmxia79AKwCeNofZpd4WRSyPZr/Jh8cmtvabyI13vzGurAO6EBpqnNSrpvrbUeOklgCzgR6J22tN9cZGssmNfSKsBFCR1mnZ5QnTGDdT19H0qIps8GPqm2F21eYPVkDn9JYtwEfACEulfbrTNDpMHICp+xpHuZ7XDowE3XxoeuaLMHFCGQG4dLniDRQH5KFB9b5p2NdYbhrj4V9fH2bH5WtgkkBnnL5lYesJbeTU3PQ1V2PzgdMIDVfifLVoyyK74ACKlPfGPkZ0DuhZ15P52eTGvrD1hDYCcGTGe+dsy3oW6EWYf3TC+LcL1VZnV6wRYQlwUZF5h2c0dxVTSyTLZ42zYq6i3wKgbl3usQ8O36l/tdNYLeAfmVoyL1ff/H2xNRQ1IjfwD9YkA8QQO+91LugyIAaSicKEHzMiag+kqjxXjM6jbMuqOlC//nQU+SM9jU84jUbnW7lkS2T5Y1EF+jf5CjQ1XAiRzJG7gSEZkYST2ptLZmYnnNRekCeHIsfNDNGISOSXTj4iHhE9CzLW82QVQC6ZueVsKnin8iPQc4u8CCI1oshmgVWWpT8lnMb/7eP903lTlLkjNeKVV6y2rl5E0KUgY2/TrQdlkzuiYk2UuSN/q3uDp3anY3/c05tG5RU/k24adaky/cPc9PWhylnibuIvDQiDjdg1NLYAAAAASUVORK5CYII="},"794b":function(t,e,s){},"7e0d":function(t,e,s){t.exports=s.p+"img/china_logo.ce4d179e.png"},"7fe2":function(t,e,s){"use strict";s("4ac0")},8501:function(t,e,s){"use strict";s("06d8")},"87b1":function(t,e,s){"use strict";s("259b")},"8a98":function(t,e,s){},"91ed":function(t,e,s){},"94ef":function(t,e,s){},"9e7d":function(t,e,s){},"9f85":function(t,e,s){"use strict";s("91ed")},a2de:function(t,e,s){},aae3:function(t,e,s){"use strict";s("43a3")},ac9d:function(t,e,s){},b6d6:function(t,e,s){t.exports=s.p+"img/china_header.e4eff228.png"},bcaa:function(t,e,s){"use strict";s("c3a6")},c119:function(t,e,s){},c198:function(t,e,s){t.exports=s.p+"img/icons8-light-on-unscreen.a0c01786.gif"},c3a6:function(t,e,s){},c575:function(t,e,s){"use strict";s("18e2")},c5bf:function(t,e,s){},c7404:function(t,e,s){"use strict";s("348b")},ce0f:function(t,e,s){},d47f:function(t,e,s){"use strict";s("94ef")},d9bd:function(t,e,s){},da05:function(t,e,s){},de40:function(t,e,s){"use strict";s("c119")},e4b1:function(t,e,s){"use strict";s("0731")},ea96:function(t,e,s){"use strict";s("8a98")},eddb:function(t,e,s){},ee1e:function(t,e,s){"use strict";s("9e7d")},eeb8:function(t,e,s){"use strict";s("c5bf")},f1f6:function(t,e,s){},fb19:function(t,e,s){}});
//# sourceMappingURL=app.9d0c6d2b.js.map